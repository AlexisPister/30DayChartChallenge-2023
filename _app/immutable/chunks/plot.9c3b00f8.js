import{R as jt,p as vf,q as Ca,u as Aa,C as Da,v as si,w as li,x as di,y as ae,z as Ea,A as xt,m as Cs,s as Xr,B as As,l as at,n as La,D as St}from"./transform.3e593064.js";import{d as Vt}from"./descending.129c84e0.js";import{a as Ct}from"./ascending.3ff63084.js";import{m as kn,a as Pe,s as Ds}from"./Set2.4b6542ef.js";import{n as Es,a as Ls,b as hi,t as Mf,c as Na,i as hn,d as Tf,e as Ns,f as bi,g as Us,h as $f,j as Rs}from"./continuous.4bb1cc2d.js";import{r as Is}from"./range.6bc2a9a0.js";import{s as Z,m as Ua,t as Zt,p as Jr,a as At,c as xf}from"./math.66d62dd6.js";import{r as _n,g as Sf,m as Os}from"./mean.e1aff159.js";import{I as Fs,a as Ra,i as qs,o as Ws}from"./ordinal.9aa01bae.js";import{n as Qe,a as Xe,A as wn,s as xe,t as Ps,g as Rn,b as mi,i as Ys,p as Bs,r as pi,d as gi,c as Gt,e as j,f as rn,h as Q,j as ne,k as kt,l as pe,m as Hs,o as zs,q as _s,u as js,v as an,w as Vs,x as Zs,y as ea,z as Qt,B as Ar,C as je,D as Cf,E as Gs,F as ks,G as Qs,H as na,I as Ks,J as Xs}from"./linear.ad569581.js";import{c as N}from"./colors.98f238a0.js";import{c as Kt,r as Y,i as Af,s as Js}from"./Spectral.d7576e21.js";import{l as Xt,a as Df,b as el}from"./linear.65be369b.js";import{i as Cn,a as Jt}from"./init.a5b10ee5.js";import{n as nl,l as tl,a as rl}from"./log.90376da7.js";import{e as vn,p as al,b as Ef}from"./band.27971c68.js";import{i as Lf}from"./value.bf6eb0ca.js";import{f as Ia}from"./defaultLocale.c00e5010.js";import{a as ta}from"./path.1bc61eb4.js";function il(e){return e.length|0}function fl(e){return!(e>0)}function ol(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function cl(e){return n=>e(...n)}function ul(...e){const n=typeof e[e.length-1]=="function"&&cl(e.pop());e=e.map(ol);const t=e.map(il),r=e.length-1,a=new Array(r+1).fill(0),i=[];if(r<0||t.some(fl))return i;for(;;){i.push(a.map((o,c)=>e[c][o]));let f=r;for(;++a[f]===t[f];){if(f===0)return n?i.map(n):i;a[f--]=0}}}function Nf(e,n){let t=0,r,a=0,i=0;if(n===void 0)for(let f of e)f!=null&&(f=+f)>=f&&(r=f-a,a+=r/++t,i+=r*(f-a));else{let f=-1;for(let o of e)(o=n(o,++f,e))!=null&&(o=+o)>=o&&(r=o-a,a+=r/++t,i+=r*(o-a))}if(t>1)return i/(t-1)}function sl(e,n){const t=Nf(e,n);return t&&Math.sqrt(t)}function ll(e,n){return Array.from(n,t=>e[t])}function er(e,...n){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[t]=n;if(t&&t.length!==2||n.length>1){const r=Uint32Array.from(e,(a,i)=>i);return n.length>1?(n=n.map(a=>e.map(a)),r.sort((a,i)=>{for(const f of n){const o=Dt(f[a],f[i]);if(o)return o}})):(t=e.map(t),r.sort((a,i)=>Dt(t[a],t[i]))),ll(e,r)}return e.sort(Uf(t))}function Uf(e=Ct){if(e===Ct)return Dt;if(typeof e!="function")throw new TypeError("compare is not a function");return(n,t)=>{const r=e(n,t);return r||r===0?r:(e(t,t)===0)-(e(n,n)===0)}}function Dt(e,n){return(e==null||!(e>=e))-(n==null||!(n>=n))||(e<n?-1:e>n?1:0)}function dl(e,n){let t,r=-1,a=-1;if(n===void 0)for(const i of e)++a,i!=null&&(t<i||t===void 0&&i>=i)&&(t=i,r=a);else for(let i of e)(i=n(i,++a,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i,r=a);return r}function hl(e,n){let t,r=-1,a=-1;if(n===void 0)for(const i of e)++a,i!=null&&(t>i||t===void 0&&i>=i)&&(t=i,r=a);else for(let i of e)(i=n(i,++a,e))!=null&&(t>i||t===void 0&&i>=i)&&(t=i,r=a);return r}function Rf(e,n,t=0,r=1/0,a){if(n=Math.floor(n),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(e.length-1,r)),!(t<=n&&n<=r))return e;for(a=a===void 0?Dt:Uf(a);r>t;){if(r-t>600){const c=r-t+1,u=n-t+1,s=Math.log(c),h=.5*Math.exp(2*s/3),d=.5*Math.sqrt(s*h*(c-h)/c)*(u-c/2<0?-1:1),l=Math.max(t,Math.floor(n-u*h/c+d)),m=Math.min(r,Math.floor(n+(c-u)*h/c+d));Rf(e,n,l,m,a)}const i=e[n];let f=t,o=r;for(In(e,t,n),a(e[r],i)>0&&In(e,t,r);f<o;){for(In(e,f,o),++f,--o;a(e[f],i)<0;)++f;for(;a(e[o],i)>0;)--o}a(e[t],i)===0?In(e,t,o):(++o,In(e,o,r)),o<=n&&(t=o+1),n<=o&&(r=o-1)}return e}function In(e,n,t){const r=e[n];e[n]=e[t],e[t]=r}function Et(e,n,t){if(e=Float64Array.from(Es(e,t)),!(!(r=e.length)||isNaN(n=+n))){if(n<=0||r<2)return kn(e);if(n>=1)return Pe(e);var r,a=(r-1)*n,i=Math.floor(a),f=Pe(Rf(e,i).subarray(0,i+1)),o=kn(e.subarray(i+1));return f+(o-f)*(a-i)}}function bl(e,n,t=Ls){if(!(!(r=e.length)||isNaN(n=+n))){if(n<=0||r<2)return+t(e[0],0,e);if(n>=1)return+t(e[r-1],r-1,e);var r,a=(r-1)*n,i=Math.floor(a),f=+t(e[i],i,e),o=+t(e[i+1],i+1,e);return f+(o-f)*(a-i)}}function ra(e,n){return Et(e,.5,n)}function ml(e,n){const t=new Fs;if(n===void 0)for(let i of e)i!=null&&i>=i&&t.set(i,(t.get(i)||0)+1);else{let i=-1;for(let f of e)(f=n(f,++i,e))!=null&&f>=f&&t.set(f,(t.get(f)||0)+1)}let r,a=0;for(const[i,f]of t)f>a&&(a=f,r=i);return r}function nr(e,n){let t=0;if(n===void 0)for(let r of e)(r=+r)&&(t+=r);else{let r=-1;for(let a of e)(a=+n(a,++r,e))&&(t+=a)}return t}function Lt(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}const If=Math.PI/180,Of=180/Math.PI,Nt=18,Ff=.96422,qf=1,Wf=.82521,Pf=4/29,mn=6/29,Yf=3*mn*mn,pl=mn*mn*mn;function Bf(e){if(e instanceof $e)return new $e(e.l,e.a,e.b,e.opacity);if(e instanceof Oe)return Hf(e);e instanceof jt||(e=vf(e));var n=Nr(e.r),t=Nr(e.g),r=Nr(e.b),a=Dr((.2225045*n+.7168786*t+.0606169*r)/qf),i,f;return n===t&&t===r?i=f=a:(i=Dr((.4360747*n+.3850649*t+.1430804*r)/Ff),f=Dr((.0139322*n+.0971045*t+.7141733*r)/Wf)),new $e(116*a-16,500*(i-a),200*(a-f),e.opacity)}function aa(e,n,t,r){return arguments.length===1?Bf(e):new $e(e,n,t,r??1)}function $e(e,n,t,r){this.l=+e,this.a=+n,this.b=+t,this.opacity=+r}Ca($e,aa,Aa(Da,{brighter(e){return new $e(this.l+Nt*(e??1),this.a,this.b,this.opacity)},darker(e){return new $e(this.l-Nt*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,n=isNaN(this.a)?e:e+this.a/500,t=isNaN(this.b)?e:e-this.b/200;return n=Ff*Er(n),e=qf*Er(e),t=Wf*Er(t),new jt(Lr(3.1338561*n-1.6168667*e-.4906146*t),Lr(-.9787684*n+1.9161415*e+.033454*t),Lr(.0719453*n-.2289914*e+1.4052427*t),this.opacity)}}));function Dr(e){return e>pl?Math.pow(e,1/3):e/Yf+Pf}function Er(e){return e>mn?e*e*e:Yf*(e-Pf)}function Lr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Nr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function gl(e){if(e instanceof Oe)return new Oe(e.h,e.c,e.l,e.opacity);if(e instanceof $e||(e=Bf(e)),e.a===0&&e.b===0)return new Oe(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var n=Math.atan2(e.b,e.a)*Of;return new Oe(n<0?n+360:n,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ia(e,n,t,r){return arguments.length===1?gl(e):new Oe(e,n,t,r??1)}function Oe(e,n,t,r){this.h=+e,this.c=+n,this.l=+t,this.opacity=+r}function Hf(e){if(isNaN(e.h))return new $e(e.l,0,0,e.opacity);var n=e.h*If;return new $e(e.l,Math.cos(n)*e.c,Math.sin(n)*e.c,e.opacity)}Ca(Oe,ia,Aa(Da,{brighter(e){return new Oe(this.h,this.c,this.l+Nt*(e??1),this.opacity)},darker(e){return new Oe(this.h,this.c,this.l-Nt*(e??1),this.opacity)},rgb(){return Hf(this).rgb()}}));var zf=-.14861,Oa=1.78277,Fa=-.29227,tr=-.90649,Qn=1.97294,yi=Qn*tr,wi=Qn*Oa,vi=Oa*Fa-tr*zf;function yl(e){if(e instanceof Ke)return new Ke(e.h,e.s,e.l,e.opacity);e instanceof jt||(e=vf(e));var n=e.r/255,t=e.g/255,r=e.b/255,a=(vi*r+yi*n-wi*t)/(vi+yi-wi),i=r-a,f=(Qn*(t-a)-Fa*i)/tr,o=Math.sqrt(f*f+i*i)/(Qn*a*(1-a)),c=o?Math.atan2(f,i)*Of-120:NaN;return new Ke(c<0?c+360:c,o,a,e.opacity)}function Se(e,n,t,r){return arguments.length===1?yl(e):new Ke(e,n,t,r??1)}function Ke(e,n,t,r){this.h=+e,this.s=+n,this.l=+t,this.opacity=+r}Ca(Ke,Se,Aa(Da,{brighter(e){return e=e==null?si:Math.pow(si,e),new Ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?li:Math.pow(li,e),new Ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*If,n=+this.l,t=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(e),a=Math.sin(e);return new jt(255*(n+t*(zf*r+Oa*a)),255*(n+t*(Fa*r+tr*a)),255*(n+t*(Qn*r)),this.opacity)}}));function wl(e){return function(n,t){var r=e((n=di(n)).h,(t=di(t)).h),a=ae(n.s,t.s),i=ae(n.l,t.l),f=ae(n.opacity,t.opacity);return function(o){return n.h=r(o),n.s=a(o),n.l=i(o),n.opacity=f(o),n+""}}}const vl=wl(Ea);function Ml(e,n){var t=ae((e=aa(e)).l,(n=aa(n)).l),r=ae(e.a,n.a),a=ae(e.b,n.b),i=ae(e.opacity,n.opacity);return function(f){return e.l=t(f),e.a=r(f),e.b=a(f),e.opacity=i(f),e+""}}function Tl(e){return function(n,t){var r=e((n=ia(n)).h,(t=ia(t)).h),a=ae(n.c,t.c),i=ae(n.l,t.l),f=ae(n.opacity,t.opacity);return function(o){return n.h=r(o),n.c=a(o),n.l=i(o),n.opacity=f(o),n+""}}}const $l=Tl(Ea);function _f(e){return function n(t){t=+t;function r(a,i){var f=e((a=Se(a)).h,(i=Se(i)).h),o=ae(a.s,i.s),c=ae(a.l,i.l),u=ae(a.opacity,i.opacity);return function(s){return a.h=f(s),a.s=o(s),a.l=c(Math.pow(s,t)),a.opacity=u(s),a+""}}return r.gamma=n,r}(1)}_f(Ea);var qa=_f(ae);function Wa(e,n){n===void 0&&(n=e,e=Lf);for(var t=0,r=n.length-1,a=n[0],i=new Array(r<0?0:r);t<r;)i[t]=e(a,a=n[++t]);return function(f){var o=Math.max(0,Math.min(r-1,Math.floor(f*=r)));return i[o](f-o)}}function ye(e,n){for(var t=new Array(n),r=0;r<n;++r)t[r]=e(r/(n-1));return t}var Ur=new wn,fa=new wn,jf,Vf,oa,ca,Ve={point:Qe,lineStart:Qe,lineEnd:Qe,polygonStart:function(){Ve.lineStart=xl,Ve.lineEnd=Cl},polygonEnd:function(){Ve.lineStart=Ve.lineEnd=Ve.point=Qe,Ur.add(Xe(fa)),fa=new wn},result:function(){var e=Ur/2;return Ur=new wn,e}};function xl(){Ve.point=Sl}function Sl(e,n){Ve.point=Zf,jf=oa=e,Vf=ca=n}function Zf(e,n){fa.add(ca*e-oa*n),oa=e,ca=n}function Cl(){Zf(jf,Vf)}const Mi=Ve;var ua=0,sa=0,Yn=0,Ut=0,Rt=0,bn=0,la=0,da=0,Bn=0,Gf,kf,ve,Me,me={point:Je,lineStart:Ti,lineEnd:$i,polygonStart:function(){me.lineStart=El,me.lineEnd=Ll},polygonEnd:function(){me.point=Je,me.lineStart=Ti,me.lineEnd=$i},result:function(){var e=Bn?[la/Bn,da/Bn]:bn?[Ut/bn,Rt/bn]:Yn?[ua/Yn,sa/Yn]:[NaN,NaN];return ua=sa=Yn=Ut=Rt=bn=la=da=Bn=0,e}};function Je(e,n){ua+=e,sa+=n,++Yn}function Ti(){me.point=Al}function Al(e,n){me.point=Dl,Je(ve=e,Me=n)}function Dl(e,n){var t=e-ve,r=n-Me,a=xe(t*t+r*r);Ut+=a*(ve+e)/2,Rt+=a*(Me+n)/2,bn+=a,Je(ve=e,Me=n)}function $i(){me.point=Je}function El(){me.point=Nl}function Ll(){Qf(Gf,kf)}function Nl(e,n){me.point=Qf,Je(Gf=ve=e,kf=Me=n)}function Qf(e,n){var t=e-ve,r=n-Me,a=xe(t*t+r*r);Ut+=a*(ve+e)/2,Rt+=a*(Me+n)/2,bn+=a,a=Me*e-ve*n,la+=a*(ve+e),da+=a*(Me+n),Bn+=a*3,Je(ve=e,Me=n)}const xi=me;function Kf(e){this._context=e}Kf.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,n){switch(this._point){case 0:{this._context.moveTo(e,n),this._point=1;break}case 1:{this._context.lineTo(e,n);break}default:{this._context.moveTo(e+this._radius,n),this._context.arc(e,n,this._radius,0,Ps);break}}},result:Qe};var ha=new wn,Rr,Xf,Jf,Hn,zn,It={point:Qe,lineStart:function(){It.point=Ul},lineEnd:function(){Rr&&eo(Xf,Jf),It.point=Qe},polygonStart:function(){Rr=!0},polygonEnd:function(){Rr=null},result:function(){var e=+ha;return ha=new wn,e}};function Ul(e,n){It.point=eo,Xf=Hn=e,Jf=zn=n}function eo(e,n){Hn-=e,zn-=n,ha.add(xe(Hn*Hn+zn*zn)),Hn=e,zn=n}const Si=It;let Ci,Ot,Ai,Di;class Ei{constructor(n){this._append=n==null?no:Rl(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:{this._append`M${n},${t}`,this._point=1;break}case 1:{this._append`L${n},${t}`;break}default:{if(this._append`M${n},${t}`,this._radius!==Ai||this._append!==Ot){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ai=r,Ot=this._append,Di=this._,this._=a}this._+=Di;break}}}result(){const n=this._;return this._="",n.length?n:null}}function no(e){let n=1;this._+=e[0];for(const t=e.length;n<t;++n)this._+=arguments[n]+e[n]}function Rl(e){const n=Math.floor(e);if(!(n>=0))throw new RangeError(`invalid digits: ${e}`);if(n>15)return no;if(n!==Ci){const t=10**n;Ci=n,Ot=function(a){let i=1;this._+=a[0];for(const f=a.length;i<f;++i)this._+=Math.round(arguments[i]*t)/t+a[i]}}return Ot}function to(e,n){let t=3,r=4.5,a,i;function f(o){return o&&(typeof r=="function"&&i.pointRadius(+r.apply(this,arguments)),Rn(o,a(i))),i.result()}return f.area=function(o){return Rn(o,a(Mi)),Mi.result()},f.measure=function(o){return Rn(o,a(Si)),Si.result()},f.bounds=function(o){return Rn(o,a(mi)),mi.result()},f.centroid=function(o){return Rn(o,a(xi)),xi.result()},f.projection=function(o){return arguments.length?(a=o==null?(e=null,Ys):(e=o).stream,f):e},f.context=function(o){return arguments.length?(i=o==null?(n=null,new Ei(t)):new Kf(n=o),typeof r!="function"&&i.pointRadius(r),f):n},f.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(i.pointRadius(+o),+o),f):r},f.digits=function(o){if(!arguments.length)return t;if(o==null)t=null;else{const c=Math.floor(o);if(!(c>=0))throw new RangeError(`invalid digits: ${o}`);t=c}return n===null&&(i=new Ei(t)),f},f.projection(e).digits(t).context(n)}function Pa(e){var n=0,t=Gt/3,r=Bs(e),a=r(n,t);return a.parallels=function(i){return arguments.length?r(n=i[0]*pi,t=i[1]*pi):[n*gi,t*gi]},a}function Il(e){var n=Q(e);function t(r,a){return[r*n,j(a)/n]}return t.invert=function(r,a){return[r/n,rn(a*n)]},t}function Ol(e,n){var t=j(e),r=(t+j(n))/2;if(Xe(r)<ne)return Il(e);var a=1+t*(2*r-t),i=xe(a)/r;function f(o,c){var u=xe(a-2*r*j(c))/r;return[u*j(o*=r),i-u*Q(o)]}return f.invert=function(o,c){var u=i-c,s=kt(o,Xe(u))*pe(u);return u*r<0&&(s-=Gt*pe(o)*pe(u)),[s/r,rn((a-(o*o+u*u)*r*r)/(2*r))]},f}function Ft(){return Pa(Ol).scale(155.424).center([0,33.6442])}function ro(){return Ft().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Fl(e){var n=e.length;return{point:function(t,r){for(var a=-1;++a<n;)e[a].point(t,r)},sphere:function(){for(var t=-1;++t<n;)e[t].sphere()},lineStart:function(){for(var t=-1;++t<n;)e[t].lineStart()},lineEnd:function(){for(var t=-1;++t<n;)e[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<n;)e[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<n;)e[t].polygonEnd()}}}function ql(){var e,n,t=ro(),r,a=Ft().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,f=Ft().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,c,u={point:function(d,l){c=[d,l]}};function s(d){var l=d[0],m=d[1];return c=null,r.point(l,m),c||(i.point(l,m),c)||(o.point(l,m),c)}s.invert=function(d){var l=t.scale(),m=t.translate(),b=(d[0]-m[0])/l,p=(d[1]-m[1])/l;return(p>=.12&&p<.234&&b>=-.425&&b<-.214?a:p>=.166&&p<.234&&b>=-.214&&b<-.115?f:t).invert(d)},s.stream=function(d){return e&&n===d?e:e=Fl([t.stream(n=d),a.stream(d),f.stream(d)])},s.precision=function(d){return arguments.length?(t.precision(d),a.precision(d),f.precision(d),h()):t.precision()},s.scale=function(d){return arguments.length?(t.scale(d),a.scale(d*.35),f.scale(d),s.translate(t.translate())):t.scale()},s.translate=function(d){if(!arguments.length)return t.translate();var l=t.scale(),m=+d[0],b=+d[1];return r=t.translate(d).clipExtent([[m-.455*l,b-.238*l],[m+.455*l,b+.238*l]]).stream(u),i=a.translate([m-.307*l,b+.201*l]).clipExtent([[m-.425*l+ne,b+.12*l+ne],[m-.214*l-ne,b+.234*l-ne]]).stream(u),o=f.translate([m-.205*l,b+.212*l]).clipExtent([[m-.214*l+ne,b+.166*l+ne],[m-.115*l-ne,b+.234*l-ne]]).stream(u),h()},s.fitExtent=function(d,l){return Hs(s,d,l)},s.fitSize=function(d,l){return zs(s,d,l)},s.fitWidth=function(d,l){return _s(s,d,l)},s.fitHeight=function(d,l){return js(s,d,l)};function h(){return e=n=null,s}return s.scale(1070)}function ao(e){return function(n,t){var r=Q(n),a=Q(t),i=e(r*a);return i===1/0?[2,0]:[i*a*j(n),i*j(t)]}}function it(e){return function(n,t){var r=xe(n*n+t*t),a=e(r),i=j(a),f=Q(a);return[kt(n*i,r*f),rn(r&&t*i/r)]}}var io=ao(function(e){return xe(2/(1+e))});io.invert=it(function(e){return 2*rn(e/2)});function Wl(){return an(io).scale(124.75).clipAngle(180-.001)}var fo=ao(function(e){return(e=Vs(e))&&e/j(e)});fo.invert=it(function(e){return e});function Pl(){return an(fo).scale(79.4188).clipAngle(180-.001)}function bt(e){return Cf((je+e)/2)}function Yl(e,n){var t=Q(e),r=e===n?j(e):ea(t/Q(n))/ea(bt(n)/bt(e)),a=t*Ar(bt(e),r)/r;if(!r)return Zs;function i(f,o){a>0?o<-je+ne&&(o=-je+ne):o>je-ne&&(o=je-ne);var c=a/Ar(bt(o),r);return[c*j(r*f),a-c*Q(r*f)]}return i.invert=function(f,o){var c=a-o,u=pe(r)*xe(f*f+c*c),s=kt(f,Xe(c))*pe(c);return c*r<0&&(s-=Gt*pe(f)*pe(c)),[s/r,2*Qt(Ar(a/u,1/r))-je]},i}function Bl(){return Pa(Yl).scale(109.5).parallels([30,30])}function qt(e,n){return[e,n]}qt.invert=qt;function Hl(){return an(qt).scale(152.63)}function zl(e,n){var t=Q(e),r=e===n?j(e):(t-Q(n))/(n-e),a=t/r+e;if(Xe(r)<ne)return qt;function i(f,o){var c=a-o,u=r*f;return[c*j(u),a-c*Q(u)]}return i.invert=function(f,o){var c=a-o,u=kt(f,Xe(c))*pe(c);return c*r<0&&(u-=Gt*pe(f)*pe(c)),[u/r,a-pe(r)*xe(f*f+c*c)]},i}function _l(){return Pa(zl).scale(131.154).center([0,13.9389])}var jn=1.340264,Vn=-.081106,Zn=893e-6,Gn=.003796,Wt=xe(3)/2,jl=12;function oo(e,n){var t=rn(Wt*j(n)),r=t*t,a=r*r*r;return[e*Q(t)/(Wt*(jn+3*Vn*r+a*(7*Zn+9*Gn*r))),t*(jn+Vn*r+a*(Zn+Gn*r))]}oo.invert=function(e,n){for(var t=n,r=t*t,a=r*r*r,i=0,f,o,c;i<jl&&(o=t*(jn+Vn*r+a*(Zn+Gn*r))-n,c=jn+3*Vn*r+a*(7*Zn+9*Gn*r),t-=f=o/c,r=t*t,a=r*r*r,!(Xe(f)<Gs));++i);return[Wt*e*(jn+3*Vn*r+a*(7*Zn+9*Gn*r))/Q(t),rn(j(t)/Wt)]};function Vl(){return an(oo).scale(177.158)}function co(e,n){var t=Q(n),r=Q(e)*t;return[t*j(e)/r,j(n)/r]}co.invert=it(Qt);function Zl(){return an(co).scale(144.049).clipAngle(60)}function uo(e,n){return[Q(n)*j(e),j(n)]}uo.invert=it(rn);function Gl(){return an(uo).scale(249.5).clipAngle(90+ne)}function so(e,n){var t=Q(n),r=1+Q(e)*t;return[t*j(e)/r,j(n)/r]}so.invert=it(function(e){return 2*Qt(e)});function kl(){return an(so).scale(250).clipAngle(142)}function lo(e,n){return[ea(Cf((je+n)/2)),-e]}lo.invert=function(e,n){return[-n,2*Qt(Qs(e))-je]};function Ql(){var e=ks(lo),n=e.center,t=e.rotate;return e.center=function(r){return arguments.length?n([-r[1],r[0]]):(r=n(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?t([r[0],r[1],r.length>2?r[2]+90:90]):(r=t(),[r[0],r[1],r[2]-90])},t([0,0,90]).scale(159.155)}function ho(e){var n;function t(r){return r==null||isNaN(r=+r)?n:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(e=Array.from(r,hi),t):e.slice()},t.unknown=function(r){return arguments.length?(n=r,t):n},t.copy=function(){return ho(e).unknown(n)},e=arguments.length?Array.from(e,hi):[0,1],Xt(t)}function Li(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function Ni(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function bo(e){var n=1,t=e(Li(n),Ni(n));return t.constant=function(r){return arguments.length?e(Li(n=+r),Ni(n)):n},Xt(t)}function mo(){var e=bo(Mf());return e.copy=function(){return Na(e,mo()).constant(e.constant())},Cn.apply(e,arguments)}function Ui(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function Kl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Xl(e){return e<0?-e*e:e*e}function po(e){var n=e(hn,hn),t=1;function r(){return t===1?e(hn,hn):t===.5?e(Kl,Xl):e(Ui(t),Ui(1/t))}return n.exponent=function(a){return arguments.length?(t=+a,r()):t},Xt(n)}function go(){var e=po(Mf());return e.copy=function(){return Na(e,go()).exponent(e.exponent())},Cn.apply(e,arguments),e}function yo(){var e=[],n=[],t=[],r;function a(){var f=0,o=Math.max(1,n.length);for(t=new Array(o-1);++f<o;)t[f-1]=bl(e,f/o);return i}function i(f){return f==null||isNaN(f=+f)?r:n[Tf(t,f)]}return i.invertExtent=function(f){var o=n.indexOf(f);return o<0?[NaN,NaN]:[o>0?t[o-1]:e[0],o<t.length?t[o]:e[e.length-1]]},i.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let o of f)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ct),a()},i.range=function(f){return arguments.length?(n=Array.from(f),a()):n.slice()},i.unknown=function(f){return arguments.length?(r=f,i):r},i.quantiles=function(){return t.slice()},i.copy=function(){return yo().domain(e).range(n).unknown(r)},Cn.apply(i,arguments)}function wo(){var e=[.5],n=[0,1],t,r=1;function a(i){return i!=null&&i<=i?n[Tf(e,i,0,r)]:t}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,n.length-1),a):e.slice()},a.range=function(i){return arguments.length?(n=Array.from(i),r=Math.min(e.length,n.length-1),a):n.slice()},a.invertExtent=function(i){var f=n.indexOf(i);return[e[f-1],e[f]]},a.unknown=function(i){return arguments.length?(t=i,a):t},a.copy=function(){return wo().domain(e).range(n).unknown(t)},Cn.apply(a,arguments)}const Ir=new Date,Or=new Date;function G(e,n,t,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),a.round=i=>{const f=a(i),o=a.ceil(i);return i-f<o-i?f:o},a.offset=(i,f)=>(n(i=new Date(+i),f==null?1:Math.floor(f)),i),a.range=(i,f,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<f)||!(o>0))return c;let u;do c.push(u=new Date(+i)),n(i,o),e(i);while(u<i&&i<f);return c},a.filter=i=>G(f=>{if(f>=f)for(;e(f),!i(f);)f.setTime(f-1)},(f,o)=>{if(f>=f)if(o<0)for(;++o<=0;)for(;n(f,-1),!i(f););else for(;--o>=0;)for(;n(f,1),!i(f););}),t&&(a.count=(i,f)=>(Ir.setTime(+i),Or.setTime(+f),e(Ir),e(Or),Math.floor(t(Ir,Or))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?f=>r(f)%i===0:f=>a.count(0,f)%i===0):a)),a}const Pt=G(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);Pt.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?G(n=>{n.setTime(Math.floor(n/e)*e)},(n,t)=>{n.setTime(+n+t*e)},(n,t)=>(t-n)/e):Pt);Pt.range;const Fe=1e3,de=Fe*60,qe=de*60,Ye=qe*24,Ya=Ye*7,Ri=Ye*30,Fr=Ye*365,We=G(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*Fe)},(e,n)=>(n-e)/Fe,e=>e.getUTCSeconds());We.range;const rr=G(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fe)},(e,n)=>{e.setTime(+e+n*de)},(e,n)=>(n-e)/de,e=>e.getMinutes());rr.range;const ar=G(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*de)},(e,n)=>(n-e)/de,e=>e.getUTCMinutes());ar.range;const ir=G(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fe-e.getMinutes()*de)},(e,n)=>{e.setTime(+e+n*qe)},(e,n)=>(n-e)/qe,e=>e.getHours());ir.range;const fr=G(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*qe)},(e,n)=>(n-e)/qe,e=>e.getUTCHours());fr.range;const An=G(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*de)/Ye,e=>e.getDate()-1);An.range;const ft=G(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Ye,e=>e.getUTCDate()-1);ft.range;const vo=G(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/Ye,e=>Math.floor(e/Ye));vo.range;function fn(e){return G(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,t)=>{n.setDate(n.getDate()+t*7)},(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*de)/Ya)}const Mn=fn(0),Kn=fn(1),Mo=fn(2),To=fn(3),en=fn(4),$o=fn(5),xo=fn(6);Mn.range;Kn.range;Mo.range;To.range;en.range;$o.range;xo.range;function on(e){return G(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t*7)},(n,t)=>(t-n)/Ya)}const Tn=on(0),Xn=on(1),So=on(2),Co=on(3),nn=on(4),Ao=on(5),Do=on(6);Tn.range;Xn.range;So.range;Co.range;nn.range;Ao.range;Do.range;const pn=G(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pn.range;const gn=G(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gn.range;const Ce=G(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ce.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:G(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t*e)});Ce.range;const Ae=G(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ae.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:G(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t*e)});Ae.range;function Eo(e,n,t,r,a,i){const f=[[We,1,Fe],[We,5,5*Fe],[We,15,15*Fe],[We,30,30*Fe],[i,1,de],[i,5,5*de],[i,15,15*de],[i,30,30*de],[a,1,qe],[a,3,3*qe],[a,6,6*qe],[a,12,12*qe],[r,1,Ye],[r,2,2*Ye],[t,1,Ya],[n,1,Ri],[n,3,3*Ri],[e,1,Fr]];function o(u,s,h){const d=s<u;d&&([u,s]=[s,u]);const l=h&&typeof h.range=="function"?h:c(u,s,h),m=l?l.range(u,+s+1):[];return d?m.reverse():m}function c(u,s,h){const d=Math.abs(s-u)/h,l=Ns(([,,p])=>p).right(f,d);if(l===f.length)return e.every(bi(u/Fr,s/Fr,h));if(l===0)return Pt.every(Math.max(bi(u,s,h),1));const[m,b]=f[d/f[l-1][2]<f[l][2]/d?l-1:l];return m.every(b)}return[o,c]}const[Jl,ed]=Eo(Ae,gn,Tn,vo,fr,ar),[nd,td]=Eo(Ce,pn,Mn,An,ir,rr);function qr(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wr(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function On(e,n,t){return{y:e,m:n,d:t,H:0,M:0,S:0,L:0}}function rd(e){var n=e.dateTime,t=e.date,r=e.time,a=e.periods,i=e.days,f=e.shortDays,o=e.months,c=e.shortMonths,u=Fn(a),s=qn(a),h=Fn(i),d=qn(i),l=Fn(f),m=qn(f),b=Fn(o),p=qn(o),y=Fn(c),M=qn(c),w={a:O,A:V,b:_,B,c:null,d:Pi,e:Pi,f:Cd,g:Fd,G:Wd,H:$d,I:xd,j:Sd,L:Lo,m:Ad,M:Dd,p:X,q:sn,Q:Hi,s:zi,S:Ed,u:Ld,U:Nd,V:Ud,w:Rd,W:Id,x:null,X:null,y:Od,Y:qd,Z:Pd,"%":Bi},g={a:Tr,A:$r,b:xr,B:Sr,c:null,d:Yi,e:Yi,f:zd,g:Jd,G:n0,H:Yd,I:Bd,j:Hd,L:Uo,m:_d,M:jd,p:Cr,q:Ss,Q:Hi,s:zi,S:Vd,u:Zd,U:Gd,V:kd,w:Qd,W:Kd,x:null,X:null,y:Xd,Y:e0,Z:t0,"%":Bi},T={a:z,A:te,b:W,B:C,c:x,d:qi,e:qi,f:wd,g:Fi,G:Oi,H:Wi,I:Wi,j:md,L:yd,m:bd,M:pd,p:U,q:hd,Q:Md,s:Td,S:gd,u:cd,U:ud,V:sd,w:od,W:ld,x:D,X:E,y:Fi,Y:Oi,Z:dd,"%":vd};w.x=$(t,w),w.X=$(r,w),w.c=$(n,w),g.x=$(t,g),g.X=$(r,g),g.c=$(n,g);function $(S,R){return function(F){var v=[],re=-1,P=0,ie=S.length,fe,ke,ui;for(F instanceof Date||(F=new Date(+F));++re<ie;)S.charCodeAt(re)===37&&(v.push(S.slice(P,re)),(ke=Ii[fe=S.charAt(++re)])!=null?fe=S.charAt(++re):ke=fe==="e"?" ":"0",(ui=R[fe])&&(fe=ui(F,ke)),v.push(fe),P=re+1);return v.push(S.slice(P,re)),v.join("")}}function A(S,R){return function(F){var v=On(1900,void 0,1),re=I(v,S,F+="",0),P,ie;if(re!=F.length)return null;if("Q"in v)return new Date(v.Q);if("s"in v)return new Date(v.s*1e3+("L"in v?v.L:0));if(R&&!("Z"in v)&&(v.Z=0),"p"in v&&(v.H=v.H%12+v.p*12),v.m===void 0&&(v.m="q"in v?v.q:0),"V"in v){if(v.V<1||v.V>53)return null;"w"in v||(v.w=1),"Z"in v?(P=Wr(On(v.y,0,1)),ie=P.getUTCDay(),P=ie>4||ie===0?Xn.ceil(P):Xn(P),P=ft.offset(P,(v.V-1)*7),v.y=P.getUTCFullYear(),v.m=P.getUTCMonth(),v.d=P.getUTCDate()+(v.w+6)%7):(P=qr(On(v.y,0,1)),ie=P.getDay(),P=ie>4||ie===0?Kn.ceil(P):Kn(P),P=An.offset(P,(v.V-1)*7),v.y=P.getFullYear(),v.m=P.getMonth(),v.d=P.getDate()+(v.w+6)%7)}else("W"in v||"U"in v)&&("w"in v||(v.w="u"in v?v.u%7:"W"in v?1:0),ie="Z"in v?Wr(On(v.y,0,1)).getUTCDay():qr(On(v.y,0,1)).getDay(),v.m=0,v.d="W"in v?(v.w+6)%7+v.W*7-(ie+5)%7:v.w+v.U*7-(ie+6)%7);return"Z"in v?(v.H+=v.Z/100|0,v.M+=v.Z%100,Wr(v)):qr(v)}}function I(S,R,F,v){for(var re=0,P=R.length,ie=F.length,fe,ke;re<P;){if(v>=ie)return-1;if(fe=R.charCodeAt(re++),fe===37){if(fe=R.charAt(re++),ke=T[fe in Ii?R.charAt(re++):fe],!ke||(v=ke(S,F,v))<0)return-1}else if(fe!=F.charCodeAt(v++))return-1}return v}function U(S,R,F){var v=u.exec(R.slice(F));return v?(S.p=s.get(v[0].toLowerCase()),F+v[0].length):-1}function z(S,R,F){var v=l.exec(R.slice(F));return v?(S.w=m.get(v[0].toLowerCase()),F+v[0].length):-1}function te(S,R,F){var v=h.exec(R.slice(F));return v?(S.w=d.get(v[0].toLowerCase()),F+v[0].length):-1}function W(S,R,F){var v=y.exec(R.slice(F));return v?(S.m=M.get(v[0].toLowerCase()),F+v[0].length):-1}function C(S,R,F){var v=b.exec(R.slice(F));return v?(S.m=p.get(v[0].toLowerCase()),F+v[0].length):-1}function x(S,R,F){return I(S,n,R,F)}function D(S,R,F){return I(S,t,R,F)}function E(S,R,F){return I(S,r,R,F)}function O(S){return f[S.getDay()]}function V(S){return i[S.getDay()]}function _(S){return c[S.getMonth()]}function B(S){return o[S.getMonth()]}function X(S){return a[+(S.getHours()>=12)]}function sn(S){return 1+~~(S.getMonth()/3)}function Tr(S){return f[S.getUTCDay()]}function $r(S){return i[S.getUTCDay()]}function xr(S){return c[S.getUTCMonth()]}function Sr(S){return o[S.getUTCMonth()]}function Cr(S){return a[+(S.getUTCHours()>=12)]}function Ss(S){return 1+~~(S.getUTCMonth()/3)}return{format:function(S){var R=$(S+="",w);return R.toString=function(){return S},R},parse:function(S){var R=A(S+="",!1);return R.toString=function(){return S},R},utcFormat:function(S){var R=$(S+="",g);return R.toString=function(){return S},R},utcParse:function(S){var R=A(S+="",!0);return R.toString=function(){return S},R}}}var Ii={"-":"",_:" ",0:"0"},K=/^\s*\d+/,ad=/^%/,id=/[\\^$*+?|[\]().{}]/g;function q(e,n,t){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<t?new Array(t-i+1).join(n)+a:a)}function fd(e){return e.replace(id,"\\$&")}function Fn(e){return new RegExp("^(?:"+e.map(fd).join("|")+")","i")}function qn(e){return new Map(e.map((n,t)=>[n.toLowerCase(),t]))}function od(e,n,t){var r=K.exec(n.slice(t,t+1));return r?(e.w=+r[0],t+r[0].length):-1}function cd(e,n,t){var r=K.exec(n.slice(t,t+1));return r?(e.u=+r[0],t+r[0].length):-1}function ud(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.U=+r[0],t+r[0].length):-1}function sd(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.V=+r[0],t+r[0].length):-1}function ld(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.W=+r[0],t+r[0].length):-1}function Oi(e,n,t){var r=K.exec(n.slice(t,t+4));return r?(e.y=+r[0],t+r[0].length):-1}function Fi(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function dd(e,n,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(t,t+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function hd(e,n,t){var r=K.exec(n.slice(t,t+1));return r?(e.q=r[0]*3-3,t+r[0].length):-1}function bd(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.m=r[0]-1,t+r[0].length):-1}function qi(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.d=+r[0],t+r[0].length):-1}function md(e,n,t){var r=K.exec(n.slice(t,t+3));return r?(e.m=0,e.d=+r[0],t+r[0].length):-1}function Wi(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.H=+r[0],t+r[0].length):-1}function pd(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.M=+r[0],t+r[0].length):-1}function gd(e,n,t){var r=K.exec(n.slice(t,t+2));return r?(e.S=+r[0],t+r[0].length):-1}function yd(e,n,t){var r=K.exec(n.slice(t,t+3));return r?(e.L=+r[0],t+r[0].length):-1}function wd(e,n,t){var r=K.exec(n.slice(t,t+6));return r?(e.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function vd(e,n,t){var r=ad.exec(n.slice(t,t+1));return r?t+r[0].length:-1}function Md(e,n,t){var r=K.exec(n.slice(t));return r?(e.Q=+r[0],t+r[0].length):-1}function Td(e,n,t){var r=K.exec(n.slice(t));return r?(e.s=+r[0],t+r[0].length):-1}function Pi(e,n){return q(e.getDate(),n,2)}function $d(e,n){return q(e.getHours(),n,2)}function xd(e,n){return q(e.getHours()%12||12,n,2)}function Sd(e,n){return q(1+An.count(Ce(e),e),n,3)}function Lo(e,n){return q(e.getMilliseconds(),n,3)}function Cd(e,n){return Lo(e,n)+"000"}function Ad(e,n){return q(e.getMonth()+1,n,2)}function Dd(e,n){return q(e.getMinutes(),n,2)}function Ed(e,n){return q(e.getSeconds(),n,2)}function Ld(e){var n=e.getDay();return n===0?7:n}function Nd(e,n){return q(Mn.count(Ce(e)-1,e),n,2)}function No(e){var n=e.getDay();return n>=4||n===0?en(e):en.ceil(e)}function Ud(e,n){return e=No(e),q(en.count(Ce(e),e)+(Ce(e).getDay()===4),n,2)}function Rd(e){return e.getDay()}function Id(e,n){return q(Kn.count(Ce(e)-1,e),n,2)}function Od(e,n){return q(e.getFullYear()%100,n,2)}function Fd(e,n){return e=No(e),q(e.getFullYear()%100,n,2)}function qd(e,n){return q(e.getFullYear()%1e4,n,4)}function Wd(e,n){var t=e.getDay();return e=t>=4||t===0?en(e):en.ceil(e),q(e.getFullYear()%1e4,n,4)}function Pd(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+q(n/60|0,"0",2)+q(n%60,"0",2)}function Yi(e,n){return q(e.getUTCDate(),n,2)}function Yd(e,n){return q(e.getUTCHours(),n,2)}function Bd(e,n){return q(e.getUTCHours()%12||12,n,2)}function Hd(e,n){return q(1+ft.count(Ae(e),e),n,3)}function Uo(e,n){return q(e.getUTCMilliseconds(),n,3)}function zd(e,n){return Uo(e,n)+"000"}function _d(e,n){return q(e.getUTCMonth()+1,n,2)}function jd(e,n){return q(e.getUTCMinutes(),n,2)}function Vd(e,n){return q(e.getUTCSeconds(),n,2)}function Zd(e){var n=e.getUTCDay();return n===0?7:n}function Gd(e,n){return q(Tn.count(Ae(e)-1,e),n,2)}function Ro(e){var n=e.getUTCDay();return n>=4||n===0?nn(e):nn.ceil(e)}function kd(e,n){return e=Ro(e),q(nn.count(Ae(e),e)+(Ae(e).getUTCDay()===4),n,2)}function Qd(e){return e.getUTCDay()}function Kd(e,n){return q(Xn.count(Ae(e)-1,e),n,2)}function Xd(e,n){return q(e.getUTCFullYear()%100,n,2)}function Jd(e,n){return e=Ro(e),q(e.getUTCFullYear()%100,n,2)}function e0(e,n){return q(e.getUTCFullYear()%1e4,n,4)}function n0(e,n){var t=e.getUTCDay();return e=t>=4||t===0?nn(e):nn.ceil(e),q(e.getUTCFullYear()%1e4,n,4)}function t0(){return"+0000"}function Bi(){return"%"}function Hi(e){return+e}function zi(e){return Math.floor(+e/1e3)}var ln,Io,or;r0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function r0(e){return ln=rd(e),Io=ln.format,ln.parse,or=ln.utcFormat,ln.utcParse,ln}function a0(e){return new Date(e)}function i0(e){return e instanceof Date?+e:+new Date(+e)}function Ba(e,n,t,r,a,i,f,o,c,u){var s=Us(),h=s.invert,d=s.domain,l=u(".%L"),m=u(":%S"),b=u("%I:%M"),p=u("%I %p"),y=u("%a %d"),M=u("%b %d"),w=u("%B"),g=u("%Y");function T($){return(c($)<$?l:o($)<$?m:f($)<$?b:i($)<$?p:r($)<$?a($)<$?y:M:t($)<$?w:g)($)}return s.invert=function($){return new Date(h($))},s.domain=function($){return arguments.length?d(Array.from($,i0)):d().map(a0)},s.ticks=function($){var A=d();return e(A[0],A[A.length-1],$??10)},s.tickFormat=function($,A){return A==null?T:u(A)},s.nice=function($){var A=d();return(!$||typeof $.range!="function")&&($=n(A[0],A[A.length-1],$??10)),$?d(nl(A,$)):s},s.copy=function(){return Na(s,Ba(e,n,t,r,a,i,f,o,c,u))},s}function f0(){return Cn.apply(Ba(nd,td,Ce,pn,Mn,An,ir,rr,We,Io).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function o0(){return Cn.apply(Ba(Jl,ed,Ae,gn,Tn,ft,fr,ar,We,or).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cr(){var e=0,n=.5,t=1,r=1,a,i,f,o,c,u=hn,s,h=!1,d;function l(b){return isNaN(b=+b)?d:(b=.5+((b=+s(b))-i)*(r*b<r*i?o:c),u(h?Math.max(0,Math.min(1,b)):b))}l.domain=function(b){return arguments.length?([e,n,t]=b,a=s(e=+e),i=s(n=+n),f=s(t=+t),o=a===i?0:.5/(i-a),c=i===f?0:.5/(f-i),r=i<a?-1:1,l):[e,n,t]},l.clamp=function(b){return arguments.length?(h=!!b,l):h},l.interpolator=function(b){return arguments.length?(u=b,l):u};function m(b){return function(p){var y,M,w;return arguments.length?([y,M,w]=p,u=Wa(b,[y,M,w]),l):[u(0),u(.5),u(1)]}}return l.range=m(Lf),l.rangeRound=m($f),l.unknown=function(b){return arguments.length?(d=b,l):d},function(b){return s=b,a=b(e),i=b(n),f=b(t),o=a===i?0:.5/(i-a),c=i===f?0:.5/(f-i),r=i<a?-1:1,l}}function Oo(){var e=Xt(cr()(hn));return e.copy=function(){return Kt(e,Oo())},Jt.apply(e,arguments)}function Fo(){var e=tl(cr()).domain([.1,1,10]);return e.copy=function(){return Kt(e,Fo()).base(e.base())},Jt.apply(e,arguments)}function qo(){var e=bo(cr());return e.copy=function(){return Kt(e,qo()).constant(e.constant())},Jt.apply(e,arguments)}function Wo(){var e=po(cr());return e.copy=function(){return Kt(e,Wo()).exponent(e.exponent())},Jt.apply(e,arguments)}const c0=N("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),u0=N("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),s0=N("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),l0=N("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),d0=N("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h0=N("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),b0=N("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),m0=N("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),p0=N("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var Po=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(N);const Yo=Y(Po);var Bo=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(N);const Ho=Y(Bo);var zo=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(N);const _o=Y(zo);var jo=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(N);const Vo=Y(jo);var ba=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(N);const Yt=Y(ba);var Zo=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(N);const Go=Y(Zo);var ma=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(N);const Bt=Y(ma);var ko=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(N);const Qo=Y(ko);var Ko=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(N);const Xo=Y(Ko);var Jo=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(N);const ec=Y(Jo);var nc=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(N);const tc=Y(nc);var rc=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(N);const ac=Y(rc);var ic=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(N);const fc=Y(ic);var oc=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(N);const cc=Y(oc);var uc=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(N);const sc=Y(uc);var lc=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(N);const dc=Y(lc);var hc=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(N);const bc=Y(hc);var mc=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(N);const pc=Y(mc);var gc=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(N);const yc=Y(gc);var wc=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(N);const vc=Y(wc);var Mc=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(N);const Tc=Y(Mc);var $c=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(N);const xc=Y($c);var Sc=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(N);const Cc=Y(Sc);var Ac=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(N);const Dc=Y(Ac);var Ec=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(N);const Lc=Y(Ec);var Nc=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(N);const Uc=Y(Nc);function Rc(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Ic=qa(Se(300,.5,0),Se(-240,.5,1));var Oc=qa(Se(-100,.75,.35),Se(80,1.5,.8)),Fc=qa(Se(260,.75,.35),Se(80,1.5,.8)),mt=Se();function qc(e){(e<0||e>1)&&(e-=Math.floor(e));var n=Math.abs(e-.5);return mt.h=360*e-100,mt.s=1.5-1.5*n,mt.l=.8-.9*n,mt+""}var pt=xt(),g0=Math.PI/3,y0=Math.PI*2/3;function Wc(e){var n;return e=(.5-e)*Math.PI,pt.r=255*(n=Math.sin(e))*n,pt.g=255*(n=Math.sin(e+g0))*n,pt.b=255*(n=Math.sin(e+y0))*n,pt+""}function Pc(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ur(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}const Yc=ur(N("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Bc=ur(N("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Hc=ur(N("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zc=ur(N("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const w0=Z(3),_c={draw(e,n){const t=Z(n+Ua(n/28,.75))*.59436,r=t/2,a=r*w0;e.moveTo(0,t),e.lineTo(0,-t),e.moveTo(-a,-r),e.lineTo(a,r),e.moveTo(-a,r),e.lineTo(a,-r)}},Ha={draw(e,n){const t=Z(n/Jr);e.moveTo(t,0),e.arc(0,0,t,0,Zt)}},jc={draw(e,n){const t=Z(n/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},Vc=Z(1/3),v0=Vc*2,Zc={draw(e,n){const t=Z(n/v0),r=t*Vc;e.moveTo(0,-t),e.lineTo(r,0),e.lineTo(0,t),e.lineTo(-r,0),e.closePath()}},Gc={draw(e,n){const t=Z(n)*.62625;e.moveTo(0,-t),e.lineTo(t,0),e.lineTo(0,t),e.lineTo(-t,0),e.closePath()}},kc={draw(e,n){const t=Z(n-Ua(n/7,2))*.87559;e.moveTo(-t,0),e.lineTo(t,0),e.moveTo(0,t),e.lineTo(0,-t)}},Qc={draw(e,n){const t=Z(n),r=-t/2;e.rect(r,r,t,t)}},Kc={draw(e,n){const t=Z(n)*.4431;e.moveTo(t,t),e.lineTo(t,-t),e.lineTo(-t,-t),e.lineTo(-t,t),e.closePath()}},M0=.8908130915292852,Xc=At(Jr/10)/At(7*Jr/10),T0=At(Zt/10)*Xc,$0=-xf(Zt/10)*Xc,Jc={draw(e,n){const t=Z(n*M0),r=T0*t,a=$0*t;e.moveTo(0,-t),e.lineTo(r,a);for(let i=1;i<5;++i){const f=Zt*i/5,o=xf(f),c=At(f);e.lineTo(c*t,-o*t),e.lineTo(o*r-c*a,c*r+o*a)}e.closePath()}},Pr=Z(3),eu={draw(e,n){const t=-Z(n/(Pr*3));e.moveTo(0,t*2),e.lineTo(-Pr*t,-t),e.lineTo(Pr*t,-t),e.closePath()}},x0=Z(3),nu={draw(e,n){const t=Z(n)*.6824,r=t/2,a=t*x0/2;e.moveTo(0,-t),e.lineTo(a,r),e.lineTo(-a,r),e.closePath()}},se=-.5,le=Z(3)/2,pa=1/Z(12),S0=(pa/2+1)*3,tu={draw(e,n){const t=Z(n/S0),r=t/2,a=t*pa,i=r,f=t*pa+t,o=-i,c=f;e.moveTo(r,a),e.lineTo(i,f),e.lineTo(o,c),e.lineTo(se*r-le*a,le*r+se*a),e.lineTo(se*i-le*f,le*i+se*f),e.lineTo(se*o-le*c,le*o+se*c),e.lineTo(se*r+le*a,se*a-le*r),e.lineTo(se*i+le*f,se*f-le*i),e.lineTo(se*o+le*c,se*c-le*o),e.closePath()}},ru={draw(e,n){const t=Z(n-Ua(n/6,1.7))*.6189;e.moveTo(-t,-t),e.lineTo(t,t),e.moveTo(-t,t),e.lineTo(t,-t)}},C0=[Ha,jc,Zc,Qc,Jc,eu,tu],A0=[Ha,kc,ru,nu,_c,Kc,Gc];function $n(e){return e!=null&&!Number.isNaN(e)}function tn(e,n){return+$n(n)-+$n(e)||Ct(e,n)}function au(e,n){return+$n(n)-+$n(e)||Vt(e,n)}function za(e){return e!=null&&`${e}`!=""}function iu(e){return isFinite(e)?e:NaN}function _a(e){return e>0&&isFinite(e)?e:NaN}function fu(e){return e<0&&isFinite(e)?e:NaN}function D0(e,n){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof n=="function"?n(e):n;const t=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return`${E0(e.getUTCFullYear())}-${Ie(e.getUTCMonth()+1,2)}-${Ie(e.getUTCDate(),2)}${t||r||a||i?`T${Ie(t,2)}:${Ie(r,2)}${a||i?`:${Ie(a,2)}${i?`.${Ie(i,3)}`:""}`:""}Z`:""}`}function E0(e){return e<0?`-${Ie(-e,6)}`:e>9999?`+${Ie(e,6)}`:Ie(e,4)}function Ie(e,n){return`${e}`.padStart(n,"0")}const L0=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ou(e,n){return L0.test(e+="")?new Date(e):typeof n=="function"?n(e):n}const N0=new Map([["second",We],["minute",rr],["hour",ir],["day",An],["week",Mn],["month",pn],["quarter",pn.every(3)],["half",pn.every(6)],["year",Ce],["monday",Kn],["tuesday",Mo],["wednesday",To],["thursday",en],["friday",$o],["saturday",xo],["sunday",Mn]]),U0=new Map([["second",We],["minute",ar],["hour",fr],["day",ft],["week",Tn],["month",gn],["quarter",gn.every(3)],["half",gn.every(6)],["year",Ae],["monday",Xn],["tuesday",So],["wednesday",Co],["thursday",nn],["friday",Ao],["saturday",Do],["sunday",Tn]]);function R0(e){const n=N0.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${e}`);return n}function I0(e){const n=U0.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${e}`);return n}const Jn=Object.getPrototypeOf(Uint8Array),O0=Object.prototype.toString;function Be(e,n,t){const r=typeof n;return r==="string"?_i(e,q0(n),t):r==="function"?_i(e,n,t):r==="number"||n instanceof Date||r==="boolean"?ee(e,Dn(n),t):typeof(n==null?void 0:n.transform)=="function"?ji(n.transform(e),t):ji(n,t)}function _i(e,n,t){return ee(e,(t==null?void 0:t.prototype)instanceof Jn?F0(n):n,t)}function ji(e,n){return n===void 0?De(e):e instanceof n?e:n.prototype instanceof Jn&&!(e instanceof Jn)?n.from(e,Va):n.from(e)}function F0(e){return(n,t)=>Va(e(n,t))}const q0=e=>n=>n[e],W0=(e,n)=>n,He={transform:e=>e},I2=()=>1,P0=()=>!0,ge=e=>e==null?e:`${e}`,J=e=>e==null?e:+e,ja=e=>e?e[0]:void 0,ga=e=>e?e[1]:void 0,Dn=e=>()=>e;function Y0(e){const n=+`${e}`.slice(1)/100;return(t,r)=>Et(t,n,r)}function Ht(e){return e instanceof Jn?e:ee(e,Va,Float64Array)}function Va(e){return e==null?NaN:Number(e)}function B0(e){return ee(e,H0)}function H0(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?ou(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function xn(e,n){return e===void 0&&(e=n),e===null?[void 0,"none"]:lr(e)?[void 0,e]:[e,void 0]}function he(e,n){return e===void 0&&(e=n),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function cu(e,n,t){if(e!=null)return ze(e,n,t)}function ze(e,n,t){const r=`${e}`.toLowerCase();if(!t.includes(r))throw new Error(`invalid ${n}: ${e}`);return r}function De(e){return e==null||e instanceof Array||e instanceof Jn?e:Array.from(e)}function ee(e,n,t=Array){return e==null?e:e instanceof t?e.map(n):t.from(e,n)}function ya(e,n=Array){return e instanceof n?e.slice():n.from(e)}function En(e){return(e==null?void 0:e.toString)===O0}function wa(e){return En(e)&&(e.type!==void 0||e.domain!==void 0)}function sr(e){return En(e)&&typeof e.transform!="function"}function Sn(e){return sr(e)&&e.value===void 0&&e.channel===void 0}function O2(e,n,t,r=He){return n===void 0&&t===void 0?(n=0,t=e===void 0?r:e):n===void 0?n=e===void 0?0:e:t===void 0&&(t=e===void 0?0:e),[n,t]}function z0(e,n){return e===void 0&&n===void 0?[ja,ga]:[e,n]}function F2({z:e,fill:n,stroke:t}={}){return e===void 0&&([e]=xn(n)),e===void 0&&([e]=xn(t)),e}function ot(e){const n=e.length,t=new Uint32Array(n);for(let r=0;r<n;++r)t[r]=r;return t}function uu(e,n){return ee(n,t=>e[t])}function Yr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _0(e,n){if(n[e]!==void 0)return n[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return n[e]}function su(e){let n;return[{transform:()=>n,label:Ln(e)},t=>n=t]}function q2(e){return e==null?[e]:su(e)}function Ln(e,n){return typeof e=="string"?e:e&&e.label!==void 0?e.label:n}function W2(e,n){return{transform(t){const r=e.transform(t),a=n.transform(t);return we(r)||we(a)?ee(r,(i,f)=>new Date((+r[f]+ +a[f])/2)):ee(r,(i,f)=>(+r[f]+ +a[f])/2,Float64Array)},label:e.label}}function Za(e,n){if(e!=null){if(typeof e=="number"){const t=e;return{floor:r=>t*Math.floor(r/t),offset:r=>r+t,range:(r,a)=>Is(Math.ceil(r/t),a/t).map(i=>t*i)}}if(typeof e=="string")return(n==="time"?R0:I0)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function ct(e,n){if(e=Za(e,n),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function j0(e,n){if(e=ct(e,n),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function Ga(e){return e===void 0||sr(e)?e:{value:e}}function V0(e){return e==null?null:{transform:n=>Be(n,e,Float64Array),label:Ln(e)}}function cn(e){return e&&typeof e[Symbol.iterator]=="function"}function Z0(e){for(const n of e)if(n!=null)return typeof n!="object"||n instanceof Date}function Vi(e){for(const n of e){if(n==null)continue;const t=typeof n;return t==="string"||t==="boolean"}}function we(e){for(const n of e)if(n!=null)return n instanceof Date}function G0(e){for(const n of e)if(n!=null)return typeof n=="string"&&isNaN(n)&&ou(n)}function k0(e){for(const n of e)if(n!=null){if(typeof n!="string")return!1;if(n.trim())return!isNaN(n)}}function Q0(e){for(const n of e)if(n!=null)return typeof n=="number"}function Br(e,n){let t;for(const r of e)if(r!=null){if(!n(r))return!1;t=!0}return t}function lr(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),e==="none"||e==="currentcolor"||e.startsWith("url(")&&e.endsWith(")")||e.startsWith("var(")&&e.endsWith(")")||Cs(e)!==null)}function K0(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function ce(e){return e==null||et(e)}function et(e){return/^\s*none\s*$/i.test(e)}function X0(e){return/^\s*round\s*$/i.test(e)}function lu(e="middle"){return ze(e,"frameAnchor",["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function nt(e){if(e==null)return;const n=e[0],t=e[e.length-1];return Vt(n,t)}function J0(e={},...n){let t=e;for(const r of n)for(const a in r)if(t[a]===void 0){const i=r[a];t===e?t={...t,[a]:i}:t[a]=i}return t}function e1(e){console.warn("named iterables are deprecated; please use an object instead");const n=new Set;return Object.fromEntries(Array.from(e,t=>{const{name:r}=t;if(r==null)throw new Error("missing name");const a=`${r}`;if(a==="__proto__")throw new Error(`illegal name: ${a}`);if(n.has(a))throw new Error(`duplicate name: ${a}`);return n.add(a),[r,t]}))}function Zi(e){return cn(e)?e1(e):e}const Te=Symbol("position"),Ee=Symbol("color"),dr=Symbol("radius"),hr=Symbol("length"),br=Symbol("opacity"),mr=Symbol("symbol"),H=new Map([["x",Te],["y",Te],["fx",Te],["fy",Te],["r",dr],["color",Ee],["opacity",br],["symbol",mr],["length",hr]]),n1=Math.sqrt(3),t1=2/n1,r1={draw(e,n){const t=Math.sqrt(n/Math.PI),r=t*t1,a=r/2;e.moveTo(0,r),e.lineTo(t,a),e.lineTo(t,-a),e.lineTo(0,-r),e.lineTo(-t,-a),e.lineTo(-t,a),e.closePath()}},ka=new Map([["asterisk",_c],["circle",Ha],["cross",jc],["diamond",Zc],["diamond2",Gc],["hexagon",r1],["plus",kc],["square",Qc],["square2",Kc],["star",Jc],["times",ru],["triangle",eu],["triangle2",nu],["wye",tu]]);function Qa(e){return e&&typeof e.draw=="function"}function a1(e){return Qa(e)?!0:typeof e!="string"?!1:ka.has(e.toLowerCase())}function Ka(e){if(e==null||Qa(e))return e;const n=ka.get(`${e}`.toLowerCase());if(n)return n;throw new Error(`invalid symbol: ${e}`)}function P2(e){if(e==null||Qa(e))return[void 0,e];if(typeof e=="string"){const n=ka.get(`${e}`.toLowerCase());if(n)return[void 0,n]}return[e,void 0]}function du({filter:e,sort:n,reverse:t,transform:r,initializer:a,...i}={},f){if(r===void 0&&(e!=null&&(r=hu(e)),n!=null&&!Sn(n)&&(r=Hr(r,Xa(n))),t&&(r=Hr(r,bu))),f!=null&&a!=null)throw new Error("transforms cannot be applied after initializers");return{...i,...(n===null||Sn(n))&&{sort:n},transform:Hr(r,f)}}function pr({filter:e,sort:n,reverse:t,initializer:r,...a}={},i){return r===void 0&&(e!=null&&(r=hu(e)),n!=null&&!Sn(n)&&(r=zr(r,Xa(n))),t&&(r=zr(r,bu))),{...a,...(n===null||Sn(n))&&{sort:n},initializer:zr(r,i)}}function Hr(e,n){return e==null?n===null?void 0:n:n==null?e===null?void 0:e:function(t,r){return{data:t,facets:r}=e.call(this,t,r),n.call(this,De(t),r)}}function zr(e,n){return e==null?n===null?void 0:n:n==null?e===null?void 0:e:function(t,r,a,...i){let f,o,c,u,s,h;return{data:o=t,facets:c=r,channels:f}=e.call(this,t,r,a,...i),{data:s=o,facets:h=c,channels:u}=n.call(this,o,c,{...a,...f},...i),{data:s,facets:h,channels:{...f,...u}}}}function i1(e,n){return(e.initializer!=null?pr:du)(e,n)}function hu(e){return(n,t)=>{const r=Be(n,e);return{data:n,facets:t.map(a=>a.filter(i=>r[i]))}}}function bu(e,n){return{data:e,facets:n.map(t=>t.slice().reverse())}}function Y2(e,{sort:n,...t}={}){return{...(sr(e)&&e.channel!==void 0?pr:i1)(t,Xa(e)),sort:Sn(n)?n:null}}function Xa(e){return(typeof e=="function"&&e.length!==1?f1:o1)(e)}function f1(e){return(n,t)=>{const r=(a,i)=>e(n[a],n[i]);return{data:n,facets:t.map(a=>a.slice().sort(r))}}}function o1(e){let n,t;if({channel:n,value:e,order:t=tn}={...Ga(e)},typeof t!="function")switch(`${t}`.toLowerCase()){case"ascending":t=tn;break;case"descending":t=au;break;default:throw new Error(`invalid order: ${t}`)}return(r,a,i)=>{let f;if(n===void 0)f=Be(r,e);else{if(i===void 0)throw new Error("channel sort requires an initializer");if(f=i[n],!f)return{};f=f.value}const o=(c,u)=>t(f[c],f[u]);return{data:r,facets:a.map(c=>c.slice().sort(o))}}}function B2(e,...n){for(const{name:t}of e)if(n.includes(t))return!0;return!1}function H2(e,n,t=c1){const r=Object.entries(e);return n.title!=null&&e.title===void 0&&r.push(["title",m1]),n.href!=null&&e.href===void 0&&r.push(["href",pu]),r.filter(([,a])=>a!==void 0).map(([a,i])=>i===null?u1(a):t(a,i,n))}function c1(e,n,t,r=s1){let a;En(n)&&"reduce"in n&&(a=n.scale,n=n.reduce);const i=r(e,n,t),[f,o]=su(i.label);let c;return{name:e,output:a===void 0?f:{value:f,scale:a},initialize(u){i.initialize(u),c=o([])},scope(u,s){i.scope(u,s)},reduce(u,s){c.push(i.reduce(u,s))}}}function u1(e){return{name:e,initialize(){},scope(){},reduce(){}}}function s1(e,n,t,r=mu){const a=_0(e,t),i=r(n,a);let f,o;return{label:Ln(i===va?null:a,i.label),initialize(c){f=a===void 0?c:Be(c,a),i.scope==="data"&&(o=i.reduceIndex(ot(c),f))},scope(c,u){i.scope===c&&(o=i.reduceIndex(u,f))},reduce(c,u){return i.scope==null?i.reduceIndex(c,f,u):i.reduceIndex(c,f,o,u)}}}function z2(e,n){return n?er(Sf(e,t=>n[t]),ja):[[,e]]}function mu(e,n,t=l1){if(e==null)return t(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&En(e))return d1(e);if(typeof e=="function")return h1(e);if(/^p\d{2}$/i.test(e))return Re(Y0(e));switch(`${e}`.toLowerCase()){case"first":return pu;case"last":return p1;case"identity":return b1;case"count":return va;case"distinct":return g1;case"sum":return n==null?va:y1;case"proportion":return ki(n,"data");case"proportion-facet":return ki(n,"facet");case"deviation":return Re(sl);case"min":return Re(kn);case"min-index":return Re(hl);case"max":return Re(Pe);case"max-index":return Re(dl);case"mean":return Gi(Os);case"median":return Gi(ra);case"variance":return Re(Nf);case"mode":return Re(ml)}return t(e)}function l1(e){throw new Error(`invalid reduce: ${e}`)}function _2(e,n){for(const t in n){const r=n[t];if(r!==void 0&&!e.some(a=>a.name===t))return r}}function j2(e,n,t){if(n){const r=n.output.transform(),a=(i,f)=>tn(r[i],r[f]);e.forEach(i=>i.sort(a))}t&&e.forEach(r=>r.reverse())}function d1(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function h1(e){return{reduceIndex(n,t,r){return e(uu(t,n),r)}}}function Re(e){return{reduceIndex(n,t){return e(n,r=>t[r])}}}function Gi(e){return{reduceIndex(n,t){const r=e(n,a=>t[a]);return we(t)?new Date(r):r}}}const b1={reduceIndex(e,n){return uu(n,e)}},pu={reduceIndex(e,n){return n[e[0]]}},m1={reduceIndex(e,n){const r=er(_n(e,i=>i.length,i=>n[i]),ga),a=r.slice(-5).reverse();if(a.length<r.length){const i=r.slice(0,-4);a[5-1]=[` ${i.length.toLocaleString("en-US")} more`,nr(i,ga)]}return a.map(([i,f])=>`${i} (${f.toLocaleString("en-US")})`).join(`
`)}},p1={reduceIndex(e,n){return n[e[e.length-1]]}},va={label:"Frequency",reduceIndex(e){return e.length}},g1={label:"Distinct",reduceIndex(e,n){const t=new Ra;for(const r of e)t.add(n[r]);return t.size}},y1=Re(nr);function ki(e,n){return e==null?{scope:n,label:"Frequency",reduceIndex:(t,r,a=1)=>t.length/a}:{scope:n,reduceIndex:(t,r,a=1)=>nr(t,i=>r[i])/a}}function tt(e,{scale:n,type:t,value:r,filter:a,hint:i},f){return yu(f,{scale:n,type:t,value:Be(e,r),label:Ln(r),filter:a,hint:i})}function w1(e,n){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,tt(n,r,t)]))}function gu(e,n){const t=Object.fromEntries(Object.entries(e).map(([r,{scale:a,value:i}])=>{const f=a==null?null:n[a];return[r,f==null?i:ee(i,f)]}));return t.channels=e,t}function yu(e,n){const{scale:t,value:r}=n;if(t===!0||t==="auto")switch(e){case"fill":case"stroke":case"color":n.scale=t!==!0&&Br(r,lr)?null:"color";break;case"fillOpacity":case"strokeOpacity":n.scale=t!==!0&&Br(r,K0)?null:"opacity";break;case"symbol":t!==!0&&Br(r,a1)?(n.scale=null,n.value=ee(r,Ka)):n.scale="symbol";break;default:n.scale=H.has(e)?e:null;break}else if(t===!1)n.scale=null;else if(t!=null&&!H.has(t))throw new Error(`unknown scale: ${t}`);return n}function v1(e,n,t,r,a){const{reverse:i,reduce:f=!0,limit:o}=a;for(const c in a){if(!H.has(c))continue;let{value:u,reverse:s=i,reduce:h=f,limit:d=o}=Ga(a[c]);if(s===void 0&&(s=u==="width"||u==="height"),h==null||h===!1)continue;const l=c==="fx"||c==="fy"?T1(n,r[c]):M1(t,c);if(!l)throw new Error(`missing channel for scale: ${c}`);const m=l.value,[b=0,p=1/0]=cn(d)?d:d<0?[d]:[0,d];if(u==null)l.domain=()=>{let y=Array.from(new Ra(m));return s&&(y=y.reverse()),(b!==0||p!==1/0)&&(y=y.slice(b,p)),y};else{const y=u==="data"?e:u==="height"?Qi(t,"y1","y2"):u==="width"?Qi(t,"x1","x2"):Ma(t,u,u==="y"?"y2":u==="x"?"x2":void 0),M=mu(h===!0?"max":h,y);l.domain=()=>{let w=_n(ot(m),g=>M.reduceIndex(g,y),g=>m[g]);return w=er(w,s?x1:$1),(b!==0||p!==1/0)&&(w=w.slice(b,p)),w.map(ja)}}}}function M1(e,n){for(const t in e){const r=e[t];if(r.scale===n)return r}}function T1(e,n){const t=e.original;if(t===e)return n;const r=n.value,a=n.value=[];for(let i=0;i<t.length;++i){const f=r[t[i][0]];for(const o of e[i])a[o]=f}return n}function Qi(e,n,t){const r=Ma(e,n),a=Ma(e,t);return ee(a,(i,f)=>Math.abs(i-r[f]),Float64Array)}function Ma(e,n,t){let r=e[n];if(!r&&t!==void 0&&(r=e[t]),r)return r.value;throw new Error(`missing channel: ${n}`)}function $1([e,n],[t,r]){return tn(n,r)||tn(e,t)}function x1([e,n],[t,r]){return au(n,r)||tn(e,t)}let Ta=0;function S1(){const e=Ta;return Ta=0,e}function yn(e){console.warn(e),++Ta}const wu=Math.PI,Le=2*wu,_r=.618;function C1({projection:e,inset:n=0,insetTop:t=n,insetRight:r=n,insetBottom:a=n,insetLeft:i=n}={},f){if(e==null)return;if(typeof e.stream=="function")return e;let o,c,u="frame";if(En(e)){let T;if({type:e,domain:c,inset:T,insetTop:t=T!==void 0?T:t,insetRight:r=T!==void 0?T:r,insetBottom:a=T!==void 0?T:a,insetLeft:i=T!==void 0?T:i,clip:u=u,...o}=e,e==null)return}typeof e!="function"&&({type:e}=vu(e));const{width:s,height:h,marginLeft:d,marginRight:l,marginTop:m,marginBottom:b}=f,p=s-d-l-i-r,y=h-m-b-t-a;if(e=e==null?void 0:e({width:p,height:y,clip:u,...o}),e==null)return;u=A1(u,d,m,s-l,h-b);let M=d+i,w=m+t,g;if(c!=null){const[[T,$],[A,I]]=to(e).bounds(c),U=Math.min(p/(A-T),y/(I-$));U>0?(M-=(U*(T+A)-p)/2,w-=(U*($+I)-y)/2,g=na({point(z,te){this.stream.point(z*U+M,te*U+w)}})):yn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return g??(g=M===0&&w===0?Mu():na({point(T,$){this.stream.point(T+M,$+w)}})),{stream:T=>e.stream(g.stream(u(T)))}}function vu(e){switch(`${e}`.toLowerCase()){case"albers-usa":return be(ql,.7463,.4673);case"albers":return gt(ro,.7463,.4673);case"azimuthal-equal-area":return be(Wl,4,4);case"azimuthal-equidistant":return be(Pl,Le,Le);case"conic-conformal":return gt(Bl,Le,Le);case"conic-equal-area":return gt(Ft,6.1702,2.9781);case"conic-equidistant":return gt(_l,7.312,3.6282);case"equal-earth":return be(Vl,5.4133,2.6347);case"equirectangular":return be(Hl,Le,wu);case"gnomonic":return be(Zl,3.4641,3.4641);case"identity":return{type:Mu};case"reflect-y":return{type:D1};case"mercator":return be(Xs,Le,Le);case"orthographic":return be(Gl,2,2);case"stereographic":return be(kl,2,2);case"transverse-mercator":return be(Ql,Le,Le);default:throw new Error(`unknown projection type: ${e}`)}}function A1(e,n,t,r,a){if(e===!1||e==null||typeof e=="number")return i=>i;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Ks(n,t,r,a);default:throw new Error(`unknown projection clip type: ${e}`)}}function be(e,n,t){return{type:({width:r,height:a,rotate:i,precision:f=.15,clip:o})=>{var u,s,h;const c=e();return f!=null&&((u=c.precision)==null||u.call(c,f)),i!=null&&((s=c.rotate)==null||s.call(c,i)),typeof o=="number"&&((h=c.clipAngle)==null||h.call(c,o)),c.scale(Math.min(r/n,a/t)),c.translate([r/2,a/2]),c},aspectRatio:t/n}}function gt(e,n,t){const{type:r,aspectRatio:a}=be(e,n,t);return{type:i=>{const{parallels:f,domain:o,width:c,height:u}=i,s=r(i);return f!=null&&(s.parallels(f),o===void 0&&s.fitSize([c,u],{type:"Sphere"})),s},aspectRatio:a}}const Mu=Dn({stream:e=>e}),D1=Dn(na({point(e,n){this.stream.point(e,-n)}}));function $t(e,n,t,r,a){const i=t[e]&&t[e].scale==="x",f=t[n]&&t[n].scale==="y";if(i&&f)E1(e,n,r,a.projection);else{if(i)throw new Error(`projection requires paired x and y channels; ${e} is missing ${n}`);if(f)throw new Error(`projection requires paired x and y channels; ${n} is missing ${e}`)}}function E1(e,n,t,r){const a=t[e],i=t[n],f=a.length,o=t[e]=new Float64Array(f).fill(NaN),c=t[n]=new Float64Array(f).fill(NaN);let u;const s=r.stream({point(h,d){o[u]=h,c[u]=d}});for(u=0;u<f;++u)s.point(a[u],i[u])}function L1(e,n){if(typeof(e==null?void 0:e.stream)=="function")return _r;if(En(e)&&(e=e.type),e==null)return N1(n)?_r:void 0;if(typeof e!="function"){const{aspectRatio:t}=vu(e);if(t)return t}return _r}function V2(e,n,t){const{x:r,y:a}=e;let i={};return r&&(i.x=r),a&&(i.y=a),i=gu(i,n),t.projection&&$t("x","y",e,i,t),r&&(i.x=Ht(i.x)),a&&(i.y=Ht(i.y)),i}function N1(e){for(const n of e)if(n.channels.geometry)return!0;return!1}function Ja(e={},n){const{document:t=typeof window<"u"?window.document:void 0}=e;return{document:t,projection:C1(e,n)}}function _e(e,{document:n}){return Xr(As(e).call(n.documentElement))}const Ki=new Map([["accent",u0],["category10",c0],["dark2",s0],["paired",l0],["pastel1",d0],["pastel2",h0],["set1",b0],["set2",Ds],["set3",m0],["tableau10",p0],["brbg",Ne(Po,Yo)],["prgn",Ne(Bo,Ho)],["piyg",Ne(zo,_o)],["puor",Ne(jo,Vo)],["rdbu",Ne(ba,Yt)],["rdgy",Ne(Zo,Go)],["rdylbu",Ne(ma,Bt)],["rdylgn",Ne(ko,Qo)],["spectral",Ne(Js,Af)],["burd",Xi(ba,Yt)],["buylrd",Xi(ma,Bt)],["blues",k(Mc,Tc)],["greens",k($c,xc)],["greys",k(Sc,Cc)],["oranges",k(Nc,Uc)],["purples",k(Ac,Dc)],["reds",k(Ec,Lc)],["turbo",Ue(Pc)],["viridis",Ue(Yc)],["magma",Ue(Bc)],["inferno",Ue(Hc)],["plasma",Ue(zc)],["cividis",Ue(Rc)],["cubehelix",Ue(Ic)],["warm",Ue(Oc)],["cool",Ue(Fc)],["bugn",k(Ko,Xo)],["bupu",k(Jo,ec)],["gnbu",k(nc,tc)],["orrd",k(rc,ac)],["pubu",k(oc,cc)],["pubugn",k(ic,fc)],["purd",k(uc,sc)],["rdpu",k(lc,dc)],["ylgn",k(mc,pc)],["ylgnbu",k(hc,bc)],["ylorbr",k(gc,yc)],["ylorrd",k(wc,vc)],["rainbow",Ji(qc)],["sinebow",Ji(Wc)]]);function k(e,n){return({length:t})=>t===1?[e[3][1]]:t===2?[e[3][1],e[3][2]]:(t=Math.max(3,Math.floor(t)),t>9?ye(n,t):e[t])}function Ne(e,n){return({length:t})=>t===2?[e[3][0],e[3][2]]:(t=Math.max(3,Math.floor(t)),t>11?ye(n,t):e[t])}function Xi(e,n){return({length:t})=>t===2?[e[3][2],e[3][0]]:(t=Math.max(3,Math.floor(t)),t>11?ye(r=>n(1-r),t):e[t].slice().reverse())}function Ue(e){return({length:n})=>ye(e,Math.max(2,Math.floor(n)))}function Ji(e){return({length:n})=>ye(e,Math.floor(n)+1).slice(0,-1)}function Tu(e){const n=`${e}`.toLowerCase();if(!Ki.has(n))throw new Error(`unknown ordinal scheme: ${n}`);return Ki.get(n)}function gr(e,n){const t=Tu(e),r=typeof t=="function"?t({length:n}):t;return r.length!==n?r.slice(0,n):r}function U1(e,n="greys"){const t=new Set,[r,a]=gr(n,2);for(const i of e)if(i!=null)if(i===!0)t.add(a);else if(i===!1)t.add(r);else return;return[...t]}const ef=new Map([["brbg",Yo],["prgn",Ho],["piyg",_o],["puor",Vo],["rdbu",Yt],["rdgy",Go],["rdylbu",Bt],["rdylgn",Qo],["spectral",Af],["burd",e=>Yt(1-e)],["buylrd",e=>Bt(1-e)],["blues",Tc],["greens",xc],["greys",Cc],["purples",Dc],["reds",Lc],["oranges",Uc],["turbo",Pc],["viridis",Yc],["magma",Bc],["inferno",Hc],["plasma",zc],["cividis",Rc],["cubehelix",Ic],["warm",Oc],["cool",Fc],["bugn",Xo],["bupu",ec],["gnbu",tc],["orrd",ac],["pubugn",fc],["pubu",cc],["purd",sc],["rdpu",dc],["ylgnbu",bc],["ylgn",pc],["ylorbr",yc],["ylorrd",vc],["rainbow",qc],["sinebow",Wc]]);function ei(e){const n=`${e}`.toLowerCase();if(!ef.has(n))throw new Error(`unknown quantitative scheme: ${n}`);return ef.get(n)}const R1=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function nf(e){return e!=null&&R1.has(`${e}`.toLowerCase())}const $u=e=>n=>e(1-n),jr=[0,1],tf=new Map([["number",at],["rgb",La],["hsl",vl],["hcl",$l],["lab",Ml]]);function xu(e){const n=`${e}`.toLowerCase();if(!tf.has(n))throw new Error(`unknown interpolator: ${n}`);return tf.get(n)}function ut(e,n,t,{type:r,nice:a,clamp:i,zero:f,domain:o=Cu(e,t),unknown:c,round:u,scheme:s,interval:h,range:d=H.get(e)===dr?_1(t,o):H.get(e)===hr?j1(t,o):H.get(e)===br?jr:void 0,interpolate:l=H.get(e)===Ee?s==null&&d!==void 0?La:ei(s!==void 0?s:r==="cyclical"?"rainbow":"turbo"):u?$f:at,reverse:m}){if(h=ct(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),m=!!m,typeof l!="function"&&(l=xu(l)),l.length===1?(m&&(l=$u(l),m=!1),d===void 0&&(d=Float64Array.from(o,(b,p)=>p/(o.length-1)),d.length===2&&(d=jr)),n.interpolate((d===jr?Dn:ti)(l))):n.interpolate(l),f){const[b,p]=vn(o);(b>0||p<0)&&(o=ya(o),nt(o)!==Math.sign(b)?o[o.length-1]=0:o[0]=0)}return m&&(o=Lt(o)),n.domain(o).unknown(c),a&&(n.nice(I1(a,r)),o=n.domain()),d!==void 0&&n.range(d),i&&n.clamp(i),{type:r,domain:o,range:d,scale:n,interpolate:l,interval:h}}function I1(e,n){return e===!0?void 0:typeof e=="number"?e:j0(e,n)}function O1(e,n,t){return ut(e,Df(),n,t)}function F1(e,n,t){return Su(e,n,{...t,exponent:.5})}function Su(e,n,{exponent:t=1,...r}){return ut(e,go().exponent(t),n,{...r,type:"pow"})}function q1(e,n,{base:t=10,domain:r=V1(n),...a}){return ut(e,rl().base(t),n,{...a,domain:r})}function W1(e,n,{constant:t=1,...r}){return ut(e,mo().constant(t),n,r)}function P1(e,n,{range:t,quantiles:r=t===void 0?5:(t=[...t]).length,n:a=r,scheme:i="rdylbu",domain:f=Z1(n),unknown:o,interpolate:c,reverse:u}){return t===void 0&&(t=c!==void 0?ye(c,a):H.get(e)===Ee?gr(i,a):void 0),f.length>0&&(f=yo(f,t===void 0?{length:a}:t).quantiles()),ni(e,n,{domain:f,range:t,reverse:u,unknown:o})}function Y1(e,n,{range:t,n:r=t===void 0?5:(t=[...t]).length,scheme:a="rdylbu",domain:i=Cu(e,n),unknown:f,interpolate:o,reverse:c}){const[u,s]=vn(i);let h;return t===void 0?(h=Rs(u,s,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=s&&h.pop(),r=h.length+1,t=o!==void 0?ye(o,r):H.get(e)===Ee?gr(a,r):void 0):(h=ye(at(u,s),r+1).slice(1,-1),u instanceof Date&&(h=h.map(d=>new Date(d)))),nt(De(i))<0&&h.reverse(),ni(e,n,{domain:h,range:t,reverse:c,unknown:f})}function ni(e,n,{domain:t=[0],unknown:r,scheme:a="rdylbu",interpolate:i,range:f=i!==void 0?ye(i,t.length+1):H.get(e)===Ee?gr(a,t.length+1):void 0,reverse:o}){t=De(t);const c=nt(t);if(!isNaN(c)&&!B1(t,c))throw new Error(`the ${e} scale has a non-monotonic domain`);return o&&(f=Lt(f)),{type:"threshold",scale:wo(c<0?Lt(t):t,f===void 0?[]:f).unknown(r),domain:t,range:f}}function B1(e,n){for(let t=1,r=e.length,a=e[0];t<r;++t){const i=Vt(a,a=e[t]);if(i!==0&&i!==n)return!1}return!0}function H1(){return{type:"identity",scale:ho()}}function rt(e,n=iu){return e.length?[kn(e,({value:t})=>t===void 0?t:kn(t,n)),Pe(e,({value:t})=>t===void 0?t:Pe(t,n))]:[0,1]}function Cu(e,n){const t=H.get(e);return(t===dr||t===br||t===hr?z1:rt)(n)}function z1(e){return[0,e.length?Pe(e,({value:n})=>n===void 0?n:Pe(n,iu)):1]}function _1(e,n){const t=e.find(({radius:f})=>f!==void 0);if(t!==void 0)return[0,t.radius];const r=Et(e,.5,({value:f})=>f===void 0?NaN:Et(f,.25,_a)),a=n.map(f=>3*Math.sqrt(f/r)),i=30/Pe(a);return i<1?a.map(f=>f*i):a}function j1(e,n){const t=ra(e,({value:i})=>i===void 0?NaN:ra(i,Math.abs)),r=n.map(i=>12*i/t),a=60/Pe(r);return a<1?r.map(i=>i*a):r}function V1(e){for(const{value:n}of e)if(n!==void 0)for(let t of n){if(t>0)return rt(e,_a);if(t<0)return rt(e,fu)}return[1,10]}function Z1(e){const n=[];for(const{value:t}of e)if(t!==void 0)for(const r of t)n.push(r);return n}function ti(e){return(n,t)=>r=>e(n+r*(t-n))}function yr(e,n,t,r,{type:a,nice:i,clamp:f,domain:o=rt(r),unknown:c,pivot:u=0,scheme:s,range:h,symmetric:d=!0,interpolate:l=H.get(e)===Ee?s==null&&h!==void 0?La:ei(s!==void 0?s:"rdbu"):at,reverse:m}){u=+u;let[b,p]=o;if(Vt(b,p)<0&&([b,p]=[p,b],m=!m),b=Math.min(b,u),p=Math.max(p,u),typeof l!="function"&&(l=xu(l)),h!==void 0&&(l=l.length===1?ti(l)(...h):Wa(l,h)),m&&(l=$u(l)),d){const y=t.apply(u),M=y-t.apply(b),w=t.apply(p)-y;M<w?b=t.invert(y-w):M>w&&(p=t.invert(y+M))}return n.domain([b,u,p]).unknown(c).interpolator(l),f&&n.clamp(f),i&&n.nice(i),{type:a,domain:[b,p],pivot:u,interpolate:l,scale:n}}function G1(e,n,t){return yr(e,Oo(),X1,n,t)}function k1(e,n,t){return Au(e,n,{...t,exponent:.5})}function Au(e,n,{exponent:t=1,...r}){return yr(e,Wo().exponent(t=+t),nh(t),n,{...r,type:"diverging-pow"})}function Q1(e,n,{base:t=10,pivot:r=1,domain:a=rt(n,r<0?fu:_a),...i}){return yr(e,Fo().base(t=+t),J1,n,{domain:a,pivot:r,...i})}function K1(e,n,{constant:t=1,...r}){return yr(e,qo().constant(t=+t),th(t),n,r)}const X1={apply(e){return e},invert(e){return e}},J1={apply:Math.log,invert:Math.exp},eh={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function nh(e){return e===.5?eh:{apply(n){return Math.sign(n)*Math.pow(Math.abs(n),e)},invert(n){return Math.sign(n)*Math.pow(Math.abs(n),1/e)}}}function th(e){return{apply(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))},invert(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}}function Du(e,n,t,r){return ut(e,n,t,r)}function rh(e,n,t){return Du(e,f0(),n,t)}function ah(e,n,t){return Du(e,o0(),n,t)}const st=Symbol("ordinal");function Eu(e,n,t,{type:r,interval:a,domain:i,range:f,reverse:o,hint:c}){return a=ct(a,r),i===void 0&&(i=Nu(t,a,e)),(r==="categorical"||r===st)&&(r="ordinal"),o&&(i=Lt(i)),n.domain(i),f!==void 0&&(typeof f=="function"&&(f=f(i)),n.range(f)),{type:r,domain:i,range:f,scale:n,hint:c,interval:a}}function ih(e,n,{type:t,interval:r,domain:a,range:i,scheme:f,unknown:o,...c}){r=ct(r,t),a===void 0&&(a=Nu(n,r,e));let u;if(H.get(e)===mr)u=ch(n),i=i===void 0?uh(u):ee(i,Ka);else if(H.get(e)===Ee&&(i===void 0&&(t==="ordinal"||t===st)&&(i=U1(a,f),i!==void 0&&(f=void 0)),f===void 0&&i===void 0&&(f=t==="ordinal"?"turbo":"tableau10"),f!==void 0))if(i!==void 0){const s=ei(f),h=i[0],d=i[1]-i[0];i=({length:l})=>ye(m=>s(h+d*m),l)}else i=Tu(f);if(o===qs)throw new Error(`implicit unknown on ${e} scale is not supported`);return Eu(e,Ws().unknown(o),n,{...c,type:t,domain:a,range:i,hint:u})}function fh(e,n,{align:t=.5,padding:r=.5,...a}){return Lu(al().align(t).padding(r),n,a,e)}function oh(e,n,{align:t=.5,padding:r=.1,paddingInner:a=r,paddingOuter:i=e==="fx"||e==="fy"?0:r,...f}){return Lu(Ef().align(t).paddingInner(a).paddingOuter(i),n,f,e)}function Lu(e,n,t,r){let{round:a}=t;return a!==void 0&&e.round(a=!!a),e=Eu(r,e,n,t),e.round=a,e}function Nu(e,n,t){const r=new Ra;for(const{value:a,domain:i}of e){if(i!==void 0)return i();if(a!==void 0)for(const f of a)r.add(f)}if(n!==void 0){const[a,i]=vn(r).map(n.floor,n);return n.range(a,n.offset(i))}if(r.size>1e4&&H.get(t)===Te)throw new Error(`implicit ordinal domain of ${t} scale has more than 10,000 values`);return er(r,tn)}function rf(e,n){let t;for(const{hint:r}of e){const a=r==null?void 0:r[n];if(a!==void 0){if(t===void 0)t=a;else if(t!==a)return}}return t}function ch(e){return{fill:rf(e,"fill"),stroke:rf(e,"stroke")}}function uh(e){return ce(e.fill)?A0:C0}function $a(e,{label:n,inset:t=0,insetTop:r=t,insetRight:a=t,insetBottom:i=t,insetLeft:f=t,round:o,nice:c,clamp:u,zero:s,align:h,padding:d,projection:l,facet:{label:m=n}={},...b}={}){const p={};for(const[y,M]of e){const w=b[y],g=hh(y,M,{round:H.get(y)===Te?o:void 0,nice:c,clamp:u,zero:s,align:h,padding:d,projection:l,...w});if(g){let{label:T=y==="fx"||y==="fy"?m:n,percent:$,transform:A,inset:I,insetTop:U=I!==void 0?I:y==="y"?r:0,insetRight:z=I!==void 0?I:y==="x"?a:0,insetBottom:te=I!==void 0?I:y==="y"?i:0,insetLeft:W=I!==void 0?I:y==="x"?f:0}=w||{};if(A==null)A=void 0;else if(typeof A!="function")throw new Error("invalid scale transform; not a function");g.percent=!!$,g.label=T===void 0?lh(M,g):T,g.transform=A,y==="x"||y==="fx"?(g.insetLeft=+W,g.insetRight=+z):(y==="y"||y==="fy")&&(g.insetTop=+U,g.insetBottom=+te),p[y]=g}}return p}function af(e){return Object.fromEntries(Object.entries(e).filter(([,{scale:n}])=>n).map(([n,{scale:t,type:r,interval:a,label:i}])=>(t.type=r,a!=null&&(t.interval=a),i!=null&&(t.label=i),[n,t])))}function sh(e,n){const{x:t,y:r,fx:a,fy:i}=e,f=a||i?ri(n):n;a&&ff(a,f),i&&of(i,f);const o=a||i?Uu(e,n):n;t&&ff(t,o),r&&of(r,o)}function lh(e=[],n){let t;for(const{label:r}of e)if(r!==void 0){if(t===void 0)t=r;else if(t!==r)return}if(t!==void 0&&!(Ou(n)&&/^(date|time|year)$/i.test(t)))return!un(n)&&n.percent&&(t=`${t} (%)`),{inferred:!0,toString:()=>t}}function ri(e){const{marginTop:n,marginRight:t,marginBottom:r,marginLeft:a,width:i,height:f,facet:{marginTop:o,marginRight:c,marginBottom:u,marginLeft:s}}=e;return{marginTop:Math.max(n,o),marginRight:Math.max(t,c),marginBottom:Math.max(r,u),marginLeft:Math.max(a,s),width:i,height:f}}function Uu({fx:e,fy:n},t){const{marginTop:r,marginRight:a,marginBottom:i,marginLeft:f,width:o,height:c}=ri(t);return{marginTop:r,marginRight:a,marginBottom:i,marginLeft:f,width:e?e.scale.bandwidth()+f+a:o,height:n?n.scale.bandwidth()+r+i:c}}function ff(e,n){if(e.range===void 0){const{insetLeft:t,insetRight:r}=e,{width:a,marginLeft:i=0,marginRight:f=0}=n,o=i+t,c=a-f-r;e.range=[o,Math.max(o,c)],un(e)||(e.range=Iu(e)),e.scale.range(e.range)}Ru(e)}function of(e,n){if(e.range===void 0){const{insetTop:t,insetBottom:r}=e,{height:a,marginTop:i=0,marginBottom:f=0}=n,o=i+t,c=a-f-r;e.range=[Math.max(o,c),o],un(e)?e.range.reverse():e.range=Iu(e),e.scale.range(e.range)}Ru(e)}function Ru(e){e.round===void 0&&mh(e)&&dh(e)<=30&&e.scale.round(!0)}function dh({scale:e}){const n=e.domain().length,[t,r]=e.range(),a=e.paddingInner?e.paddingInner():1,i=e.paddingOuter?e.paddingOuter():e.padding(),f=n-a,o=Math.abs(r-t)/Math.max(1,f+i*2);return(o-Math.floor(o))*f}function Iu(e){const n=e.scale.domain().length+Fu(e);if(!(n>2))return e.range;const[t,r]=e.range;return Array.from({length:n},(a,i)=>t+i/(n-1)*(r-t))}function hh(e,n=[],t={}){const r=bh(e,n,t);if(t.type===void 0&&t.domain===void 0&&t.range===void 0&&t.interval==null&&e!=="fx"&&e!=="fy"&&un({type:r})){const a=n.map(({value:i})=>i).filter(i=>i!==void 0);a.some(we)?yn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${dn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${dn(r)}".`):a.some(G0)?yn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${dn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${dn(r)}".`):a.some(k0)&&yn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${dn(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${dn(r)}".`)}switch(t.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":t=yt(n,t,Ht);break;case"identity":switch(H.get(e)){case Te:t=yt(n,t,Ht);break;case mr:t=yt(n,t,ph);break}break;case"utc":case"time":t=yt(n,t,B0);break}switch(r){case"diverging":return G1(e,n,t);case"diverging-sqrt":return k1(e,n,t);case"diverging-pow":return Au(e,n,t);case"diverging-log":return Q1(e,n,t);case"diverging-symlog":return K1(e,n,t);case"categorical":case"ordinal":case st:return ih(e,n,t);case"cyclical":case"sequential":case"linear":return O1(e,n,t);case"sqrt":return F1(e,n,t);case"threshold":return ni(e,n,t);case"quantile":return P1(e,n,t);case"quantize":return Y1(e,n,t);case"pow":return Su(e,n,t);case"log":return q1(e,n,t);case"symlog":return W1(e,n,t);case"utc":return ah(e,n,t);case"time":return rh(e,n,t);case"point":return fh(e,n,t);case"band":return oh(e,n,t);case"identity":return H.get(e)===Te?H1():{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function dn(e){return typeof e=="symbol"?e.description:e}const cf={toString:()=>"projection"};function bh(e,n,{type:t,domain:r,range:a,scheme:i,pivot:f,projection:o}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&o!=null&&(t=cf);for(const{type:s}of n)if(s!==void 0){if(t===void 0)t=s;else if(t!==s)throw new Error(`scale incompatible with channel: ${t} !== ${s}`)}if(t===cf)return;if(t!==void 0)return t;if(r===void 0&&!n.some(({value:s})=>s!==void 0))return;const c=H.get(e);if(c===dr)return"sqrt";if(c===br||c===hr)return"linear";if(c===mr)return"ordinal";if((r||a||[]).length>2)return Vr(c);if(r!==void 0)return Vi(r)?Vr(c):we(r)?"utc":c===Ee&&(f!=null||nf(i))?"diverging":"linear";const u=n.map(({value:s})=>s).filter(s=>s!==void 0);return u.some(Vi)?Vr(c):u.some(we)?"utc":c===Ee&&(f!=null||nf(i))?"diverging":"linear"}function Vr(e){switch(e){case Te:return"point";case Ee:return st;default:return"ordinal"}}function Ou({type:e}){return e==="time"||e==="utc"}function un({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===st}function Fu({type:e}){return e==="threshold"}function mh({type:e}){return e==="point"||e==="band"}function zt(e){if(e===void 0)return!0;const n=e.domain(),t=e(n[0]);for(let r=1,a=n.length;r<a;++r)if(e(n[r])-t)return!1;return!0}function yt(e,{domain:n,...t},r){for(const a of e)a.value!==void 0&&(a.value=r(a.value));return{domain:n===void 0?n:r(n),...t}}function ph(e){return ee(e,Ka)}function gh(e){return n=>{if(!H.has(n=`${n}`))throw new Error(`unknown scale: ${n}`);return n in e?yh(e[n]):void 0}}function yh({scale:e,type:n,domain:t,range:r,interpolate:a,interval:i,transform:f,percent:o,pivot:c}){if(n==="identity")return{type:"identity",apply:s=>s,invert:s=>s};const u=e.unknown?e.unknown():void 0;return{type:n,domain:ya(t),...r!==void 0&&{range:ya(r)},...f!==void 0&&{transform:f},...o&&{percent:o},...u!==void 0&&{unknown:u},...i!==void 0&&{interval:i},...a!==void 0&&{interpolate:a},...e.clamp&&{clamp:e.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:s=>e(s),...e.invert&&{invert:s=>e.invert(s)}}}function wh(e){let n,t;return(...r)=>(((t==null?void 0:t.length)!==r.length||t.some((a,i)=>a!==r[i]))&&(t=r,n=e(...r)),n)}const vh=wh(e=>new Intl.NumberFormat(e));function Mh(e="en-US"){const n=vh(e);return t=>t!=null&&!isNaN(t)?n.format(t):void 0}function qu(e){return D0(e,"Invalid Date")}function Th(e="en-US"){const n=Mh(e);return t=>(t instanceof Date?qu:typeof t=="number"?n:ge)(t)}const wr=Th(),ue=typeof window<"u"&&window.devicePixelRatio>1?0:.5;let $h=0;function uf(){return`plot-clip-${++$h}`}function xh(e,{title:n,href:t,ariaLabel:r,ariaDescription:a,ariaHidden:i,target:f,fill:o,fillOpacity:c,stroke:u,strokeWidth:s,strokeOpacity:h,strokeLinejoin:d,strokeLinecap:l,strokeMiterlimit:m,strokeDasharray:b,strokeDashoffset:p,opacity:y,mixBlendMode:M,paintOrder:w,pointerEvents:g,shapeRendering:T},{ariaLabel:$,fill:A="currentColor",fillOpacity:I,stroke:U="none",strokeOpacity:z,strokeWidth:te,strokeLinecap:W,strokeLinejoin:C,strokeMiterlimit:x,paintOrder:D}){A===null&&(o=null,c=null),U===null&&(u=null,h=null),ce(A)?!ce(U)&&!ce(o)&&(U="none"):ce(U)&&!ce(u)&&(A="none");const[E,O]=xn(o,A),[V,_]=he(c,I),[B,X]=xn(u,U),[sn,Tr]=he(h,z),[$r,xr]=he(y);et(X)||(s===void 0&&(s=te),l===void 0&&(l=W),d===void 0&&(d=C),m===void 0&&!X0(d)&&(m=x),!et(O)&&w===void 0&&(w=D));const[Sr,Cr]=he(s);return A!==null&&(e.fill=oe(O,"currentColor"),e.fillOpacity=Wn(_,1)),U!==null&&(e.stroke=oe(X,"none"),e.strokeWidth=Wn(Cr,1),e.strokeOpacity=Wn(Tr,1),e.strokeLinejoin=oe(d,"miter"),e.strokeLinecap=oe(l,"butt"),e.strokeMiterlimit=Wn(m,4),e.strokeDasharray=oe(b,"none"),e.strokeDashoffset=oe(p,"0")),e.target=ge(f),e.ariaLabel=ge($),e.ariaDescription=ge(a),e.ariaHidden=ge(i),e.opacity=Wn(xr,1),e.mixBlendMode=oe(M,"normal"),e.paintOrder=oe(w,"normal"),e.pointerEvents=oe(g,"auto"),e.shapeRendering=oe(T,"auto"),{title:{value:n,optional:!0},href:{value:t,optional:!0},ariaLabel:{value:r,optional:!0},fill:{value:E,scale:"auto",optional:!0},fillOpacity:{value:V,scale:"auto",optional:!0},stroke:{value:B,scale:"auto",optional:!0},strokeOpacity:{value:sn,scale:"auto",optional:!0},strokeWidth:{value:Sr,optional:!0},opacity:{value:$r,scale:"auto",optional:!0}}}function Sh(e,n){n&&e.filter(t=>za(n[t])).append("title").call(Ah,n)}function Ch(e,n){n&&e.filter(([t])=>za(n[t])).append("title").call(Dh,n)}function Ah(e,n){n&&e.text(t=>wr(n[t]))}function Dh(e,n){n&&e.text(([t])=>wr(n[t]))}function vr(e,{target:n},{ariaLabel:t,title:r,fill:a,fillOpacity:i,stroke:f,strokeOpacity:o,strokeWidth:c,opacity:u,href:s}){t&&L(e,"aria-label",h=>t[h]),a&&L(e,"fill",h=>a[h]),i&&L(e,"fill-opacity",h=>i[h]),f&&L(e,"stroke",h=>f[h]),o&&L(e,"stroke-opacity",h=>o[h]),c&&L(e,"stroke-width",h=>c[h]),u&&L(e,"opacity",h=>u[h]),s&&Wu(e,h=>s[h],n),Sh(e,r)}function Z2(e,{target:n},{ariaLabel:t,title:r,fill:a,fillOpacity:i,stroke:f,strokeOpacity:o,strokeWidth:c,opacity:u,href:s}){t&&L(e,"aria-label",([h])=>t[h]),a&&L(e,"fill",([h])=>a[h]),i&&L(e,"fill-opacity",([h])=>i[h]),f&&L(e,"stroke",([h])=>f[h]),o&&L(e,"stroke-opacity",([h])=>o[h]),c&&L(e,"stroke-width",([h])=>c[h]),u&&L(e,"opacity",([h])=>u[h]),s&&Wu(e,([h])=>s[h],n),Ch(e,r)}function Eh({ariaLabel:e,title:n,fill:t,fillOpacity:r,stroke:a,strokeOpacity:i,strokeWidth:f,opacity:o,href:c}){return[e,n,t,r,a,i,f,o,c].filter(u=>u!==void 0)}function Lh(e,n,t){const r=Sf(e,a=>n[a]);return t===void 0&&r.size>e.length>>1&&yn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*G2(e,n,{z:t},r){const{z:a}=r,i=Eh(r),f=[...n,...i];for(const o of a?Lh(e,a,t):[e]){let c,u;e:for(const s of o){for(const h of f)if(!$n(h[s])){u&&u.push(-1);continue e}if(c===void 0){u&&(yield u),c=i.map(h=>Yr(h[s])),u=[s];continue}u.push(s);for(let h=0;h<i.length;++h)if(Yr(i[h][s])!==c[h]){yield u,c=i.map(l=>Yr(l[s])),u=[s];continue e}}u&&(yield u)}}function Nh(e){return e===!0?e="frame":e===!1&&(e=null),cu(e,"clip",["frame","sphere"])}function Uh(e,n,t,r){let a;switch(n.clip){case"frame":{const{width:i,height:f,marginLeft:o,marginRight:c,marginTop:u,marginBottom:s}=t,h=uf();a=`url(#${h})`,e=_e("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",o).attr("y",u).attr("width",i-c-o).attr("height",f-u-s)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:i}=r;if(!i)throw new Error('the "sphere" clip option requires a projection');const f=uf();a=`url(#${f})`,e.append("clipPath").attr("id",f).append("path").attr("d",to(i)({type:"Sphere"}));break}}L(e,"aria-label",n.ariaLabel),L(e,"aria-description",n.ariaDescription),L(e,"aria-hidden",n.ariaHidden),L(e,"clip-path",a)}function lt(e,n,t,r){Uh(e,n,t,r),L(e,"fill",n.fill),L(e,"fill-opacity",n.fillOpacity),L(e,"stroke",n.stroke),L(e,"stroke-width",n.strokeWidth),L(e,"stroke-opacity",n.strokeOpacity),L(e,"stroke-linejoin",n.strokeLinejoin),L(e,"stroke-linecap",n.strokeLinecap),L(e,"stroke-miterlimit",n.strokeMiterlimit),L(e,"stroke-dasharray",n.strokeDasharray),L(e,"stroke-dashoffset",n.strokeDashoffset),L(e,"shape-rendering",n.shapeRendering),L(e,"paint-order",n.paintOrder),L(e,"pointer-events",n.pointerEvents)}function dt(e,n){Rh(e,"mix-blend-mode",n.mixBlendMode),L(e,"opacity",n.opacity)}function Wu(e,n,t){e.each(function(r){const a=n(r);if(a!=null){const i=this.ownerDocument.createElementNS(St.svg,"a");i.setAttribute("fill","inherit"),i.setAttributeNS(St.xlink,"href",a),t!=null&&i.setAttribute("target",t),this.parentNode.insertBefore(i,this).appendChild(this)}})}function L(e,n,t){t!=null&&e.attr(n,t)}function Rh(e,n,t){t!=null&&e.style(n,t)}function ht(e,n,{x:t,y:r},a=ue,i=ue){a+=n.dx,i+=n.dy,t!=null&&t.bandwidth&&(a+=t.bandwidth()/2),r!=null&&r.bandwidth&&(i+=r.bandwidth()/2),(a||i)&&e.attr("transform",`translate(${a},${i})`)}function oe(e,n){if((e=ge(e))!==n)return e}function Wn(e,n){if((e=J(e))!==n)return e}const Ih=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function ai(e){if(e===void 0)return`plot-${Math.random().toString(16).slice(2)}`;if(e=`${e}`,!Ih.test(e))throw new Error(`invalid class name: ${e}`);return e}function ii(e,n){if(typeof n=="string")e.property("style",n);else if(n!=null)for(const t of e)Object.assign(t.style,n)}function Pu({frameAnchor:e},{width:n,height:t,marginTop:r,marginRight:a,marginBottom:i,marginLeft:f}){return[/left$/.test(e)?f:/right$/.test(e)?n-a:(f+n-a)/2,/^top/.test(e)?r:/^bottom/.test(e)?t-i:(r+t-i)/2]}function Oh(e,n,t={}){let r=.5-ue,a=.5+ue,i=.5+ue,f=.5-ue;for(const{marginTop:b,marginRight:p,marginBottom:y,marginLeft:M}of n)b>r&&(r=b),p>a&&(a=p),y>i&&(i=y),M>f&&(f=M);let{margin:o,marginTop:c=o!==void 0?o:r,marginRight:u=o!==void 0?o:a,marginBottom:s=o!==void 0?o:i,marginLeft:h=o!==void 0?o:f}=t;c=+c,u=+u,s=+s,h=+h;let{width:d=640,height:l=Fh(e,n,t,{width:d,marginTopDefault:r,marginRightDefault:a,marginBottomDefault:i,marginLeftDefault:f})+Math.max(0,c-r+s-i)}=t;d=+d,l=+l;const m={width:d,height:l,marginTop:c,marginRight:u,marginBottom:s,marginLeft:h};if(e.fx||e.fy){let{margin:b,marginTop:p=b!==void 0?b:c,marginRight:y=b!==void 0?b:u,marginBottom:M=b!==void 0?b:s,marginLeft:w=b!==void 0?b:h}=t.facet??{};p=+p,y=+y,M=+M,w=+w,m.facet={marginTop:p,marginRight:y,marginBottom:M,marginLeft:w}}return m}function Fh({x:e,y:n,fy:t,fx:r},a,{projection:i,aspectRatio:f},{width:o,marginTopDefault:c,marginRightDefault:u,marginBottomDefault:s,marginLeftDefault:h}){const d=t?t.scale.domain().length:1,l=L1(i,a);if(l){const b=r?r.scale.domain().length:1,p=(1.1*d-.1)/(1.1*b-.1)*l,y=Math.max(.1,Math.min(10,p));return Math.round((o-h-u)*y+c+s)}const m=n?un(n)?n.scale.domain().length:Math.max(7,17/d):1;if(f!=null){if(f=+f,!(isFinite(f)&&f>0))throw new Error(`invalid aspectRatio: ${f}`);const b=sf("y",n)/(sf("x",e)*f),p=r?r.scale.bandwidth():1,y=t?t.scale.bandwidth():1,M=p*(o-h-u)-e.insetLeft-e.insetRight;return(b*M+n.insetTop+n.insetBottom)/y+c+s}return!!(n||t)*Math.max(1,Math.min(60,m*d))*20+!!r*30+60}function sf(e,n){if(!n)throw new Error(`aspectRatio requires ${e} scale`);const{type:t,domain:r}=n;let a;switch(t){case"linear":case"utc":case"time":a=Number;break;case"pow":{const o=n.scale.exponent();a=c=>Math.pow(c,o);break}case"log":a=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${t}`)}const[i,f]=vn(r);return Math.abs(a(f)-a(i))}function qh(e,n){const{fx:t,fy:r}=$a(e,n),a=t==null?void 0:t.scale.domain(),i=r==null?void 0:r.scale.domain();return a&&i?ul(a,i).map(([f,o],c)=>({x:f,y:o,i:c})):a?a.map((f,o)=>({x:f,i:o})):i?i.map((f,o)=>({y:f,i:o})):void 0}function Wh({x:e,y:n}){const t=e&&new Map(e.map((a,i)=>[a,i])),r=n&&new Map(n.map((a,i)=>[a,i]));return e&&n?(a,i)=>t.get(a.x)-t.get(i.x)||r.get(a.y)-r.get(i.y):e?(a,i)=>t.get(a.x)-t.get(i.x):(a,i)=>r.get(a.y)-r.get(i.y)}function fi(e,{fx:n,fy:t}){const r=ot(e),a=n==null?void 0:n.value,i=t==null?void 0:t.value;return n&&t?_n(r,f=>(f.fx=a[f[0]],f.fy=i[f[0]],f),f=>a[f],f=>i[f]):n?_n(r,f=>(f.fx=a[f[0]],f),f=>a[f]):_n(r,f=>(f.fy=i[f[0]],f),f=>i[f])}function Ph(e,n,{marginTop:t,marginLeft:r}){return e&&n?({x:a,y:i})=>`translate(${e(a)-r},${n(i)-t})`:e?({x:a})=>`translate(${e(a)-r},0)`:({y:a})=>`translate(0,${n(a)-t})`}function Yh(e){const n=[],t=new Uint32Array(nr(e,r=>r.length));for(const r of e){let a=0;for(const i of e)r!==i&&(t.set(i,a),a+=i.length);n.push(t.slice(0,a))}return n}const Bh=new Map([["top",Zr],["right",Qr],["bottom",Gr],["left",kr],["top-left",wt(Zr,kr)],["top-right",wt(Zr,Qr)],["bottom-left",wt(Gr,kr)],["bottom-right",wt(Gr,Qr)],["top-empty",zh],["right-empty",Vh],["bottom-empty",_h],["left-empty",jh],["empty",Zh]]);function Hh(e){if(e==null)return null;const n=Bh.get(`${e}`.toLowerCase());if(n)return n;throw new Error(`invalid facet anchor: ${e}`)}function Zr(e,{y:n},{y:t}){return n?n.indexOf(t)===0:!0}function Gr(e,{y:n},{y:t}){return n?n.indexOf(t)===n.length-1:!0}function kr(e,{x:n},{x:t}){return n?n.indexOf(t)===0:!0}function Qr(e,{x:n},{x:t}){return n?n.indexOf(t)===n.length-1:!0}function zh(e,{y:n},{x:t,y:r,empty:a}){var f;if(a)return!1;const i=n==null?void 0:n.indexOf(r);if(i>0){const o=n[i-1];return(f=e.find(c=>c.x===t&&c.y===o))==null?void 0:f.empty}}function _h(e,{y:n},{x:t,y:r,empty:a}){var f;if(a)return!1;const i=n==null?void 0:n.indexOf(r);if(i<(n==null?void 0:n.length)-1){const o=n[i+1];return(f=e.find(c=>c.x===t&&c.y===o))==null?void 0:f.empty}}function jh(e,{x:n},{x:t,y:r,empty:a}){var f;if(a)return!1;const i=n==null?void 0:n.indexOf(t);if(i>0){const o=n[i-1];return(f=e.find(c=>c.x===o&&c.y===r))==null?void 0:f.empty}}function Vh(e,{x:n},{x:t,y:r,empty:a}){var f;if(a)return!1;const i=n==null?void 0:n.indexOf(t);if(i<(n==null?void 0:n.length)-1){const o=n[i+1];return(f=e.find(c=>c.x===o&&c.y===r))==null?void 0:f.empty}}function Zh(e,n,{empty:t}){return t}function wt(e,n){return function(){return e.apply(null,arguments)&&n.apply(null,arguments)}}function Kr(e,{channels:{fx:n,fy:t},groups:r}){return n&&t?e.map(({x:a,y:i})=>{var f;return((f=r.get(a))==null?void 0:f.get(i))??[]}):n?e.map(({x:a})=>r.get(a)??[]):e.map(({y:a})=>r.get(a)??[])}function Yu(e){return un(e)&&e.interval===void 0?void 0:"tabular-nums"}function Gh(e,n){return e===void 0?we(n)?qu:ge:typeof e=="function"?e:(typeof e=="string"?we(n)?or:Ia:Dn)(e)}function kh(e,n){let{label:t=e.label,tickSize:r=6,width:a=240,height:i=44+r,marginTop:f=18,marginRight:o=0,marginBottom:c=16+r,marginLeft:u=0,style:s,ticks:h=(a-u-o)/64,tickFormat:d,fontVariant:l=Yu(e),round:m=!0,opacity:b,className:p}=n;const y=Ja(n);p=ai(p),b=he(b)[1],d===null&&(d=()=>null);const M=_e("svg",y).attr("class",p).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",a).attr("height",i).attr("viewBox",`0 0 ${a} ${i}`).call(W=>W.append("style").text(`
        .${p} {
          display: block;
          background: white;
          height: auto;
          height: intrinsic;
          max-width: 100%;
          overflow: visible;
        }
        .${p} text {
          white-space: pre;
        }
      `)).call(ii,s);let w=W=>W.selectAll(".tick line").attr("y1",f+c-i),g;const T=m?(W,C)=>W.rangeRound(C):(W,C)=>W.range(C),{type:$,domain:A,range:I,interpolate:U,scale:z,pivot:te}=e;if(U){const W=I===void 0?U:Wa(U.length===1?ti(U):U,I);g=T(z.copy(),ye(at(u,a-o),Math.min(A.length+(te!==void 0),I===void 0?1/0:I.length)));const C=256,x=y.document.createElement("canvas");x.width=C,x.height=1;const D=x.getContext("2d");for(let E=0,O=C-1;E<C;++E)D.fillStyle=W(E/O),D.fillRect(E,0,1,1);M.append("image").attr("opacity",b).attr("x",u).attr("y",f).attr("width",a-u-o).attr("height",i-f-c).attr("preserveAspectRatio","none").attr("xlink:href",x.toDataURL())}else if($==="threshold"){const W=A,C=d===void 0?x=>x:typeof d=="string"?Ia(d):d;g=T(Df().domain([-1,I.length-1]),[u,a-o]),M.append("g").attr("fill-opacity",b).selectAll().data(I).enter().append("rect").attr("x",(x,D)=>g(D-1)).attr("y",f).attr("width",(x,D)=>g(D)-g(D-1)).attr("height",i-f-c).attr("fill",x=>x),h=ee(W,(x,D)=>D),d=x=>C(W[x],x)}else g=T(Ef().domain(A),[u,a-o]),M.append("g").attr("fill-opacity",b).selectAll().data(A).enter().append("rect").attr("x",g).attr("y",f).attr("width",Math.max(0,g.bandwidth()-1)).attr("height",i-f-c).attr("fill",z),w=()=>{};return M.append("g").attr("transform",`translate(0,${i-c})`).call(el(g).ticks(Array.isArray(h)?null:h,typeof d=="string"?d:void 0).tickFormat(typeof d=="function"?d:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",oe(l,"normal")).call(w).call(W=>W.select(".domain").remove()),t!==void 0&&M.append("text").attr("x",u).attr("y",f-6).attr("fill","currentColor").attr("font-weight","bold").text(t),M.node()}function lf(e,n){if(n==null)return n;const t=e(n);if(!t)throw new Error(`scale not found: ${n}`);return t}function Qh(e,{opacity:n,...t}={}){if(!un(e)&&!Fu(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Bu(e,t,(r,a)=>r.append("svg").attr("fill",a.scale).attr("fill-opacity",he(n)[1]).append("rect").attr("width","100%").attr("height","100%"),r=>`.${r}-swatch svg {
        width: var(--swatchWidth);
        height: var(--swatchHeight);
        margin-right: 0.5em;
      }`)}function Kh(e,{fill:n=(u=>(u=e.hint)==null?void 0:u.fill)()!==void 0?e.hint.fill:"none",fillOpacity:t=1,stroke:r=(s=>(s=e.hint)==null?void 0:s.stroke)()!==void 0?e.hint.stroke:ce(n)?"currentColor":"none",strokeOpacity:a=1,strokeWidth:i=1.5,r:f=4.5,...o}={},c){const[h,d]=xn(n),[l,m]=xn(r),b=lf(c,h),p=lf(c,l),y=f*f*Math.PI;return t=he(t)[1],a=he(a)[1],i=he(i)[1],Bu(e,o,M=>M.append("svg").attr("viewBox","-8 -8 16 16").attr("fill",h==="color"?w=>b.scale(w):null).attr("stroke",l==="color"?w=>p.scale(w):null).append("path").attr("d",w=>{const g=ta();return e.scale(w).draw(g,y),g}),M=>`.${M}-swatch > svg {
        width: var(--swatchWidth);
        height: var(--swatchHeight);
        margin-right: 0.5em;
        overflow: visible;
        fill: ${d};
        fill-opacity: ${t};
        stroke: ${m};
        stroke-width: ${i}px;
        stroke-opacity: ${a};
      }`)}function Bu(e,n={},t,r){let{columns:a,tickFormat:i,fontVariant:f=Yu(e),swatchSize:o=15,swatchWidth:c=o,swatchHeight:u=o,marginLeft:s=0,className:h,style:d,width:l}=n;const m=Ja(n);h=ai(h),i=Gh(i,e.domain);const b=_e("div",m).attr("class",h).attr("style",`
        --swatchWidth: ${+c}px;
        --swatchHeight: ${+u}px;
      `);let p;return a!=null?(p=`
      .${h}-swatch {
        display: flex;
        align-items: center;
        break-inside: avoid;
        padding-bottom: 1px;
      }
      .${h}-swatch::before {
        flex-shrink: 0;
      }
      .${h}-label {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `,b.style("columns",a).selectAll().data(e.domain).enter().append("div").attr("class",`${h}-swatch`).call(t,e).call(y=>y.append("div").attr("class",`${h}-label`).attr("title",i).text(i))):(p=`
      .${h} {
        display: flex;
        align-items: center;
        min-height: 33px;
        flex-wrap: wrap;
      }
      .${h}-swatch {
        display: inline-flex;
        align-items: center;
        margin-right: 1em;
      }
    `,b.selectAll().data(e.domain).enter().append("span").attr("class",`${h}-swatch`).call(t,e).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),b.call(y=>y.insert("style","*").text(`
        .${h} {
          font-family: system-ui, sans-serif;
          font-size: 10px;
          margin-bottom: 0.5em;${s===void 0?"":`
          margin-left: ${+s}px;`}${l===void 0?"":`
          width: ${l}px;`}
        }
        ${r(h)}
        ${p}
      `)).style("font-variant",oe(f,"normal")).call(ii,d).node()}const xa=new Map([["symbol",Kh],["color",zu],["opacity",Jh]]);function Xh(e,n,t={}){return(r,a)=>{if(!xa.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return xa.get(r)(e[r],Hu(n,t[r],a),i=>e[i])}}function Hu(e,{label:n,ticks:t,tickFormat:r}={},a){return J0(a,e,{label:n,ticks:t,tickFormat:r})}function zu(e,{legend:n=!0,...t}){if(n===!0&&(n=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${n}`.toLowerCase()){case"swatches":return Qh(e,t);case"ramp":return kh(e,t);default:throw new Error(`unknown legend type: ${n}`)}}function Jh({type:e,interpolate:n,...t},{legend:r=!0,color:a=xt(0,0,0),...i}){if(!n)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return zu({type:e,...t,interpolate:eb(a)},{legend:r,...i})}function eb(e){const{r:n,g:t,b:r}=xt(e)||xt(0,0,0);return a=>`rgba(${n},${t},${r},${a})`}function nb(e,n,t){const r=[];for(const[a,i]of xa){const f=t[a];if(f!=null&&f.legend&&a in e){const o=i(e[a],Hu(n,e[a],f),c=>e[c]);o!=null&&r.push(o)}}return r}class Ze{constructor(n,t={},r={},a){const{facet:i="auto",facetAnchor:f,fx:o,fy:c,sort:u,dx:s=0,dy:h=0,margin:d=0,marginTop:l=d,marginRight:m=d,marginBottom:b=d,marginLeft:p=d,clip:y,channels:M}=r;if(this.data=n,this.sort=Sn(u)?u:null,this.initializer=pr(r).initializer,this.transform=this.initializer?r.transform:du(r).transform,i===null||i===!1?this.facet=null:(this.facet=ze(i===!0?"include":i,"facet",["auto","include","exclude","super"]),this.fx=o,this.fy=c),this.facetAnchor=Hh(f),t=Zi(t),M!==void 0&&(t={...Zi(M),...t}),a!==void 0&&(t={...xh(this,r,a),...t}),this.channels=Object.fromEntries(Object.entries(t).map(([w,g])=>{const{value:T}=g;return sr(T)&&(g={...g,value:T.value},T.scale!==void 0&&(g.scale=T.scale)),[w,g]}).filter(([w,{value:g,optional:T}])=>{if(g!=null)return!0;if(T)return!1;throw new Error(`missing channel value: ${w}`)})),this.dx=+s,this.dy=+h,this.marginTop=+l,this.marginRight=+m,this.marginBottom=+b,this.marginLeft=+p,this.clip=Nh(y),this.facet==="super"){if(o||c)throw new Error("super-faceting cannot use fx or fy");for(const w in this.channels){const{scale:g}=t[w];if(!(g!=="x"&&g!=="y"))throw new Error("super-faceting cannot use x or y")}}}initialize(n,t){let r=De(this.data);n===void 0&&r!=null&&(n=[ot(r)]);const a=n;this.transform!=null&&({facets:n,data:r}=this.transform(r,n),r=De(r)),n!==void 0&&(n.original=a);const i=w1(this.channels,r);return this.sort!=null&&v1(r,n,i,t,this.sort),{data:r,facets:n,channels:i}}filter(n,t,r){for(const a in t){const{filter:i=$n}=t[a];if(i!==null){const f=r[a];n=n.filter(o=>i(f[o]))}}return n}project(n,t,r){$t("x","y",n,t,r),$t("x1","y1",n,t,r),$t("x2","y2",n,t,r)}scale(n,t,r){const a=gu(n,t);return r.projection&&this.project(n,a,r),a}}function _u(...e){return e.plot=Ze.prototype.plot,e}const ju=Math.PI/180;function Vu({inset:e,insetLeft:n,insetRight:t,...r}={}){return[n,t]=Gu(e,n,t),{inset:e,insetLeft:n,insetRight:t,...r}}function Zu({inset:e,insetTop:n,insetBottom:t,...r}={}){return[n,t]=Gu(e,n,t),{inset:e,insetTop:n,insetBottom:t,...r}}function Gu(e,n,t){return e===void 0&&n===void 0&&t===void 0?ue?[1,0]:[.5,.5]:[n,t]}function ku(e,{interval:n}){return e={...Ga(e)},e.interval=Za(e.interval===void 0?n:e.interval),e}function Qu(e,n,t,r){const{[e]:a,[`${e}1`]:i,[`${e}2`]:f}=t,{value:o,interval:c}=ku(a,t);if(o==null||c==null&&!r)return t;const u=Ln(a);if(c==null){let l;const m={transform:b=>l||(l=Be(b,o)),label:u};return{...t,[e]:void 0,[`${e}1`]:i===void 0?m:i,[`${e}2`]:f===void 0?m:f}}let s,h;function d(l){return h!==void 0&&l===s?h:h=ee(Be(s=l,o),m=>c.floor(m))}return n({...t,[e]:void 0,[`${e}1`]:i===void 0?{transform:d,label:u}:i,[`${e}2`]:f===void 0?{transform:l=>d(l).map(m=>c.offset(m)),label:u}:f})}function Ku(e,n,t){const{[e]:r}=t,{value:a,interval:i}=ku(r,t);return a==null||i==null?t:n({...t,[e]:{label:Ln(r),transform:f=>{const o=ee(Be(f,a),u=>i.floor(u)),c=o.map(u=>i.offset(u));return o.map(we(o)?(u,s)=>u==null||isNaN(u=+u)||(s=c[s],s==null)||isNaN(s=+s)?void 0:new Date((u+s)/2):(u,s)=>u==null||(s=c[s],s==null)?NaN:(+u+ +s)/2)}}})}function tb(e={}){return Qu("x",Vu,e)}function rb(e={}){return Qu("y",Zu,e)}function ab(e={}){return Ku("x",Vu,e)}function ib(e={}){return Ku("y",Zu,e)}const Xu={ariaLabel:"rule",fill:null,stroke:"currentColor"};class fb extends Ze{constructor(n,t={}){const{x:r,y1:a,y2:i,inset:f=0,insetTop:o=f,insetBottom:c=f}=t;super(n,{x:{value:r,scale:"x",optional:!0},y1:{value:a,scale:"y",optional:!0},y2:{value:i,scale:"y",optional:!0}},t,Xu),this.insetTop=J(o),this.insetBottom=J(c)}render(n,t,r,a,i){const{x:f,y:o}=t,{x:c,y1:u,y2:s}=r,{width:h,height:d,marginTop:l,marginRight:m,marginLeft:b,marginBottom:p}=a,{insetTop:y,insetBottom:M}=this;return _e("svg:g",i).call(lt,this,a).call(ht,this,{x:c&&f},ue,0).call(w=>w.selectAll().data(n).enter().append("line").call(dt,this).attr("x1",c?g=>c[g]:(b+h-m)/2).attr("x2",c?g=>c[g]:(b+h-m)/2).attr("y1",u&&!zt(o)?g=>u[g]+y:l+y).attr("y2",s&&!zt(o)?o.bandwidth?g=>s[g]+o.bandwidth()-M:g=>s[g]-M:d-p-M).call(vr,this,r)).node()}}class ob extends Ze{constructor(n,t={}){const{x1:r,x2:a,y:i,inset:f=0,insetRight:o=f,insetLeft:c=f}=t;super(n,{y:{value:i,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:a,scale:"x",optional:!0}},t,Xu),this.insetRight=J(o),this.insetLeft=J(c)}render(n,t,r,a,i){const{x:f,y:o}=t,{y:c,x1:u,x2:s}=r,{width:h,height:d,marginTop:l,marginRight:m,marginLeft:b,marginBottom:p}=a,{insetLeft:y,insetRight:M}=this;return _e("svg:g",i).call(lt,this,a,i).call(ht,this,{y:c&&o},0,ue).call(w=>w.selectAll().data(n).enter().append("line").call(dt,this).attr("x1",u&&!zt(f)?g=>u[g]+y:b+y).attr("x2",s&&!zt(f)?f.bandwidth?g=>s[g]+f.bandwidth()-M:g=>s[g]-M:h-m-M).attr("y1",c?g=>c[g]:(l+d-p)/2).attr("y2",c?g=>c[g]:(l+d-p)/2).call(vr,this,r)).node()}}function cb(e,n){let{x:t=He,y:r,y1:a,y2:i,...f}=rb(n);return[a,i]=Ju(r,a,i),new fb(e,{...f,x:t,y1:a,y2:i})}function ub(e,n){let{y:t=He,x:r,x1:a,x2:i,...f}=tb(n);return[a,i]=Ju(r,a,i),new ob(e,{...f,y:t,x1:a,x2:i})}function Ju(e,n,t){if(e===void 0){if(n===void 0){if(t!==void 0)return[0,t]}else if(t===void 0)return[0,n]}else{if(n===void 0)return t===void 0?[0,e]:[e,t];if(t===void 0)return[e,n]}return[n,t]}function es(e,...n){let t=n.length;for(let r=0,a=!0;r<t;++r)typeof n[r]!="function"&&(a&&(e=e.slice(),a=!1),e.splice(r,2,e[r]+n[r]+e[r+1]),n.splice(r,1),--r,--t);return r=>{let a=e[0];for(let i=0;i<t;++i)a+=n[i](r)+e[i+1];return a}}const sb={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},ns="";class oi extends Ze{constructor(n,t={}){const{x:r,y:a,text:i=cn(n)&&Z0(n)?He:W0,frameAnchor:f,textAnchor:o=/right$/i.test(f)?"end":/left$/i.test(f)?"start":"middle",lineAnchor:c=/^top/i.test(f)?"top":/^bottom/i.test(f)?"bottom":"middle",lineHeight:u=1,lineWidth:s=1/0,textOverflow:h,monospace:d,fontFamily:l=d?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:b,fontVariant:p,fontWeight:y,rotate:M}=t,[w,g]=he(M,0),[T,$]=yb(m);if(super(n,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},fontSize:{value:T,optional:!0},rotate:{value:V0(w),optional:!0},text:{value:i,filter:za,optional:!0}},t,sb),this.rotate=g,this.textAnchor=oe(o,"middle"),this.lineAnchor=ze(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+s,this.textOverflow=lb(h),this.monospace=!!d,this.fontFamily=ge(l),this.fontSize=$,this.fontStyle=ge(b),this.fontVariant=ge(p),this.fontWeight=ge(y),this.frameAnchor=lu(f),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${s}`);this.splitLines=Mb(this),this.clipLine=Tb(this)}render(n,t,r,a,i){const{x:f,y:o}=t,{x:c,y:u,rotate:s,text:h,title:d,fontSize:l}=r,{rotate:m}=this,[b,p]=Pu(this,a);return _e("svg:g",i).call(lt,this,a,i).call(mb,this,h,a).call(ht,this,{x:c&&f,y:u&&o}).call(y=>y.selectAll().data(n).enter().append("text").call(dt,this).call(db,this,h,d).attr("transform",es`translate(${c?M=>c[M]:b},${u?M=>u[M]:p})${s?M=>` rotate(${s[M]})`:m?` rotate(${m})`:""}`).call(L,"font-size",l&&(M=>l[M])).call(vr,this,r)).node()}}function lb(e){return e==null?null:ze(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function db(e,n,t,r){if(!t)return;const{lineAnchor:a,lineHeight:i,textOverflow:f,splitLines:o,clipLine:c}=n;e.each(function(u){const s=o(wr(t[u])??"").map(c),h=s.length,d=a==="top"?.71:a==="bottom"?1-h:(164-h*100)/200;if(h>1)for(let l=0;l<h;++l){if(!s[l])continue;const m=this.ownerDocument.createElementNS(St.svg,"tspan");m.setAttribute("x",0),m.setAttribute("y",`${(d+l)*i}em`),m.textContent=s[l],this.appendChild(m)}else d&&this.setAttribute("y",`${d*i}em`),this.textContent=s[0];if(f&&!r&&s[0]!==t[u]){const l=this.ownerDocument.createElementNS(St.svg,"title");l.textContent=t[u],this.appendChild(l)}})}function ts(e,n={}){let{x:t,y:r,...a}=n;return n.frameAnchor===void 0&&([t,r]=z0(t,r)),new oi(e,{...a,x:t,y:r})}function hb(e,n={}){const{x:t=He,...r}=n;return new oi(e,ib({...r,x:t}))}function bb(e,n={}){const{y:t=He,...r}=n;return new oi(e,ab({...r,y:t}))}function mb(e,n,t){L(e,"text-anchor",n.textAnchor),L(e,"font-family",n.fontFamily),L(e,"font-size",n.fontSize),L(e,"font-style",n.fontStyle),L(e,"font-variant",n.fontVariant===void 0?pb(t):n.fontVariant),L(e,"font-weight",n.fontWeight)}function pb(e){return Q0(e)||we(e)?"tabular-nums":void 0}const gb=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function yb(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),gb.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function wb(e,n,t){const r=[];let a,i=0;for(const[f,o,c]of vb(e)){if(a===void 0&&(a=f),i>a&&t(e,a,o)>n&&(r.push(e.slice(a,i)+(e[i-1]===ns?"-":"")),a=f),c){r.push(e.slice(a,o)),a=void 0;continue}i=o}return r}function*vb(e){let n=0,t=0;const r=e.length;for(;t<r;){let a=1;switch(e[t]){case ns:case"-":++t,yield[n,t,!1],n=t;break;case" ":for(yield[n,t,!1];e[++t]===" ";);n=t;break;case"\r":e[t+1]===`
`&&++a;case`
`:yield[n,t,!0],t+=a,n=t;break;default:++t;break}}yield[n,t,!0]}const df={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function rs(e,n=0,t=e.length){let r=0;for(let a=n;a<t;a=Nn(e,a))r+=df[e[a]]??(fs(e,a)?120:df.e);return r}function as(e,n=0,t=e.length){let r=0;for(let a=n;a<t;a=Nn(e,a))r+=fs(e,a)?200:100;return r}function Mb({monospace:e,lineWidth:n,textOverflow:t}){if(t!=null||n==1/0)return i=>i.split(/\r\n?|\n/g);const r=e?as:rs,a=n*100;return i=>wb(i,a,r)}function Tb({monospace:e,lineWidth:n,textOverflow:t}){if(t==null||n==1/0)return i=>i;const r=e?as:rs,a=n*100;switch(t){case"clip-start":return i=>bf(i,a,r,"");case"clip-end":return i=>hf(i,a,r,"");case"ellipsis-start":return i=>bf(i,a,r,"");case"ellipsis-middle":return i=>$b(i,a,r,"");case"ellipsis-end":return i=>hf(i,a,r,"")}}function _t(e,n,t,r){const a=[];let i=0;for(let f=0,o=0,c=e.length;f<c;f=o){o=Nn(e,f);const u=t(e,f,o);if(i+u>n){for(i+=r;i>n&&f>0;)o=f,f=a.pop(),i-=t(e,f,o);return[f,n-i]}i+=u,a.push(f)}return[-1,0]}function hf(e,n,t,r){e=e.trim();const a=t(r),[i]=_t(e,n,t,a);return i<0?e:e.slice(0,i).trimEnd()+r}function $b(e,n,t,r){e=e.trim();const a=t(e);if(a<=n)return e;const i=t(r)/2,[f,o]=_t(e,n/2,t,i),[c]=_t(e,a-n/2-o+i,t,-i);return c<0?r:e.slice(0,f).trimEnd()+r+e.slice(Nn(e,c)).trimStart()}function bf(e,n,t,r){e=e.trim();const a=t(e);if(a<=n)return e;const i=t(r),[f]=_t(e,a-n+i,t,-i);return f<0?r:r+e.slice(Nn(e,f)).trimStart()}const Sa=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,mf=/\p{Extended_Pictographic}/uy;function Nn(e,n){return n+=xb(e,n)?2:1,Cb(e,n)&&(n=Sa.lastIndex),Sb(e,n)?Nn(e,n+1):n}function is(e,n){return e.charCodeAt(n)<128}function xb(e,n){const t=e.charCodeAt(n);if(t>=55296&&t<56320){const r=e.charCodeAt(n+1);return r>=56320&&r<57344}return!1}function Sb(e,n){return e.charCodeAt(n)===8205}function Cb(e,n){return is(e,n)?!1:(Sa.lastIndex=n,Sa.test(e))}function fs(e,n){return is(e,n)?!1:(mf.lastIndex=n,mf.test(e))}const Ab={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},os=3.5,Db=os*5,cs={draw(e,n,t){const r=n*t/Db;e.moveTo(0,0),e.lineTo(0,-n),e.moveTo(-r,r-n),e.lineTo(0,-n),e.lineTo(r,r-n)}},Eb={draw(e,n,t){e.moveTo(-t,0),e.lineTo(0,-n),e.lineTo(t,0)}},Lb=new Map([["arrow",cs],["spike",Eb]]);function Nb(e){return e&&typeof e.draw=="function"}function Ub(e){if(Nb(e))return e;const n=Lb.get(`${e}`.toLowerCase());if(n)return n;throw new Error(`invalid shape: ${e}`)}class us extends Ze{constructor(n,t={}){const{x:r,y:a,r:i=os,length:f,rotate:o,shape:c=cs,anchor:u="middle",frameAnchor:s}=t,[h,d]=he(f,12),[l,m]=he(o,0);super(n,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:l,optional:!0}},t,Ab),this.r=+i,this.length=d,this.rotate=m,this.shape=Ub(c),this.anchor=ze(u,"anchor",["start","middle","end"]),this.frameAnchor=lu(s)}render(n,t,r,a,i){const{x:f,y:o}=t,{x:c,y:u,length:s,rotate:h}=r,{length:d,rotate:l,anchor:m,shape:b,r:p}=this,[y,M]=Pu(this,a);return _e("svg:g",i).call(lt,this,a,i).call(ht,this,{x:c&&f,y:u&&o}).call(w=>w.selectAll().data(n).enter().append("path").call(dt,this).attr("transform",es`translate(${c?g=>c[g]:y},${u?g=>u[g]:M})${h?g=>` rotate(${h[g]})`:l?` rotate(${l})`:""}${m==="start"?"":m==="end"?s?g=>` translate(0,${s[g]})`:` translate(0,${d})`:s?g=>` translate(0,${s[g]/2})`:` translate(0,${d/2})`}`).attr("d",s?g=>{const T=ta();return b.draw(T,s[g],p),T}:(()=>{const g=ta();return b.draw(g,d,p),g})()).call(vr,this,r)).node()}}function Rb(e,n={}){const{x:t=He,...r}=n;return new us(e,{...r,x:t})}function Ib(e,n={}){const{y:t=He,...r}=n;return new us(e,{...r,y:t})}function Ge(e,n){return arguments.length<2&&!cn(e)&&(n=e,e=null),n===void 0&&(n={}),[e,n]}function Mr({anchor:e}={},n){return e===void 0?n[0]:ze(e,"anchor",n)}function ss(e){return Mr(e,["left","right"])}function ls(e){return Mr(e,["right","left"])}function ds(e){return Mr(e,["bottom","top"])}function hs(e){return Mr(e,["top","bottom"])}function bs(){const[e,n]=Ge(...arguments);return ps("y",ss(n),e,n)}function Ob(){const[e,n]=Ge(...arguments);return ps("fy",ls(n),e,n)}function ms(){const[e,n]=Ge(...arguments);return gs("x",ds(n),e,n)}function Fb(){const[e,n]=Ge(...arguments);return gs("fx",hs(n),e,n)}function ps(e,n,t,{color:r="currentColor",opacity:a=1,stroke:i=r,strokeOpacity:f=a,strokeWidth:o=1,fill:c=r,fillOpacity:u=a,textAnchor:s,textStroke:h,textStrokeOpacity:d,textStrokeWidth:l,tickSize:m=e==="y"?6:0,tickPadding:b,tickRotate:p,x:y,marginTop:M=20,marginRight:w=n==="right"?40:0,marginBottom:g=20,marginLeft:T=n==="left"?40:0,label:$,labelOffset:A,labelAnchor:I,...U}){return m=J(m),b=J(b),p=J(p),I!==void 0&&(I=ze(I,"labelAnchor",["center","top","bottom"])),_u(m&&!ce(i)?qb(e,n,t,{stroke:i,strokeOpacity:f,strokeWidth:o,tickSize:m,tickPadding:b,tickRotate:p,x:y,...U}):null,ce(c)?null:Pb(e,n,t,{fill:c,fillOpacity:u,stroke:h,strokeOpacity:d,strokeWidth:l,textAnchor:s,tickSize:m,tickPadding:b,tickRotate:p,x:y,marginTop:M,marginRight:w,marginBottom:g,marginLeft:T,...U}),!ce(c)&&$!==null?ts([],{fill:c,fillOpacity:u,...U,lineWidth:void 0,textOverflow:void 0,facet:"super",x:null,y:null,initializer:function(z,te,W,C,x){const D=C[e],{marginTop:E,marginRight:O,marginBottom:V,marginLeft:_}=e==="y"&&x.inset||x,B=I??(D.bandwidth?"center":"top"),X=A??(n==="right"?O:_)-3;return B==="center"?(this.textAnchor=void 0,this.lineAnchor=n==="right"?"bottom":"top",this.frameAnchor=n,this.rotate=-90):(this.textAnchor=n==="right"?"end":"start",this.lineAnchor=B,this.frameAnchor=`${B}-${n}`,this.rotate=0),this.dy=B==="top"?3-E:B==="bottom"?V-3:0,this.dx=n==="right"?X:-X,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[$===void 0?$s(e,D,B):$]}}}}}):null)}function gs(e,n,t,{color:r="currentColor",opacity:a=1,stroke:i=r,strokeOpacity:f=a,strokeWidth:o=1,fill:c=r,fillOpacity:u=a,textAnchor:s,textStroke:h,textStrokeOpacity:d,textStrokeWidth:l,tickSize:m=e==="x"?6:0,tickPadding:b,tickRotate:p,y,marginTop:M=n==="top"?30:0,marginRight:w=20,marginBottom:g=n==="bottom"?30:0,marginLeft:T=20,label:$,labelAnchor:A,labelOffset:I,...U}){return m=J(m),b=J(b),p=J(p),A!==void 0&&(A=ze(A,"labelAnchor",["center","left","right"])),_u(m&&!ce(i)?Wb(e,n,t,{stroke:i,strokeOpacity:f,strokeWidth:o,tickSize:m,tickPadding:b,tickRotate:p,y,...U}):null,ce(c)?null:Yb(e,n,t,{fill:c,fillOpacity:u,stroke:h,strokeOpacity:d,strokeWidth:l,textAnchor:s,tickSize:m,tickPadding:b,tickRotate:p,y,marginTop:M,marginRight:w,marginBottom:g,marginLeft:T,...U}),!ce(c)&&$!==null?ts([],{fill:c,fillOpacity:u,...U,lineWidth:void 0,textOverflow:void 0,facet:"super",x:null,y:null,initializer:function(z,te,W,C,x){const D=C[e],{marginTop:E,marginRight:O,marginBottom:V,marginLeft:_}=e==="x"&&x.inset||x,B=A??(D.bandwidth?"center":"right"),X=I??(n==="top"?E:V)-3;return B==="center"?(this.frameAnchor=n,this.textAnchor=void 0):(this.frameAnchor=`${n}-${B}`,this.textAnchor=B==="right"?"end":"start"),this.lineAnchor=n,this.dy=n==="top"?-X:X,this.dx=B==="right"?O-3:B==="left"?3-_:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[$===void 0?$s(e,D,B):$]}}}}}):null)}function qb(e,n,t,{strokeWidth:r=1,strokeLinecap:a=null,strokeLinejoin:i=null,facetAnchor:f=n+(e==="y"?"-empty":""),frameAnchor:o=n,tickSize:c,inset:u=0,insetLeft:s=u,insetRight:h=u,dx:d=0,y:l=e==="y"?void 0:null,...m}){return Un(Ib,e,`${e}-axis tick`,t,{strokeWidth:r,strokeLinecap:a,strokeLinejoin:i,facetAnchor:f,frameAnchor:o,y:l,...m,dx:n==="left"?+d-ue+ +s:+d+ue-h,anchor:"start",length:c,shape:n==="left"?Gb:kb})}function Wb(e,n,t,{strokeWidth:r=1,strokeLinecap:a=null,strokeLinejoin:i=null,facetAnchor:f=n+(e==="x"?"-empty":""),frameAnchor:o=n,tickSize:c,inset:u=0,insetTop:s=u,insetBottom:h=u,dy:d=0,x:l=e==="x"?void 0:null,...m}){return Un(Rb,e,`${e}-axis tick`,t,{strokeWidth:r,strokeLinejoin:i,strokeLinecap:a,facetAnchor:f,frameAnchor:o,x:l,...m,dy:n==="bottom"?+d-ue-h:+d+ue+ +s,anchor:"start",length:c,shape:n==="bottom"?Vb:Zb})}function Pb(e,n,t,{facetAnchor:r=n+(e==="y"?"-empty":""),frameAnchor:a=n,tickSize:i,tickRotate:f=0,tickPadding:o=Math.max(3,9-i)+(Math.abs(f)>60?4*Math.cos(f*ju):0),tickFormat:c,text:u=typeof c=="function"?c:void 0,textAnchor:s=Math.abs(f)>60?"middle":n==="left"?"end":"start",lineAnchor:h=f>60?"top":f<-60?"bottom":"middle",fontVariant:d,inset:l=0,insetLeft:m=l,insetRight:b=l,dx:p=0,y=e==="y"?void 0:null,...M}){return Un(bb,e,`${e}-axis tick label`,t,{facetAnchor:r,frameAnchor:a,text:u===void 0?null:u,textAnchor:s,lineAnchor:h,fontVariant:d,rotate:f,y,...M,dx:n==="left"?+p-i-o+ +m:+p+ +i+ +o-b},function(w,g,T){d===void 0&&(this.fontVariant=Ts(w)),u===void 0&&(T.text=Ms(w,g,c))})}function Yb(e,n,t,{facetAnchor:r=n+(e==="x"?"-empty":""),frameAnchor:a=n,tickSize:i,tickRotate:f=0,tickPadding:o=Math.max(3,9-i)+(Math.abs(f)>=10?4*Math.cos(f*ju):0),tickFormat:c,text:u=typeof c=="function"?c:void 0,textAnchor:s=Math.abs(f)>=10?f<0^n==="bottom"?"start":"end":"middle",lineAnchor:h=Math.abs(f)>=10?"middle":n==="bottom"?"top":"bottom",fontVariant:d,inset:l=0,insetTop:m=l,insetBottom:b=l,dy:p=0,x:y=e==="x"?void 0:null,...M}){return Un(hb,e,`${e}-axis tick label`,t,{facetAnchor:r,frameAnchor:a,text:u===void 0?null:u,textAnchor:s,lineAnchor:h,fontVariant:d,rotate:f,x:y,...M,dy:n==="bottom"?+p+ +i+ +o-b:+p-i-o+ +m},function(w,g,T){d===void 0&&(this.fontVariant=Ts(w)),u===void 0&&(T.text=Ms(w,g,c))})}function Bb(){const[e,n]=Ge(...arguments);return ys("y",ss(n),e,n)}function Hb(){const[e,n]=Ge(...arguments);return ys("fy",ls(n),e,n)}function zb(){const[e,n]=Ge(...arguments);return ws("x",ds(n),e,n)}function _b(){const[e,n]=Ge(...arguments);return ws("fx",hs(n),e,n)}function ys(e,n,t,{y:r=e==="y"?void 0:null,x:a=null,x1:i=n==="left"?a:null,x2:f=n==="right"?a:null,...o}){return Un(ub,e,`${e}-grid`,t,{y:r,x1:i,x2:f,...vs(o)})}function ws(e,n,t,{x:r=e==="x"?void 0:null,y:a=null,y1:i=n==="top"?a:null,y2:f=n==="bottom"?a:null,...o}){return Un(cb,e,`${e}-grid`,t,{x:r,y1:i,y2:f,...vs(o)})}function vs({color:e="currentColor",opacity:n=.1,stroke:t=e,strokeOpacity:r=n,strokeWidth:a=1,...i}){return{stroke:t,strokeOpacity:r,strokeWidth:a,...i}}function Un(e,n,t,r,a,i){let f;const o=e(r,pr(a,function(c,u,s,h){const{[n]:d}=h;if(!d)throw new Error(`missing scale: ${n}`);let{ticks:l,tickSpacing:m,interval:b}=a;if(Ou(d)&&typeof l=="string"&&(b=l,l=void 0),c==null){if(cn(l))c=De(l);else if(d.ticks)if(l!==void 0)c=d.ticks(l);else if(b=ct(b===void 0?d.interval:b,d.type),b!==void 0){const[p,y]=vn(d.domain());c=b.range(p,b.offset(b.floor(y)))}else{const[p,y]=vn(d.range());l=(y-p)/(m===void 0?n==="x"?80:35:m),c=d.ticks(l)}else c=d.domain();n==="y"||n==="x"?u=[ot(c)]:(f[n]={scale:n,value:He},u=void 0)}return i==null||i.call(this,d,l,f),{data:c,facets:u,channels:Object.fromEntries(Object.entries(f).map(([p,y])=>[p,{...y,value:Be(c,y.value)}]))}}));return r==null?(f=o.channels,o.channels={}):f={},o.ariaLabel=t,o}function Ms(e,n,t){return{value:jb(e,n,t)}}function jb(e,n,t){return e.tickFormat?e.tickFormat(cn(n)?null:n,t):t===void 0?wr:typeof t=="string"?(we(e.domain())?or:Ia)(t):Dn(t)}const Vb={draw(e,n){e.moveTo(0,0),e.lineTo(0,n)}},Zb={draw(e,n){e.moveTo(0,0),e.lineTo(0,-n)}},Gb={draw(e,n){e.moveTo(0,0),e.lineTo(-n,0)}},kb={draw(e,n){e.moveTo(0,0),e.lineTo(n,0)}};function Ts(e){return e.bandwidth&&e.interval===void 0?void 0:"tabular-nums"}function Qb(e){return Math.sign(nt(e.domain()))*Math.sign(nt(e.range()))}function $s(e,n,t){const r=n.label;if(n.bandwidth||!(r!=null&&r.inferred))return r;const a=Qb(n);return a?e==="x"||t==="center"?e==="x"==a<0?` ${r}`:`${r} `:`${a<0?" ":" "}${r}`:r}const Kb={ariaLabel:"frame",fill:"none",stroke:"currentColor"},Xb={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square"};class Jb extends Ze{constructor(n={}){const{anchor:t=null,inset:r=0,insetTop:a=r,insetRight:i=r,insetBottom:f=r,insetLeft:o=r,rx:c,ry:u}=n;super(void 0,void 0,n,t==null?Kb:Xb),this.anchor=cu(t,"anchor",["top","right","bottom","left"]),this.insetTop=J(a),this.insetRight=J(i),this.insetBottom=J(f),this.insetLeft=J(o),this.rx=J(c),this.ry=J(u)}render(n,t,r,a,i){const{marginTop:f,marginRight:o,marginBottom:c,marginLeft:u,width:s,height:h}=a,{anchor:d,insetTop:l,insetRight:m,insetBottom:b,insetLeft:p,rx:y,ry:M}=this,w=u+p,g=s-o-m,T=f+l,$=h-c-b;return _e(d?"svg:line":"svg:rect",i).call(lt,this,a,i).call(dt,this).call(ht,this,{}).call(d==="left"?A=>A.attr("x1",w).attr("x2",w).attr("y1",T).attr("y2",$):d==="right"?A=>A.attr("x1",g).attr("x2",g).attr("y1",T).attr("y2",$):d==="top"?A=>A.attr("x1",w).attr("x2",g).attr("y1",T).attr("y2",T):d==="bottom"?A=>A.attr("x1",w).attr("x2",g).attr("y1",$).attr("y2",$):A=>A.attr("x",w).attr("y",T).attr("width",g-w).attr("height",$-T).attr("rx",y).attr("ry",M)).node()}}function e2(e){return new Jb(e)}function n2(e={}){const{facet:n,style:t,caption:r,ariaLabel:a,ariaDescription:i}=e,f=ai(e.className),o=e.marks===void 0?[]:pf(e.marks),c=f2(n,e),u=new Map;for(const C of o){const x=gf(C,c,e);x&&u.set(C,x)}const s=new Map;c&&Pn(s,[c]),Pn(s,u);const h=pf(o2(o,s,e));for(const C of h){const x=gf(C,c,e);x&&u.set(C,x)}o.unshift(...h);const d=qh(s,e);if(d!==void 0){const C=c?Kr(d,c):void 0;for(const D of o){if(D.facet===null||D.facet==="super")continue;const E=u.get(D);E!==void 0&&(E.facetsIndex=D.fx!=null||D.fy!=null?Kr(d,E):C)}const x=new Set;for(const{facetsIndex:D}of u.values())D==null||D.forEach((E,O)=>{(E==null?void 0:E.length)>0&&x.add(O)});d.forEach(0<x.size&&x.size<d.length?(D,E)=>D.empty=!x.has(E):D=>D.empty=!1);for(const D of o)if(D.facet==="exclude"){const E=u.get(D);E!==void 0&&(E.facetsIndex=Yh(E.facetsIndex))}}for(const C of H.keys())wa(e[C])&&C!=="fx"&&C!=="fy"&&s.set(C,[]);const l=new Map;for(const C of o){if(l.has(C))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:x,channels:D}=u.get(C)??{},{data:E,facets:O,channels:V}=C.initialize(x,D);ci(V,e),l.set(C,{data:E,facets:O,channels:V})}const m=$a(Pn(s,l),e),b=af(m),p=Oh(m,o,e);sh(m,p);const{fx:y,fy:M}=b,w=y||M?Uu(m,p):p,g=y||M?b2(b,p):p,T=Ja(e,w),$=new Set;for(const[C,x]of l)if(C.initializer!=null){const D=C.facet==="super"?g:w,E=C.initializer(x.data,x.facets,x.channels,b,D,T);if(E.data!==void 0&&(x.data=E.data),E.facets!==void 0&&(x.facets=E.facets),E.channels!==void 0){i2(E.channels),Object.assign(x.channels,E.channels);for(const _ of Object.values(E.channels)){const{scale:B}=_;B!=null&&H.get(B)!==Te&&(xs(_,e),$.add(B))}const{fx:O,fy:V}=E.channels;if(O!=null||V!=null){const _=u.get(C)??{channels:{}};O!=null&&(_.channels.fx=O),V!=null&&(_.channels.fy=V),_.groups=fi(x.data,_.channels),_.facetsIndex=x.facets=Kr(d,_),u.set(C,_)}}}if($.size){const C=new Map;Pn(C,l,E=>$.has(E)),Pn(s,l,E=>$.has(E));const x=h2($a(C,e),m),D=af(x);Object.assign(m,x),Object.assign(b,D)}for(const[C,x]of l)x.values=C.scale(x.channels,b,T);const{width:A,height:I}=p,U=_e("svg",T).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",A).attr("height",I).attr("viewBox",`0 0 ${A} ${I}`).attr("aria-label",a).attr("aria-description",i).call(C=>C.append("style").text(`
        .${f} {
          display: block;
          background: white;
          height: auto;
          height: intrinsic;
          max-width: 100%;
        }
        .${f} text,
        .${f} tspan {
          white-space: pre;
        }
      `)).call(ii,t).node();if(d!==void 0){const C={x:y==null?void 0:y.domain(),y:M==null?void 0:M.domain()};d.sort(Wh(C)),Xr(U).selectAll().data(d).enter().append("g").attr("aria-label","facet").attr("transform",Ph(y,M,p)).each(function(x){var E;let D=!0;for(const O of o){if(O.facet==="super")continue;const{channels:V,values:_,facets:B}=l.get(O);if(!(((E=O.facetAnchor)==null?void 0:E.call(O,d,C,x))??!x.empty))continue;let X=null;if(B){if(X=B[u.has(O)?x.i:0],X=O.filter(X,V,_),X.length===0)continue;X.fi=x.i}const sn=O.render(X,b,_,w,T);sn!=null&&(D=!1,this.appendChild(sn))}D&&this.remove()})}for(const C of o){if(d!==void 0&&C.facet!=="super")continue;const{channels:x,values:D,facets:E}=l.get(C);let O=null;if(E&&(O=E[0],O=C.filter(O,x,D),O.length===0))continue;const V=C.render(O,b,D,g,T);V!=null&&U.appendChild(V)}let z=U;const te=nb(m,T,e);if(r!=null||te.length>0){const{document:C}=T;z=C.createElement("figure"),z.style.maxWidth="initial";for(const x of te)z.appendChild(x);if(z.appendChild(U),r!=null){const x=C.createElement("figcaption");x.appendChild(r instanceof Node?r:C.createTextNode(r)),z.appendChild(x)}}z.scale=gh(m),z.legend=Xh(m,T,e);const W=S1();return W>0&&Xr(U).append("text").attr("x",A).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${W.toLocaleString("en-US")} warning${W===1?"":"s"}. Please check the console.`),z}function t2({marks:e=[],...n}={}){return n2({...n,marks:[...e,this]})}Ze.prototype.plot=t2;function pf(e){return e.flat(1/0).filter(n=>n!=null).map(r2)}function r2(e){return typeof e.render=="function"?e:new a2(e)}class a2 extends Ze{constructor(n){if(typeof n!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=n}render(){}}function ci(e,n){for(const t in e)xs(e[t],n);return e}function xs(e,n){var o;const{scale:t}=e;if(t==null)return;const{type:r,percent:a,interval:i,transform:f=a?c=>c*100:(o=Za(i,r))==null?void 0:o.floor}=n[t]??{};f!=null&&(e.value=ee(e.value,f))}function i2(e){for(const n in e)yu(n,e[n])}function Pn(e,n,t=P0){for(const{channels:r}of n.values())for(const a in r){const i=r[a],{scale:f}=i;if(f!=null&&t(f)){const o=e.get(f);o!==void 0?o.push(i):e.set(f,[i])}}return e}function f2(e,n){if(e==null)return;const{x:t,y:r}=e;if(t==null&&r==null)return;const a=De(e.data??t??r);if(a===void 0)throw new Error("missing facet data");const i={};t!=null&&(i.fx=tt(a,{value:t,scale:"fx"})),r!=null&&(i.fy=tt(a,{value:r,scale:"fy"})),ci(i,n);const f=fi(a,i);return{channels:i,groups:f,data:e.data}}function gf(e,n,t){var c;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:a}=e;if(r!=null||a!=null){const u=De(e.data??r??a);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const s={};return r!=null&&(s.fx=tt(u,{value:r,scale:"fx"})),a!=null&&(s.fy=tt(u,{value:a,scale:"fy"})),ci(s,t),{channels:s,groups:fi(u,s)}}if(n===void 0)return;const{channels:i,groups:f,data:o}=n;if(e.facet!=="auto"||e.data===o)return{channels:i,groups:f};(f.size>1||f.size===1&&i.fx&&i.fy&&[...f][0][1].size>1)&&((c=De(e.data))==null?void 0:c.length)===o.length&&yn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function o2(e,n,t){let{projection:r,x:a={},y:i={},fx:f={},fy:o={},axis:c,grid:u,facet:s={},facet:{axis:h=c,grid:d}=s,x:{axis:l=c,grid:m=l===null?null:u}=a,y:{axis:b=c,grid:p=b===null?null:u}=i,fx:{axis:y=h,grid:M=y===null?null:d}=f,fy:{axis:w=h,grid:g=w===null?null:d}=o}=t;(r||!wa(a)&&!yf("x",e))&&(l=m=null),(r||!wa(i)&&!yf("y",e))&&(b=p=null),n.has("fx")||(y=M=null),n.has("fy")||(w=g=null),l===void 0&&(l=!Tt(e,"x")),b===void 0&&(b=!Tt(e,"y")),y===void 0&&(y=!Tt(e,"fx")),w===void 0&&(w=!Tt(e,"fy")),l===!0&&(l="bottom"),b===!0&&(b="left"),y===!0&&(y=l==="top"||l===null?"bottom":"top"),w===!0&&(w=b==="right"||b===null?"left":"right");const T=[];return Mt(T,g,Hb,o),vt(T,w,Ob,"right","left",s,o),Mt(T,M,_b,f),vt(T,y,Fb,"top","bottom",s,f),Mt(T,p,Bb,i),vt(T,b,bs,"left","right",t,i),Mt(T,m,zb,a),vt(T,l,ms,"bottom","top",t,a),T}function vt(e,n,t,r,a,i,f){if(!n)return;const o=c2(n);f=u2(o?r:n,i,f);const{line:c}=f;(t===bs||t===ms)&&c&&!et(c)&&e.push(e2(s2(f))),e.push(t(f)),o&&e.push(t({...f,anchor:a,label:null}))}function Mt(e,n,t,r){!n||et(n)||e.push(t(l2(n,r)))}function c2(e){return/^\s*both\s*$/i.test(e)}function u2(e,n,{line:t=n.line,ticks:r,tickSize:a,tickSpacing:i,tickPadding:f,tickFormat:o,tickRotate:c,fontVariant:u,ariaLabel:s,ariaDescription:h,label:d=n.label,labelAnchor:l,labelOffset:m}){return{anchor:e,line:t,ticks:r,tickSize:a,tickSpacing:i,tickPadding:f,tickFormat:o,tickRotate:c,fontVariant:u,ariaLabel:s,ariaDescription:h,label:d,labelAnchor:l,labelOffset:m}}function s2(e){const{anchor:n,line:t}=e;return{anchor:n,facetAnchor:n+"-empty",stroke:t===!0?void 0:t}}function l2(e,{stroke:n=lr(e)?e:void 0,ticks:t=d2(e)?e:void 0,tickSpacing:r,ariaLabel:a,ariaDescription:i}){return{stroke:n,ticks:t,tickSpacing:r,ariaLabel:a,ariaDescription:i}}function d2(e){switch(typeof e){case"number":return!0;case"string":return!lr(e)}return cn(e)||typeof(e==null?void 0:e.range)=="function"}function Tt(e,n){const t=`${n}-axis `;return e.some(r=>{var a;return(a=r.ariaLabel)==null?void 0:a.startsWith(t)})}function yf(e,n){for(const t of n)for(const r in t.channels)if(t.channels[r].scale===e)return!0;return!1}function h2(e,n){for(const t in e){const r=e[t],a=n[t];r.label===void 0&&a&&(r.label=a.label)}return e}function b2({fx:e,fy:n},t){const{marginTop:r,marginRight:a,marginBottom:i,marginLeft:f,width:o,height:c}=ri(t),u=e&&wf(e),s=n&&wf(n);return{marginTop:n?s[0]:r,marginRight:e?o-u[1]:a,marginBottom:n?c-s[1]:i,marginLeft:e?u[0]:f,inset:{marginTop:t.marginTop,marginRight:t.marginRight,marginBottom:t.marginBottom,marginLeft:t.marginLeft},width:o,height:c}}function wf(e){const n=e.domain();let t=e(n[0]),r=e(n[n.length-1]);return r<t&&([t,r]=[r,t]),[t,r+e.bandwidth()]}export{P2 as $,e2 as A,Et as B,sl as C,Vu as D,B2 as E,xn as F,b1 as G,va as H,Ga as I,Ln as J,ct as K,I0 as L,Ze as M,H2 as N,c1 as O,s1 as P,mu as Q,_2 as R,z2 as S,j2 as T,we as U,ee as V,H0 as W,ed as X,cn as Y,pu as Z,z0 as _,lt as a,_a as a0,lu as a1,Ha as a2,es as a3,Y2 as a4,he as a5,Pu as a6,fu as a7,ce as a8,Lh as a9,et as aa,pr as ab,V2 as ac,Jn as ad,ht as b,_e as c,dt as d,vr as e,Ht as f,to as g,O2 as h,He as i,F2 as j,q2 as k,su as l,W2 as m,du as n,I2 as o,n2 as p,nr as q,ot as r,er as s,ts as t,tn as u,Be as v,q0 as w,G2 as x,Z2 as y,W0 as z};
