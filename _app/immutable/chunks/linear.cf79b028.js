import{v as X}from"./transform.d20dec0c.js";import{e as N,i as Y,a as D,b as G,f as J}from"./defaultLocale.fc9d1b67.js";import{a as S}from"./ascending.3ff63084.js";import{i as K}from"./init.a5b10ee5.js";function Q(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function O(n){let t,i,e;n.length!==2?(t=S,i=(o,a)=>S(n(o),a),e=(o,a)=>n(o)-a):(t=n===S||n===Q?n:U,i=n,e=n);function l(o,a,r=0,m=o.length){if(r<m){if(t(a,a)!==0)return m;do{const h=r+m>>>1;i(o[h],a)<0?r=h+1:m=h}while(r<m)}return r}function c(o,a,r=0,m=o.length){if(r<m){if(t(a,a)!==0)return m;do{const h=r+m>>>1;i(o[h],a)<=0?r=h+1:m=h}while(r<m)}return r}function u(o,a,r=0,m=o.length){const h=l(o,a,r,m-1);return h>r&&e(o[h-1],a)>-e(o[h],a)?h-1:h}return{left:l,center:u,right:c}}function U(){return 0}function W(n){return n===null?NaN:+n}function*Hn(n,t){if(t===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(yield i);else{let i=-1;for(let e of n)(e=t(e,++i,n))!=null&&(e=+e)>=e&&(yield e)}}const Z=O(S),nn=Z.right;O(W).center;const tn=nn,rn=Math.sqrt(50),en=Math.sqrt(10),an=Math.sqrt(2);function P(n,t,i){const e=(t-n)/Math.max(0,i),l=Math.floor(Math.log10(e)),c=e/Math.pow(10,l),u=c>=rn?10:c>=en?5:c>=an?2:1;let o,a,r;return l<0?(r=Math.pow(10,-l)/u,o=Math.round(n*r),a=Math.round(t*r),o/r<n&&++o,a/r>t&&--a,r=-r):(r=Math.pow(10,l)*u,o=Math.round(n/r),a=Math.round(t/r),o*r<n&&++o,a*r>t&&--a),a<o&&.5<=i&&i<2?P(n,t,i*2):[o,a,r]}function un(n,t,i){if(t=+t,n=+n,i=+i,!(i>0))return[];if(n===t)return[n];const e=t<n,[l,c,u]=e?P(t,n,i):P(n,t,i);if(!(c>=l))return[];const o=c-l+1,a=new Array(o);if(e)if(u<0)for(let r=0;r<o;++r)a[r]=(c-r)/-u;else for(let r=0;r<o;++r)a[r]=(c-r)*u;else if(u<0)for(let r=0;r<o;++r)a[r]=(l+r)/-u;else for(let r=0;r<o;++r)a[r]=(l+r)*u;return a}function _(n,t,i){return t=+t,n=+n,i=+i,P(n,t,i)[2]}function on(n,t,i){t=+t,n=+n,i=+i;const e=t<n,l=e?_(t,n,i):_(n,t,i);return(e?-1:1)*(l<0?1/-l:l)}function fn(n){return n}var R=1,V=2,$=3,w=4,B=1e-6;function ln(n){return"translate("+n+",0)"}function cn(n){return"translate(0,"+n+")"}function sn(n){return t=>+n(t)}function mn(n,t){return t=Math.max(0,n.bandwidth()-t*2)/2,n.round()&&(t=Math.round(t)),i=>+n(i)+t}function hn(){return!this.__axis}function q(n,t){var i=[],e=null,l=null,c=6,u=6,o=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,r=n===R||n===w?-1:1,m=n===w||n===V?"x":"y",h=n===R||n===$?ln:cn;function f(s){var L=e??(t.ticks?t.ticks.apply(t,i):t.domain()),T=l??(t.tickFormat?t.tickFormat.apply(t,i):fn),j=Math.max(c,0)+o,H=t.range(),b=+H[0]+a,x=+H[H.length-1]+a,A=(t.bandwidth?mn:sn)(t.copy(),a),k=s.selection?s.selection():s,p=k.selectAll(".domain").data([null]),g=k.selectAll(".tick").data(L,t).order(),I=g.exit(),F=g.enter().append("g").attr("class","tick"),v=g.select("line"),y=g.select("text");p=p.merge(p.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),g=g.merge(F),v=v.merge(F.append("line").attr("stroke","currentColor").attr(m+"2",r*c)),y=y.merge(F.append("text").attr("fill","currentColor").attr(m,r*j).attr("dy",n===R?"0em":n===$?"0.71em":"0.32em")),s!==k&&(p=p.transition(s),g=g.transition(s),v=v.transition(s),y=y.transition(s),I=I.transition(s).attr("opacity",B).attr("transform",function(d){return isFinite(d=A(d))?h(d+a):this.getAttribute("transform")}),F.attr("opacity",B).attr("transform",function(d){var z=this.parentNode.__axis;return h((z&&isFinite(z=z(d))?z:A(d))+a)})),I.remove(),p.attr("d",n===w||n===V?u?"M"+r*u+","+b+"H"+a+"V"+x+"H"+r*u:"M"+a+","+b+"V"+x:u?"M"+b+","+r*u+"V"+a+"H"+x+"V"+r*u:"M"+b+","+a+"H"+x),g.attr("opacity",1).attr("transform",function(d){return h(A(d)+a)}),v.attr(m+"2",r*c),y.attr(m,r*j).text(T),k.filter(hn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===V?"start":n===w?"end":"middle"),k.each(function(){this.__axis=A})}return f.scale=function(s){return arguments.length?(t=s,f):t},f.ticks=function(){return i=Array.from(arguments),f},f.tickArguments=function(s){return arguments.length?(i=s==null?[]:Array.from(s),f):i.slice()},f.tickValues=function(s){return arguments.length?(e=s==null?null:Array.from(s),f):e&&e.slice()},f.tickFormat=function(s){return arguments.length?(l=s,f):l},f.tickSize=function(s){return arguments.length?(c=u=+s,f):c},f.tickSizeInner=function(s){return arguments.length?(c=+s,f):c},f.tickSizeOuter=function(s){return arguments.length?(u=+s,f):u},f.tickPadding=function(s){return arguments.length?(o=+s,f):o},f.offset=function(s){return arguments.length?(a=+s,f):a},f}function In(n){return q(R,n)}function _n(n){return q(V,n)}function $n(n){return q($,n)}function Cn(n){return q(w,n)}function gn(n,t){return n=+n,t=+t,function(i){return Math.round(n*(1-i)+t*i)}}function dn(n){return Math.max(0,-N(Math.abs(n)))}function pn(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(N(t)/3)))*3-N(Math.abs(n)))}function Mn(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,N(t)-N(n))+1}function kn(n){return function(){return n}}function vn(n){return+n}var E=[0,1];function M(n){return n}function C(n,t){return(t-=n=+n)?function(i){return(i-n)/t}:kn(isNaN(t)?NaN:.5)}function yn(n,t){var i;return n>t&&(i=n,n=t,t=i),function(e){return Math.max(n,Math.min(t,e))}}function wn(n,t,i){var e=n[0],l=n[1],c=t[0],u=t[1];return l<e?(e=C(l,e),c=i(u,c)):(e=C(e,l),c=i(c,u)),function(o){return c(e(o))}}function Nn(n,t,i){var e=Math.min(n.length,t.length)-1,l=new Array(e),c=new Array(e),u=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<e;)l[u]=C(n[u],n[u+1]),c[u]=i(t[u],t[u+1]);return function(o){var a=tn(n,o,1,e)-1;return c[a](l[a](o))}}function bn(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function xn(){var n=E,t=E,i=Y,e,l,c,u=M,o,a,r;function m(){var f=Math.min(n.length,t.length);return u!==M&&(u=yn(n[0],n[f-1])),o=f>2?Nn:wn,a=r=null,h}function h(f){return f==null||isNaN(f=+f)?c:(a||(a=o(n.map(e),t,i)))(e(u(f)))}return h.invert=function(f){return u(l((r||(r=o(t,n.map(e),X)))(f)))},h.domain=function(f){return arguments.length?(n=Array.from(f,vn),m()):n.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),m()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),i=gn,m()},h.clamp=function(f){return arguments.length?(u=f?!0:M,m()):u!==M},h.interpolate=function(f){return arguments.length?(i=f,m()):i},h.unknown=function(f){return arguments.length?(c=f,h):c},function(f,s){return e=f,l=s,m()}}function An(){return xn()(M,M)}function Fn(n,t,i,e){var l=on(n,t,i),c;switch(e=D(e??",f"),e.type){case"s":{var u=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(c=pn(l,u))&&(e.precision=c),G(e,u)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(c=Mn(l,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=c-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(c=dn(l))&&(e.precision=c-(e.type==="%")*2);break}}return J(e)}function zn(n){var t=n.domain;return n.ticks=function(i){var e=t();return un(e[0],e[e.length-1],i??10)},n.tickFormat=function(i,e){var l=t();return Fn(l[0],l[l.length-1],i??10,e)},n.nice=function(i){i==null&&(i=10);var e=t(),l=0,c=e.length-1,u=e[l],o=e[c],a,r,m=10;for(o<u&&(r=u,u=o,o=r,r=l,l=c,c=r);m-- >0;){if(r=_(u,o,i),r===a)return e[l]=u,e[c]=o,t(e);if(r>0)u=Math.floor(u/r)*r,o=Math.ceil(o/r)*r;else if(r<0)u=Math.ceil(u*r)/r,o=Math.floor(o*r)/r;else break;a=r}return n},n}function Sn(){var n=An();return n.copy=function(){return bn(n,Sn())},K.apply(n,arguments),zn(n)}export{W as a,vn as b,bn as c,tn as d,O as e,on as f,An as g,gn as h,M as i,Q as j,Sn as k,zn as l,un as m,Hn as n,$n as o,In as p,Cn as q,_n as r,xn as t};
