import{S as Ye,i as je,s as qe,k as g,q as I,a as V,M as ce,J as Oe,l as m,m as _,r as k,h as i,c as x,N as fe,n as p,H as t,b as N,O as Le,u as Ee,C as Ie,L as He,P as Ue,o as Qe}from"../chunks/index.06a14631.js";import"../chunks/transform.2ac1f063.js";import{s as Re}from"../chunks/select.c6d05060.js";import{r as We}from"../chunks/range.6bc2a9a0.js";function Ne(n,l,s){const c=n.slice();return c[17]=l[s],c}function Be(n,l,s){const c=n.slice();return c[20]=l[s],c}function Ge(n){let l,s,c,u,f=n[20]+"",D,A,w,B;return{c(){l=g("label"),s=g("input"),u=V(),D=I(f),A=V(),this.h()},l(d){l=m(d,"LABEL",{});var y=_(l);s=m(y,"INPUT",{type:!0,name:!0}),u=x(y),D=k(y,f),A=x(y),y.forEach(i),this.h()},h(){p(s,"type","radio"),p(s,"name","gender"),s.value=n[20],s.checked=c=n[1]===n[20]},m(d,y){N(d,l,y),t(l,s),t(l,u),t(l,D),t(l,A),w||(B=Le(s,"change",n[6]),w=!0)},p(d,y){y&2&&c!==(c=d[1]===d[20])&&(s.checked=c)},d(d){d&&i(l),w=!1,B()}}}function Me(n){let l,s=n[17]+"",c;return{c(){l=g("option"),c=I(s),this.h()},l(u){l=m(u,"OPTION",{});var f=_(l);c=k(f,s),f.forEach(i),this.h()},h(){l.__value=n[17],l.value=l.__value},m(u,f){N(u,l,f),t(l,c)},p:Ie,d(u){u&&i(l)}}}function ze(n){let l,s,c,u,f,D,A,w,B,d,y,F,U,P,q,H,Y,J,K,r,b,o,h,T,X=n[2]-n[3]+"",$,he,ee,de,te,ve,le,C,ae,re,Q,_e,ne,G,pe,ge,me,R,ye,be,Ae,W=n[5],E=[];for(let e=0;e<W.length;e+=1)E[e]=Ge(Be(n,W,e));let z=n[4],L=[];for(let e=0;e<z.length;e+=1)L[e]=Me(Ne(n,z,e));return{c(){l=g("style"),s=I(`body {
        background-color: lightgoldenrodyellow;
    }`),c=V(),u=g("div"),f=g("div"),D=g("label"),A=I("Gender:"),w=V();for(let e=0;e<E.length;e+=1)E[e].c();B=V(),d=g("div"),y=g("label"),F=I("Country:"),U=V(),P=g("select");for(let e=0;e<L.length;e+=1)L[e].c();q=V(),H=g("div"),Y=g("label"),J=I("Age:"),K=V(),r=g("input"),b=V(),o=g("div"),h=g("h1"),T=I("You have "),$=I(X),he=I(" years left to  live in average*, for a "),ee=I(n[1]),de=I(" living in "),te=I(n[0]),ve=I("."),le=V(),C=ce("svg"),ae=ce("path"),re=ce("line"),Q=ce("text"),_e=I("You are here"),ne=V(),G=g("div"),pe=I("*If the life expectancy does not change."),ge=g("br"),me=I(`
    Data Source: `),R=g("a"),ye=I("Ined"),this.h()},l(e){const v=Oe("svelte-slbgj8",document.head);l=m(v,"STYLE",{});var a=_(l);s=k(a,`body {
        background-color: lightgoldenrodyellow;
    }`),a.forEach(i),v.forEach(i),c=x(e),u=m(e,"DIV",{id:!0});var S=_(u);f=m(S,"DIV",{class:!0});var oe=_(f);D=m(oe,"LABEL",{for:!0});var we=_(D);A=k(we,"Gender:"),we.forEach(i),w=x(oe);for(let O=0;O<E.length;O+=1)E[O].l(oe);oe.forEach(i),B=x(S),d=m(S,"DIV",{class:!0});var ie=_(d);y=m(ie,"LABEL",{});var Ce=_(y);F=k(Ce,"Country:"),Ce.forEach(i),U=x(ie),P=m(ie,"SELECT",{});var Se=_(P);for(let O=0;O<L.length;O+=1)L[O].l(Se);Se.forEach(i),ie.forEach(i),q=x(S),H=m(S,"DIV",{class:!0});var se=_(H);Y=m(se,"LABEL",{for:!0});var Pe=_(Y);J=k(Pe,"Age:"),Pe.forEach(i),K=x(se),r=m(se,"INPUT",{type:!0,id:!0,name:!0}),se.forEach(i),S.forEach(i),b=x(e),o=m(e,"DIV",{id:!0,class:!0});var Te=_(o);h=m(Te,"H1",{});var j=_(h);T=k(j,"You have "),$=k(j,X),he=k(j," years left to  live in average*, for a "),ee=k(j,n[1]),de=k(j," living in "),te=k(j,n[0]),ve=k(j,"."),j.forEach(i),Te.forEach(i),le=x(e),C=fe(e,"svg",{id:!0,width:!0,height:!0,class:!0});var ue=_(C);ae=fe(ue,"path",{}),_(ae).forEach(i),re=fe(ue,"line",{}),_(re).forEach(i),Q=fe(ue,"text",{id:!0});var Ve=_(Q);_e=k(Ve,"You are here"),Ve.forEach(i),ue.forEach(i),ne=x(e),G=m(e,"DIV",{});var Z=_(G);pe=k(Z,"*If the life expectancy does not change."),ge=m(Z,"BR",{}),me=k(Z,`
    Data Source: `),R=m(Z,"A",{href:!0});var xe=_(R);ye=k(xe,"Ined"),xe.forEach(i),Z.forEach(i),this.h()},h(){p(D,"for","gender"),p(f,"class","option svelte-2ea9t3"),p(d,"class","option svelte-2ea9t3"),p(Y,"for","age"),p(r,"type","number"),p(r,"id","age"),p(r,"name","age"),r.value=n[3],p(H,"class","option svelte-2ea9t3"),p(u,"id","options"),p(o,"id","main-text"),p(o,"class","svelte-2ea9t3"),p(Q,"id","path-text"),p(C,"id","vis"),p(C,"width",De+600),p(C,"height",Fe),p(C,"class","svelte-2ea9t3"),p(R,"href","https://www.ined.fr/en/everything_about_population/data/europe-developed-countries/life-expectancy/")},m(e,v){t(document.head,l),t(l,s),N(e,c,v),N(e,u,v),t(u,f),t(f,D),t(D,A),t(f,w);for(let a=0;a<E.length;a+=1)E[a]&&E[a].m(f,null);t(u,B),t(u,d),t(d,y),t(y,F),t(d,U),t(d,P);for(let a=0;a<L.length;a+=1)L[a]&&L[a].m(P,null);t(u,q),t(u,H),t(H,Y),t(Y,J),t(H,K),t(H,r),N(e,b,v),N(e,o,v),t(o,h),t(h,T),t(h,$),t(h,he),t(h,ee),t(h,de),t(h,te),t(h,ve),N(e,le,v),N(e,C,v),t(C,ae),t(C,re),t(C,Q),t(Q,_e),N(e,ne,v),N(e,G,v),t(G,pe),t(G,ge),t(G,me),t(G,R),t(R,ye),be||(Ae=[Le(P,"change",n[7]),Le(r,"input",n[8])],be=!0)},p(e,[v]){if(v&98){W=e[5];let a;for(a=0;a<W.length;a+=1){const S=Be(e,W,a);E[a]?E[a].p(S,v):(E[a]=Ge(S),E[a].c(),E[a].m(f,null))}for(;a<E.length;a+=1)E[a].d(1);E.length=W.length}if(v&16){z=e[4];let a;for(a=0;a<z.length;a+=1){const S=Ne(e,z,a);L[a]?L[a].p(S,v):(L[a]=Me(S),L[a].c(),L[a].m(P,null))}for(;a<L.length;a+=1)L[a].d(1);L.length=z.length}v&8&&r.value!==e[3]&&(r.value=e[3]),v&12&&X!==(X=e[2]-e[3]+"")&&Ee($,X),v&2&&Ee(ee,e[1]),v&1&&Ee(te,e[0])},i:Ie,o:Ie,d(e){i(l),e&&i(c),e&&i(u),He(E,e),He(L,e),e&&i(b),e&&i(o),e&&i(le),e&&i(C),e&&i(ne),e&&i(G),be=!1,Ue(Ae)}}}const ke=30,M=70,De=1e3,Fe=1e3;function Je(){return De/(M+ke)}function Ke(n){return n.filter(l=>l[0]&&l[1]&&l[2]&&l[3])}function Xe(n,l,s){let{data:c}=l,u="France",f="male",D,A=20,w,B=Ke(c.data);const d=B.map(r=>r[0]).filter(r=>r!="Country");d.sort();const y=["male","female"];Qe(()=>{U(w)});function F(r,b){let o=B.filter(T=>T[0]==r)[0],h;return b=="male"?h=o[2]:h=o[3],Math.round(Number(h))}function U(r){let b=Re("#vis");b.selectAll("rect").data(r).join("rect").attr("width",M).attr("height",M).attr("x",o=>P(o)).attr("y",o=>q(o)).style("fill",o=>o.isLived==1?"rgb(149,225,177)":o.isLived==.5?"rgb(172,176,255)":"white").attr("stroke","black").attr("stroke-width",o=>o.isLived==.5?6:o.isLived==1?3:1),b.selectAll(".text").data(r).join("text").classed("text",!0).text(o=>o.isLived==.5||o.year==D?o.year:"").attr("x",o=>P(o)+M/3.8).attr("y",o=>q(o)+2*M/3.2).attr("font-size","2em"),b.select("path").attr("d",()=>{let o=P({year:A}),h=q({year:A});return`M ${o+M},${h+M/2}
           Q 1100,220 1100,300`}).attr("stroke","black").attr("stroke-width",3).attr("fill","none").raise(),b.select("#path-text").attr("x",()=>1110).attr("y",()=>310)}const P=r=>((r.year-1)*M+(r.year-1)*ke)%De,q=r=>{let b=Math.floor((r.year-1)/Je())+1;return b*M+(b-1)*ke};function H(r,b){return We(1,b+1).map(h=>{let T;return r==h?T=.5:r>h?T=1:T=0,{year:h,isLived:T}})}const Y=r=>{s(1,f=r.target.value)},J=r=>{s(0,u=r.target.value)},K=r=>{s(3,A=parseInt(r.target.value))};return n.$$set=r=>{"data"in r&&s(9,c=r.data)},n.$$.update=()=>{n.$$.dirty&3&&s(2,D=F(u,f)),n.$$.dirty&12&&s(10,w=H(A,D)),n.$$.dirty&1024&&U(w)},[u,f,D,A,d,y,Y,J,K,c,w]}class lt extends Ye{constructor(l){super(),je(this,l,Xe,ze,qe,{data:9})}}export{lt as default};
