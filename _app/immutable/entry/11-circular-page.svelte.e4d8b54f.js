import{S as be,i as Re,s as Ee,k as j,q as K,a as me,M as Ce,l as V,m as L,r as F,h as z,c as ge,N as Pe,n as N,p as Se,b as $e,H as O,C as ue,R as he,o as we}from"../chunks/index.06a14631.js";import"../chunks/transform.2ac1f063.js";import{w as Me,c as T,a as De}from"../chunks/array.5d986d8c.js";import{p as pe,c as B,a as _,h as ye,e as k,t as re,s as J,m as de,b as xe,d as H,f as ve,g as He,i as Oe}from"../chunks/math.66d62dd6.js";import{o as Te}from"../chunks/ordinal.9aa01bae.js";import{s as ke}from"../chunks/select.c6d05060.js";import{f as Ne}from"../chunks/defaultLocale.c00e5010.js";function _e(u){return u.innerRadius}function Ie(u){return u.outerRadius}function ze(u){return u.startAngle}function je(u){return u.endAngle}function Ve(u){return u&&u.padAngle}function Le(u,c,A,R,l,E,i,e){var h=A-u,o=R-c,t=i-l,v=e-E,n=v*h-t*o;if(!(n*n<k))return n=(t*(c-E)-v*(u-l))/n,[u+n*h,c+n*o]}function ee(u,c,A,R,l,E,i){var e=u-A,h=c-R,o=(i?E:-E)/J(e*e+h*h),t=o*h,v=-o*e,n=u+t,d=c+v,y=A+t,p=R+v,$=(n+y)/2,m=(d+p)/2,b=y-n,C=p-d,P=b*b+C*C,g=l-E,w=n*p-y*d,M=(C<0?-1:1)*J(Oe(0,g*g*P-w*w)),S=(w*C-b*M)/P,a=(-w*b-C*M)/P,f=(w*C+b*M)/P,r=(-w*b+C*M)/P,D=S-$,s=a-m,x=f-$,q=r-m;return D*D+s*s>x*x+q*q&&(S=f,a=r),{cx:S,cy:a,x01:-t,y01:-v,x11:S*(l/g-1),y11:a*(l/g-1)}}function te(){var u=_e,c=Ie,A=T(0),R=null,l=ze,E=je,i=Ve,e=null,h=Me(o);function o(){var t,v,n=+u.apply(this,arguments),d=+c.apply(this,arguments),y=l.apply(this,arguments)-ye,p=E.apply(this,arguments)-ye,$=xe(p-y),m=p>y;if(e||(e=t=h()),d<n&&(v=d,d=n,n=v),!(d>k))e.moveTo(0,0);else if($>re-k)e.moveTo(d*B(y),d*_(y)),e.arc(0,0,d,y,p,!m),n>k&&(e.moveTo(n*B(p),n*_(p)),e.arc(0,0,n,p,y,m));else{var b=y,C=p,P=y,g=p,w=$,M=$,S=i.apply(this,arguments)/2,a=S>k&&(R?+R.apply(this,arguments):J(n*n+d*d)),f=de(xe(d-n)/2,+A.apply(this,arguments)),r=f,D=f,s,x;if(a>k){var q=ve(a/n*_(S)),Q=ve(a/d*_(S));(w-=q*2)>k?(q*=m?1:-1,P+=q,g-=q):(w=0,P=g=(y+p)/2),(M-=Q*2)>k?(Q*=m?1:-1,b+=Q,C-=Q):(M=0,b=C=(y+p)/2)}var G=d*B(b),W=d*_(b),U=n*B(g),X=n*_(g);if(f>k){var Y=d*B(C),Z=d*_(C),ne=n*B(P),ae=n*_(P),I;if($<pe)if(I=Le(G,W,ne,ae,Y,Z,U,X)){var se=G-I[0],le=W-I[1],ie=Y-I[0],oe=Z-I[1],ce=1/_(He((se*ie+le*oe)/(J(se*se+le*le)*J(ie*ie+oe*oe)))/2),fe=J(I[0]*I[0]+I[1]*I[1]);r=de(f,(n-fe)/(ce-1)),D=de(f,(d-fe)/(ce+1))}else r=D=0}M>k?D>k?(s=ee(ne,ae,G,W,d,D,m),x=ee(Y,Z,U,X,d,D,m),e.moveTo(s.cx+s.x01,s.cy+s.y01),D<f?e.arc(s.cx,s.cy,D,H(s.y01,s.x01),H(x.y01,x.x01),!m):(e.arc(s.cx,s.cy,D,H(s.y01,s.x01),H(s.y11,s.x11),!m),e.arc(0,0,d,H(s.cy+s.y11,s.cx+s.x11),H(x.cy+x.y11,x.cx+x.x11),!m),e.arc(x.cx,x.cy,D,H(x.y11,x.x11),H(x.y01,x.x01),!m))):(e.moveTo(G,W),e.arc(0,0,d,b,C,!m)):e.moveTo(G,W),!(n>k)||!(w>k)?e.lineTo(U,X):r>k?(s=ee(U,X,Y,Z,n,-r,m),x=ee(G,W,ne,ae,n,-r,m),e.lineTo(s.cx+s.x01,s.cy+s.y01),r<f?e.arc(s.cx,s.cy,r,H(s.y01,s.x01),H(x.y01,x.x01),!m):(e.arc(s.cx,s.cy,r,H(s.y01,s.x01),H(s.y11,s.x11),!m),e.arc(0,0,n,H(s.cy+s.y11,s.cx+s.x11),H(x.cy+x.y11,x.cx+x.x11),m),e.arc(x.cx,x.cy,r,H(x.y11,x.x11),H(x.y01,x.x01),!m))):e.arc(0,0,n,g,P,m)}if(e.closePath(),t)return e=null,t+""||null}return o.centroid=function(){var t=(+u.apply(this,arguments)+ +c.apply(this,arguments))/2,v=(+l.apply(this,arguments)+ +E.apply(this,arguments))/2-pe/2;return[B(v)*t,_(v)*t]},o.innerRadius=function(t){return arguments.length?(u=typeof t=="function"?t:T(+t),o):u},o.outerRadius=function(t){return arguments.length?(c=typeof t=="function"?t:T(+t),o):c},o.cornerRadius=function(t){return arguments.length?(A=typeof t=="function"?t:T(+t),o):A},o.padRadius=function(t){return arguments.length?(R=t==null?null:typeof t=="function"?t:T(+t),o):R},o.startAngle=function(t){return arguments.length?(l=typeof t=="function"?t:T(+t),o):l},o.endAngle=function(t){return arguments.length?(E=typeof t=="function"?t:T(+t),o):E},o.padAngle=function(t){return arguments.length?(i=typeof t=="function"?t:T(+t),o):i},o.context=function(t){return arguments.length?(e=t??null,o):e},o}function qe(u,c){return c<u?-1:c>u?1:c>=u?0:NaN}function Be(u){return u}function Ge(){var u=Be,c=qe,A=null,R=T(0),l=T(re),E=T(0);function i(e){var h,o=(e=De(e)).length,t,v,n=0,d=new Array(o),y=new Array(o),p=+R.apply(this,arguments),$=Math.min(re,Math.max(-re,l.apply(this,arguments)-p)),m,b=Math.min(Math.abs($)/o,E.apply(this,arguments)),C=b*($<0?-1:1),P;for(h=0;h<o;++h)(P=y[d[h]=h]=+u(e[h],h,e))>0&&(n+=P);for(c!=null?d.sort(function(g,w){return c(y[g],y[w])}):A!=null&&d.sort(function(g,w){return A(e[g],e[w])}),h=0,v=n?($-o*C)/n:0;h<o;++h,p=m)t=d[h],P=y[t],m=p+(P>0?P*v:0)+C,y[t]={data:e[t],index:h,value:P,startAngle:p,endAngle:m,padAngle:b};return y}return i.value=function(e){return arguments.length?(u=typeof e=="function"?e:T(+e),i):u},i.sortValues=function(e){return arguments.length?(c=e,A=null,i):c},i.sort=function(e){return arguments.length?(A=e,c=null,i):A},i.startAngle=function(e){return arguments.length?(R=typeof e=="function"?e:T(+e),i):R},i.endAngle=function(e){return arguments.length?(l=typeof e=="function"?e:T(+e),i):l},i.padAngle=function(e){return arguments.length?(E=typeof e=="function"?e:T(+e),i):E},i}function We(u){let c,A,R,l,E,i,e,h,o,t,v,n,d,y,p,$;return{c(){c=j("div"),A=j("div"),R=j("h1"),l=K("Atom composition of the human body"),E=me(),i=j("div"),e=K("Data Source: "),h=j("a"),o=K("Wikipedia"),t=K(`
            Layout: `),v=j("a"),n=K("D3JS"),d=j("br"),y=me(),p=j("div"),$=Ce("svg"),this.h()},l(m){c=V(m,"DIV",{id:!0,class:!0});var b=L(c);A=V(b,"DIV",{id:!0,class:!0});var C=L(A);R=V(C,"H1",{class:!0});var P=L(R);l=F(P,"Atom composition of the human body"),P.forEach(z),E=ge(C),i=V(C,"DIV",{id:!0,class:!0});var g=L(i);e=F(g,"Data Source: "),h=V(g,"A",{href:!0,style:!0});var w=L(h);o=F(w,"Wikipedia"),w.forEach(z),t=F(g,`
            Layout: `),v=V(g,"A",{href:!0});var M=L(v);n=F(M,"D3JS"),M.forEach(z),d=V(g,"BR",{}),g.forEach(z),C.forEach(z),y=ge(b),p=V(b,"DIV",{id:!0});var S=L(p);$=Pe(S,"svg",{width:!0,height:!0});var a=L($);a.forEach(z),S.forEach(z),b.forEach(z),this.h()},h(){N(R,"class","svelte-dwsl5b"),N(h,"href","https://en.wikipedia.org/wiki/Composition_of_the_human_body"),Se(h,"padding-right","8px"),N(v,"href","https://d3js.org/"),N(i,"id","data-source"),N(i,"class","svelte-dwsl5b"),N(A,"id","main-text"),N(A,"class","svelte-dwsl5b"),N($,"width",u[0]),N($,"height",u[1]),N(p,"id","graph"),N(c,"id","container"),N(c,"class","svelte-dwsl5b")},m(m,b){$e(m,c,b),O(c,A),O(A,R),O(R,l),O(A,E),O(A,i),O(i,e),O(i,h),O(h,o),O(i,t),O(i,v),O(v,n),O(i,d),O(c,y),O(c,p),O(p,$)},p:ue,i:ue,o:ue,d(m){m&&z(c)}}}const Ae=30;function Je(u,c,A){let{data:R}=c,l=R.data;console.log(l);const E={bottom:20,left:60,right:120,top:20},i=1800-E.left-E.right,e=1e3-E.top-E.bottom,h=e/2.4-30,o=h/3,t=o*.2+h*.6,v=Ge().padAngle(.03),n=te().innerRadius(o).outerRadius(h),d=te().innerRadius(t).outerRadius(t),y=te().innerRadius(t*2.4).outerRadius(t*1.05),p=te().innerRadius(t*2.2).outerRadius(t);let $,m=l.map(g=>he(g.percentmass)),b=l.map(g=>he(g.percentatoms));const C=Te().domain(l.map(g=>g.Element)).range(["rgb(152,193,239)","rgb(204,200,123)","rgb(164,182,192)","rgb(173,157,157)","rgb(255,255,255)","rgb(162,206,153)","rgb(245,225,24)","rgb(220,126,91)","rgb(99,115,189)","rgb(121,198,201)","rgb(207,159,210)","rgb(107,107,107)"]);we(()=>{$=ke("svg"),P()});function P(){let g=$.append("g").attr("transform",`translate(${i/2-i/4}, ${e/2})`);g.append("text").text("By mass").attr("font-weight","bold").attr("font-size","200%").attr("text-anchor","middle");let w=$.append("g").attr("transform",`translate(${i/2+i/4}, ${e/2})`);w.append("text").text("By number").attr("text-anchor","middle").attr("font-weight","bold").attr("font-size","200%"),w.append("text").text("of atoms").attr("text-anchor","middle").attr("font-weight","bold").attr("font-size","200%").attr("y","34"),g.append("g").attr("fill","#ccc").attr("stroke","#000").attr("stroke-width","1.5px").selectAll("path").data(v(m)).join("path").attr("d",n.cornerRadius(Ae)).attr("fill",(M,S)=>C(l[S].Element)),g.append("g").selectAll("text").data(v(m)).join(M=>{let S=M.append("g");return S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sodium"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sulfur","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>(n.centroid(a),0)).text((a,f)=>{let r=l[f].Element;return r=="Nitrogen"?"N":r=="Calcium"?"Ca":r=="Sulfur"?"S":r=="Potassium"?"K":r=="Phosphorus"?"P":r=="Sodium"?"Na":r=="Chlorine"?"Cl":r=="Magnesium"?"Mg":r=="All others"?"Others":r=="Hydrogen"?"Hydrogen (H)":r=="Carbon"?"Carbon (C)":r=="Oxygen"?"Oxygen (O)":l[f].Element}).attr("text-anchor","middle"),S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sodium"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sulfur","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>15).text((a,f)=>{let r=l[f].Element,D=a.value;return r=="All others"?"-0.1%":`${D}%`}).attr("text-anchor","middle").attr("font-size","80%"),S}).attr("font-weight","bold").attr("font-size","18px"),w.append("g").attr("fill","#ccc").attr("stroke","#000").attr("stroke-width","1.5px").selectAll("path").data(v(b)).join("path").attr("d",n.cornerRadius(Ae)).attr("fill",(M,S)=>C(l[S].Element)),w.append("g").selectAll("text").data(v(b)).join(M=>{let S=M.append("g");return S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sulfur"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sodium","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>(n.centroid(a),0)).text((a,f)=>{let r=l[f].Element;return r=="Nitrogen"?"N":r=="Calcium"?"Ca":r=="Sulfur"?"S":r=="Potassium"?"K":r=="Phosphorus"?"P":r=="Sodium"?"Na":r=="Chlorine"?"Cl":r=="Magnesium"?"Mg":r=="All others"?"Others":r=="Hydrogen"?"Hydrogen (H)":r=="Carbon"?"Carbon (C)":r=="Oxygen"?"Oxygen (O)":l[f].Element}).attr("text-anchor","middle"),S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sulfur"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sodium","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>15).text((a,f)=>{let r=l[f].Element,D=a.value;return["Carbon","Hydrogen","Oxygen"].includes(r)?`${D}%`:r=="All others"?"-0.3":`${Ne(".2f")(D)}`}).attr("text-anchor","middle").attr("font-size","80%"),S}).attr("font-size","18px").attr("font-weight","bold")}return u.$$set=g=>{"data"in g&&A(2,R=g.data)},[i,e,R]}class et extends be{constructor(c){super(),Re(this,c,Je,We,Ee,{data:2})}}export{et as default};
