import{S as nh,i as rh,s as ih,k as fn,q as wn,a as Xa,J as sh,l as dn,m as pn,r as Sn,h as $e,c as Ya,K as oh,n as Re,b as ah,H as zt,C as la,o as uh}from"../chunks/index.2e204e96.js";import{s as lh}from"../chunks/transform.3e593064.js";import{c as hh}from"../chunks/_commonjsHelpers.28e086c5.js";import{b as ch}from"../chunks/paths.f9a237ed.js";import{a as Ha,c as gh,d as fh}from"../chunks/linear.65be369b.js";import{J as dh}from"../chunks/linear.ad569581.js";import{s as Wa}from"../chunks/selectAll.946968f7.js";import{r as $a}from"../chunks/range.6bc2a9a0.js";import{s as ph}from"../chunks/line.7f558adc.js";import{f as mh}from"../chunks/defaultLocale.c00e5010.js";function vh(a){if(!a.ok)throw new Error(a.status+" "+a.statusText);if(!(a.status===204||a.status===205))return a.json()}function yh(a,l){return fetch(a,l).then(vh)}var Ze={},xh={get exports(){return Ze},set exports(a){Ze=a}},it={};function Zn(a,l){return{type:"Feature",properties:l||{},geometry:a}}it.feature=Zn;it.point=function(a,l){if(!Array.isArray(a))throw new Error("Coordinates must be an array");if(a.length<2)throw new Error("Coordinates must be at least 2 numbers long");return Zn({type:"Point",coordinates:a.slice()},l)};it.polygon=function(a,l){if(!a)throw new Error("No coordinates passed");for(var h=0;h<a.length;h++){var u=a[h];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<u[u.length-1].length;g++)if(u[u.length-1][g]!==u[0][g])throw new Error("First and last Position are not equivalent.")}return Zn({type:"Polygon",coordinates:a},l)};it.lineString=function(a,l){if(!a)throw new Error("No coordinates passed");return Zn({type:"LineString",coordinates:a},l)};it.featureCollection=function(a){return{type:"FeatureCollection",features:a}};it.multiLineString=function(a,l){if(!a)throw new Error("No coordinates passed");return Zn({type:"MultiLineString",coordinates:a},l)};it.multiPoint=function(a,l){if(!a)throw new Error("No coordinates passed");return Zn({type:"MultiPoint",coordinates:a},l)};it.multiPolygon=function(a,l){if(!a)throw new Error("No coordinates passed");return Zn({type:"MultiPolygon",coordinates:a},l)};it.geometryCollection=function(a,l){return Zn({type:"GeometryCollection",geometries:a},l)};var La={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};it.radiansToDistance=function(a,l){var h=La[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return a*h};it.distanceToRadians=function(a,l){var h=La[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return a/h};it.distanceToDegrees=function(a,l){var h=La[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return a/h*57.2958};var Eh=it.polygon,Ih=it.featureCollection,Ra=function(a,l){return Ih(wh(a.features.map(function(h){var u={x:h.geometry.coordinates[0],y:h.geometry.coordinates[1]};return l&&(u.z=h.properties[l]),u})).map(function(h){return Eh([[[h.a.x,h.a.y],[h.b.x,h.b.y],[h.c.x,h.c.y],[h.a.x,h.a.y]]],{a:h.a.z,b:h.b.z,c:h.c.z})}))};function Za(a,l,h){this.a=a,this.b=l,this.c=h;var u=l.x-a.x,g=l.y-a.y,d=h.x-a.x,p=h.y-a.y,v=u*(a.x+l.x)+g*(a.y+l.y),I=d*(a.x+h.x)+p*(a.y+h.y),x=2*(u*(h.y-l.y)-g*(h.x-l.x)),C,w,S,F;Math.abs(x)<1e-6?(C=Math.min(a.x,l.x,h.x),w=Math.min(a.y,l.y,h.y),S=(Math.max(a.x,l.x,h.x)-C)*.5,F=(Math.max(a.y,l.y,h.y)-w)*.5,this.x=C+S,this.y=w+F,this.r=S*S+F*F):(this.x=(p*v-g*I)/x,this.y=(u*I-d*v)/x,S=this.x-a.x,F=this.y-a.y,this.r=S*S+F*F)}function Nh(a,l){return l.x-a.x}function Ch(a){var l=a.length,h,u,g,d,p;t:for(;l;)for(u=a[--l],h=a[--l],g=l;g;)if(p=a[--g],d=a[--g],h===d&&u===p||h===p&&u===d){a.splice(l,2),a.splice(g,2),l-=2;continue t}}function wh(a){if(a.length<3)return[];a.sort(Nh);for(var l=a.length-1,h=a[l].x,u=a[0].x,g=a[l].y,d=g;l--;)a[l].y<g&&(g=a[l].y),a[l].y>d&&(d=a[l].y);var p=u-h,v=d-g,I=p>v?p:v,x=(u+h)*.5,C=(d+g)*.5,w=[new Za({x:x-20*I,y:C-I,__sentinel:!0},{x,y:C+20*I,__sentinel:!0},{x:x+20*I,y:C-I,__sentinel:!0})],S=[],F=[],T,E,z;for(l=a.length;l--;){for(F.length=0,T=w.length;T--;){if(p=a[l].x-w[T].x,p>0&&p*p>w[T].r){S.push(w[T]),w.splice(T,1);continue}v=a[l].y-w[T].y,!(p*p+v*v>w[T].r)&&(F.push(w[T].a,w[T].b,w[T].b,w[T].c,w[T].c,w[T].a),w.splice(T,1))}for(Ch(F),T=F.length;T;)z=F[--T],E=F[--T],w.push(new Za(E,z,a[l]))}for(Array.prototype.push.apply(S,w),l=S.length;l--;)(S[l].a.__sentinel||S[l].b.__sentinel||S[l].c.__sentinel)&&S.splice(l,1);return S}var Jn={};function Sh(a){if(Array.isArray(a)&&typeof a[0]=="number"&&typeof a[1]=="number")return a;if(a){if(a.type==="Feature"&&a.geometry&&a.geometry.type==="Point"&&Array.isArray(a.geometry.coordinates))return a.geometry.coordinates;if(a.type==="Point"&&Array.isArray(a.coordinates))return a.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function Lh(a,l,h){if(!l||!h)throw new Error("type and name required");if(!a||a.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+a.type)}function Rh(a,l,h){if(!h)throw new Error(".featureOf() requires a name");if(!a||a.type!=="Feature"||!a.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!a.geometry||a.geometry.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+a.geometry.type)}function Th(a,l,h){if(!h)throw new Error(".collectionOf() requires a name");if(!a||a.type!=="FeatureCollection")throw new Error("Invalid input to "+h+", FeatureCollection required");for(var u=0;u<a.features.length;u++){var g=a.features[u];if(!g||g.type!=="Feature"||!g.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!g.geometry||g.geometry.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+g.geometry.type)}}Jn.geojsonType=Lh;Jn.collectionOf=Th;Jn.featureOf=Rh;Jn.getCoord=Sh;var Ph=Jn,Yr=function(l,h){var u=Ph.getCoord(l),g=h.geometry.coordinates;h.geometry.type==="Polygon"&&(g=[g]);for(var d=0,p=!1;d<g.length&&!p;d++)if(Ja(u,g[d][0])){for(var v=!1,I=1;I<g[d].length&&!v;)Ja(u,g[d][I])&&(v=!0),I++;v||(p=!0)}return p};function Ja(a,l){for(var h=!1,u=0,g=l.length-1;u<l.length;g=u++){var d=l[u][0],p=l[u][1],v=l[g][0],I=l[g][1],x=p>a[1]!=I>a[1]&&a[0]<(v-d)*(a[1]-p)/(I-p)+d;x&&(h=!h)}return h}var Oh=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},Mh=function(a,l){if(!Oh(a))throw new Error("Coordinates must be an array");if(a.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:a},properties:l||{}}},_h=Mh,bh=function(a,l){var h=a[0],u=a[1],g=a[2];a[3];for(var d=(g-h)/l,p={type:"FeatureCollection",features:[]},v=0;v<=l;v++)for(var I=0;I<=l;I++)p.features.push(_h([v*d+h,I*d+u]));return p},Ge={};function Ta(a,l,h){var u,g,d,p,v,I,x,C,w,S=0,F,T=a.type==="FeatureCollection",E=a.type==="Feature",z=T?a.features.length:1;for(u=0;u<z;u++)for(w=T?a.features[u].geometry:E?a.geometry:a,F=w.type==="GeometryCollection",x=F?w.geometries.length:1,p=0;p<x;p++)if(I=F?w.geometries[p]:w,C=I.coordinates,S=h&&(I.type==="Polygon"||I.type==="MultiPolygon")?1:0,I.type==="Point")l(C);else if(I.type==="LineString"||I.type==="MultiPoint")for(g=0;g<C.length;g++)l(C[g]);else if(I.type==="Polygon"||I.type==="MultiLineString")for(g=0;g<C.length;g++)for(d=0;d<C[g].length-S;d++)l(C[g][d]);else if(I.type==="MultiPolygon")for(g=0;g<C.length;g++)for(d=0;d<C[g].length;d++)for(v=0;v<C[g][d].length-S;v++)l(C[g][d][v]);else throw new Error("Unknown Geometry Type")}Ge.coordEach=Ta;function Ah(a,l,h,u){return Ta(a,function(g){h=l(h,g)},u),h}Ge.coordReduce=Ah;function Mu(a,l){var h;switch(a.type){case"FeatureCollection":for(h=0;h<a.features.length;h++)l(a.features[h].properties);break;case"Feature":l(a.properties);break}}Ge.propEach=Mu;function Dh(a,l,h){return Mu(a,function(u){h=l(h,u)}),h}Ge.propReduce=Dh;function Fh(a,l){if(a.type==="Feature")l(a);else if(a.type==="FeatureCollection")for(var h=0;h<a.features.length;h++)l(a.features[h])}Ge.featureEach=Fh;function Gh(a){var l=[];return Ta(a,function(h){l.push(h)}),l}Ge.coordAll=Gh;var qh=Ge.coordEach,co=function(a){var l=[1/0,1/0,-1/0,-1/0];return qh(a,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l},_u=function(a,l){var h=a.geometry.coordinates[0],u=a.geometry.coordinates[1],g=l.geometry.coordinates[0][0][0],d=l.geometry.coordinates[0][0][1],p=l.properties.a,v=l.geometry.coordinates[0][1][0],I=l.geometry.coordinates[0][1][1],x=l.properties.b,C=l.geometry.coordinates[0][2][0],w=l.geometry.coordinates[0][2][1],S=l.properties.c,F=(S*(h-g)*(u-I)+p*(h-v)*(u-w)+x*(h-C)*(u-d)-x*(h-g)*(u-w)-S*(h-v)*(u-d)-p*(h-C)*(u-I))/((h-g)*(u-I)+(h-v)*(u-w)+(h-C)*(u-d)-(h-g)*(u-w)-(h-v)*(u-d)-(h-C)*(u-I));return F},Ka=Jn.getCoord,Bh=it.radiansToDistance,Te=function(a,l,h){var u=Math.PI/180,g=Ka(a),d=Ka(l),p=u*(d[1]-g[1]),v=u*(d[0]-g[0]),I=u*g[1],x=u*d[1],C=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(v/2),2)*Math.cos(I)*Math.cos(x);return Bh(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),h)},ja=Te,bu=function(a){var l=ja(a.slice(0,2),[a[2],a[1]],"miles"),h=ja(a.slice(0,2),[a[0],a[3]],"miles");if(l>=h){var u=(a[1]+a[3])/2;return[a[0],u-(a[2]-a[0])/2,a[2],u+(a[2]-a[0])/2]}else{var g=(a[0]+a[2])/2;return[g-(a[3]-a[1])/2,a[1],g+(a[3]-a[1])/2,a[3]]}},Vh=Au,ya=1e-10;function to(a,l){var h=a.x-l.x,u=a.y-l.y;return h*h+u*u<ya}function Qa(a){for(var l=a.head;l;){var h=l.next;l.next=l.prev,l.prev=h,l=h}var h=a.head;a.head=a.tail,a.tail=h}function Pa(a){this.level=a,this.s=null,this.count=0}Pa.prototype.remove_seq=function(a){a.prev?a.prev.next=a.next:this.s=a.next,a.next&&(a.next.prev=a.prev),--this.count};Pa.prototype.addSegment=function(a,l){for(var h=this.s,u=null,g=null,d=!1,p=!1;h&&(u==null&&(to(a,h.head.p)?(u=h,d=!0):to(a,h.tail.p)&&(u=h)),g==null&&(to(l,h.head.p)?(g=h,p=!0):to(l,h.tail.p)&&(g=h)),!(g!=null&&u!=null));)h=h.next;var v=(u!=null?1:0)|(g!=null?2:0);switch(v){case 0:var I={p:a,prev:null},x={p:l,next:null};I.next=x,x.prev=I,u={head:I,tail:x,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=u),this.s=u,++this.count;break;case 1:var C={p:l};d?(C.next=u.head,C.prev=null,u.head.prev=C,u.head=C):(C.next=null,C.prev=u.tail,u.tail.next=C,u.tail=C);break;case 2:var C={p:a};p?(C.next=g.head,C.prev=null,g.head.prev=C,g.head=C):(C.next=null,C.prev=g.tail,g.tail.next=C,g.tail=C);break;case 3:if(u===g){var C={p:u.tail.p,next:u.head,prev:null};u.head.prev=C,u.head=C,u.closed=!0;break}switch((d?1:0)|(p?2:0)){case 0:Qa(u);case 1:g.tail.next=u.head,u.head.prev=g.tail,g.tail=u.tail,this.remove_seq(u);break;case 3:Qa(u);case 2:u.tail.next=g.head,g.head.prev=u.tail,u.tail=g.tail,this.remove_seq(g);break}}};function Au(a){if(a)this.drawContour=a;else{var l=this;l.contours={},this.drawContour=function(h,u,g,d,p,v){var I=l.contours[v];I||(I=l.contours[v]=new Pa(p)),I.addSegment({x:h,y:u},{x:g,y:d})},this.contourList=function(){var h=[],u=l.contours;for(var g in u)for(var d=u[g].s,p=u[g].level;d;){var v=d.head,I=[];for(I.level=p,I.k=g;v&&v.p;)I.push(v.p),v=v.next;h.push(I),d=d.next}return h.sort(function(x,C){return x.k-C.k}),h}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}Au.prototype.contour=function(a,l,h,u,g,d,p,v,I){var x=this.h,C=this.sh,w=this.xh,S=this.yh,F=this.drawContour;this.contours={};for(var T=function(Lt,ot){return(x[ot]*w[Lt]-x[Lt]*w[ot])/(x[ot]-x[Lt])},E=function(Lt,ot){return(x[ot]*S[Lt]-x[Lt]*S[ot])/(x[ot]-x[Lt])},z,H,V,L,N,M,W=0,P=0,A=0,O=0,B=[0,1,1,0],G=[0,0,1,1],m=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],X=g-1;X>=u;X--)for(var nt=l;nt<=h-1;nt++){var yt,Ct;if(yt=Math.min(a[nt][X],a[nt][X+1]),Ct=Math.min(a[nt+1][X],a[nt+1][X+1]),N=Math.min(yt,Ct),yt=Math.max(a[nt][X],a[nt][X+1]),Ct=Math.max(a[nt+1][X],a[nt+1][X+1]),M=Math.max(yt,Ct),M>=I[0]&&N<=I[v-1]){for(var bt=0;bt<v;bt++)if(I[bt]>=N&&I[bt]<=M){for(var b=4;b>=0;b--)b>0?(x[b]=a[nt+B[b-1]][X+G[b-1]]-I[bt],w[b]=d[nt+B[b-1]],S[b]=p[X+G[b-1]]):(x[0]=.25*(x[1]+x[2]+x[3]+x[4]),w[0]=.5*(d[nt]+d[nt+1]),S[0]=.5*(p[X]+p[X+1])),x[b]>ya?C[b]=1:x[b]<-ya?C[b]=-1:C[b]=0;for(b=1;b<=4;b++)if(z=b,H=0,b!=4?V=b+1:V=1,L=m[C[z]+1][C[H]+1][C[V]+1],L!=0){switch(L){case 1:W=w[z],A=S[z],P=w[H],O=S[H];break;case 2:W=w[H],A=S[H],P=w[V],O=S[V];break;case 3:W=w[V],A=S[V],P=w[z],O=S[z];break;case 4:W=w[z],A=S[z],P=T(H,V),O=E(H,V);break;case 5:W=w[H],A=S[H],P=T(V,z),O=E(V,z);break;case 6:W=w[V],A=S[V],P=T(z,H),O=E(z,H);break;case 7:W=T(z,H),A=E(z,H),P=T(H,V),O=E(H,V);break;case 8:W=T(H,V),A=E(H,V),P=T(V,z),O=E(V,z);break;case 9:W=T(V,z),A=E(V,z),P=T(z,H),O=E(z,H);break}F(W,A,P,O,I[bt],bt)}}}}};var zh=Ra,kh=Yr,Uh=bh,Xh=co,Yh=_u,Hh=it.featureCollection,Wh=it.lineString,$h=bu,Zh=Vh,Jh=function(a,l,h,u){for(var g=zh(a,l),d=Xh(a),p=$h(d),v=Uh(p,h),I=[],x=0;x<v.features.length;x++)for(var C=v.features[x],w=0;w<g.features.length;w++){var S=g.features[w];kh(C,S)&&(C.properties={},C.properties[l]=Yh(C,S))}for(var F=Math.sqrt(v.features.length),T=0;T<F;T++){for(var E=v.features.slice(T*F,(T+1)*F),z=[],H=0;H<E.length;H++)E[H].properties?z.push(E[H].properties[l]):z.push(0);I.push(z)}for(var V=(p[2]-p[0])/F,L=[],N=[],M=0;M<F;M++)L.push(M*V+p[0]),N.push(M*V+p[1]);var W=new Zh;W.contour(I,0,h,0,h,L,N,u.length,u);var P=W.contourList(),A=Hh([]);return P.forEach(function(O){if(O.length>2){var B=[];O.forEach(function(m){B.push([m.x,m.y])});var G=Wh(B);G.properties={},G.properties[l]=O.level,A.features.push(G)}}),A},Kh=jh;function jh(a){for(var l=0,h=0,u=1;u<a.length;++u)a[u][0]<a[l][0]&&(l=u),a[u][0]>a[h][0]&&(h=u);return l<h?[[l],[h]]:l>h?[[h],[l]]:[[l]]}var Vi={},Qh={get exports(){return Vi},set exports(a){Vi=a}},Du=tc,tu=+(Math.pow(2,27)+1);function tc(a,l,h){var u=a*l,g=tu*a,d=g-a,p=g-d,v=a-p,I=tu*l,x=I-l,C=I-x,w=l-C,S=u-p*C,F=S-v*C,T=F-p*w,E=v*w-T;return h?(h[0]=E,h[1]=u,h):[E,u]}var ec=rc;function nc(a,l){var h=a+l,u=h-a,g=h-u,d=l-u,p=a-g,v=p+d;return v?[v,h]:[h]}function rc(a,l){var h=a.length|0,u=l.length|0;if(h===1&&u===1)return nc(a[0],l[0]);var g=h+u,d=new Array(g),p=0,v=0,I=0,x=Math.abs,C=a[v],w=x(C),S=l[I],F=x(S),T,E;w<F?(E=C,v+=1,v<h&&(C=a[v],w=x(C))):(E=S,I+=1,I<u&&(S=l[I],F=x(S))),v<h&&w<F||I>=u?(T=C,v+=1,v<h&&(C=a[v],w=x(C))):(T=S,I+=1,I<u&&(S=l[I],F=x(S)));for(var z=T+E,H=z-T,V=E-H,L=V,N=z,M,W,P,A,O;v<h&&I<u;)w<F?(T=C,v+=1,v<h&&(C=a[v],w=x(C))):(T=S,I+=1,I<u&&(S=l[I],F=x(S))),E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M;for(;v<h;)T=C,E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M,v+=1,v<h&&(C=a[v]);for(;I<u;)T=S,E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M,I+=1,I<u&&(S=l[I]);return L&&(d[p++]=L),N&&(d[p++]=N),p||(d[p++]=0),d.length=p,d}var ic=sc;function sc(a,l,h){var u=a+l,g=u-a,d=u-g,p=l-g,v=a-d;return h?(h[0]=v+p,h[1]=u,h):[v+p,u]}var ha=Du,oc=ic,ac=uc;function uc(a,l){var h=a.length;if(h===1){var u=ha(a[0],l);return u[0]?u:[u[1]]}var g=new Array(2*h),d=[.1,.1],p=[.1,.1],v=0;ha(a[0],l,d),d[0]&&(g[v++]=d[0]);for(var I=1;I<h;++I){ha(a[I],l,p);var x=d[1];oc(x,p[0],d),d[0]&&(g[v++]=d[0]);var C=p[1],w=d[1],S=C+w,F=S-C,T=w-F;d[1]=S,T&&(g[v++]=T)}return d[1]&&(g[v++]=d[1]),v===0&&(g[v++]=0),g.length=v,g}var lc=cc;function hc(a,l){var h=a+l,u=h-a,g=h-u,d=l-u,p=a-g,v=p+d;return v?[v,h]:[h]}function cc(a,l){var h=a.length|0,u=l.length|0;if(h===1&&u===1)return hc(a[0],-l[0]);var g=h+u,d=new Array(g),p=0,v=0,I=0,x=Math.abs,C=a[v],w=x(C),S=-l[I],F=x(S),T,E;w<F?(E=C,v+=1,v<h&&(C=a[v],w=x(C))):(E=S,I+=1,I<u&&(S=-l[I],F=x(S))),v<h&&w<F||I>=u?(T=C,v+=1,v<h&&(C=a[v],w=x(C))):(T=S,I+=1,I<u&&(S=-l[I],F=x(S)));for(var z=T+E,H=z-T,V=E-H,L=V,N=z,M,W,P,A,O;v<h&&I<u;)w<F?(T=C,v+=1,v<h&&(C=a[v],w=x(C))):(T=S,I+=1,I<u&&(S=-l[I],F=x(S))),E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M;for(;v<h;)T=C,E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M,v+=1,v<h&&(C=a[v]);for(;I<u;)T=S,E=L,z=T+E,H=z-T,V=E-H,V&&(d[p++]=V),M=N+z,W=M-N,P=M-W,A=z-W,O=N-P,L=O+A,N=M,I+=1,I<u&&(S=-l[I]);return L&&(d[p++]=L),N&&(d[p++]=N),p||(d[p++]=0),d.length=p,d}(function(a){var l=Du,h=ec,u=ac,g=lc,d=5,p=11102230246251565e-32,v=(3+16*p)*p,I=(7+56*p)*p;function x(L,N,M,W){return function(A,O,B){var G=L(L(N(O[1],B[0]),N(-B[1],O[0])),L(N(A[1],O[0]),N(-O[1],A[0]))),m=L(N(A[1],B[0]),N(-B[1],A[0])),X=W(G,m);return X[X.length-1]}}function C(L,N,M,W){return function(A,O,B,G){var m=L(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),O[2]),L(M(L(N(O[1],G[0]),N(-G[1],O[0])),-B[2]),M(L(N(O[1],B[0]),N(-B[1],O[0])),G[2]))),L(M(L(N(O[1],G[0]),N(-G[1],O[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),G[2])))),X=L(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-B[2]),M(L(N(A[1],B[0]),N(-B[1],A[0])),G[2]))),L(M(L(N(O[1],B[0]),N(-B[1],O[0])),A[2]),L(M(L(N(A[1],B[0]),N(-B[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),B[2])))),nt=W(m,X);return nt[nt.length-1]}}function w(L,N,M,W){return function(A,O,B,G,m){var X=L(L(L(M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),B[2]),L(M(L(N(B[1],m[0]),N(-m[1],B[0])),-G[2]),M(L(N(B[1],G[0]),N(-G[1],B[0])),m[2]))),O[3]),L(M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),O[2]),L(M(L(N(O[1],m[0]),N(-m[1],O[0])),-G[2]),M(L(N(O[1],G[0]),N(-G[1],O[0])),m[2]))),-B[3]),M(L(M(L(N(B[1],m[0]),N(-m[1],B[0])),O[2]),L(M(L(N(O[1],m[0]),N(-m[1],O[0])),-B[2]),M(L(N(O[1],B[0]),N(-B[1],O[0])),m[2]))),G[3]))),L(M(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),O[2]),L(M(L(N(O[1],G[0]),N(-G[1],O[0])),-B[2]),M(L(N(O[1],B[0]),N(-B[1],O[0])),G[2]))),-m[3]),L(M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),O[2]),L(M(L(N(O[1],m[0]),N(-m[1],O[0])),-G[2]),M(L(N(O[1],G[0]),N(-G[1],O[0])),m[2]))),A[3]),M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-G[2]),M(L(N(A[1],G[0]),N(-G[1],A[0])),m[2]))),-O[3])))),L(L(M(L(M(L(N(O[1],m[0]),N(-m[1],O[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),m[2]))),G[3]),L(M(L(M(L(N(O[1],G[0]),N(-G[1],O[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),G[2]))),-m[3]),M(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),O[2]),L(M(L(N(O[1],G[0]),N(-G[1],O[0])),-B[2]),M(L(N(O[1],B[0]),N(-B[1],O[0])),G[2]))),A[3]))),L(M(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-B[2]),M(L(N(A[1],B[0]),N(-B[1],A[0])),G[2]))),-O[3]),L(M(L(M(L(N(O[1],G[0]),N(-G[1],O[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),G[2]))),B[3]),M(L(M(L(N(O[1],B[0]),N(-B[1],O[0])),A[2]),L(M(L(N(A[1],B[0]),N(-B[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),B[2]))),-G[3]))))),nt=L(L(L(M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),B[2]),L(M(L(N(B[1],m[0]),N(-m[1],B[0])),-G[2]),M(L(N(B[1],G[0]),N(-G[1],B[0])),m[2]))),A[3]),M(L(M(L(N(G[1],m[0]),N(-m[1],G[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-G[2]),M(L(N(A[1],G[0]),N(-G[1],A[0])),m[2]))),-B[3])),L(M(L(M(L(N(B[1],m[0]),N(-m[1],B[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-B[2]),M(L(N(A[1],B[0]),N(-B[1],A[0])),m[2]))),G[3]),M(L(M(L(N(B[1],G[0]),N(-G[1],B[0])),A[2]),L(M(L(N(A[1],G[0]),N(-G[1],A[0])),-B[2]),M(L(N(A[1],B[0]),N(-B[1],A[0])),G[2]))),-m[3]))),L(L(M(L(M(L(N(B[1],m[0]),N(-m[1],B[0])),O[2]),L(M(L(N(O[1],m[0]),N(-m[1],O[0])),-B[2]),M(L(N(O[1],B[0]),N(-B[1],O[0])),m[2]))),A[3]),M(L(M(L(N(B[1],m[0]),N(-m[1],B[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-B[2]),M(L(N(A[1],B[0]),N(-B[1],A[0])),m[2]))),-O[3])),L(M(L(M(L(N(O[1],m[0]),N(-m[1],O[0])),A[2]),L(M(L(N(A[1],m[0]),N(-m[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),m[2]))),B[3]),M(L(M(L(N(O[1],B[0]),N(-B[1],O[0])),A[2]),L(M(L(N(A[1],B[0]),N(-B[1],A[0])),-O[2]),M(L(N(A[1],O[0]),N(-O[1],A[0])),B[2]))),-m[3])))),yt=W(X,nt);return yt[yt.length-1]}}function S(L){var N=L===3?x:L===4?C:w;return N(h,l,u,g)}var F=S(3),T=S(4),E=[function(){return 0},function(){return 0},function(N,M){return M[0]-N[0]},function(N,M,W){var P=(N[1]-W[1])*(M[0]-W[0]),A=(N[0]-W[0])*(M[1]-W[1]),O=P-A,B;if(P>0){if(A<=0)return O;B=P+A}else if(P<0){if(A>=0)return O;B=-(P+A)}else return O;var G=v*B;return O>=G||O<=-G?O:F(N,M,W)},function(N,M,W,P){var A=N[0]-P[0],O=M[0]-P[0],B=W[0]-P[0],G=N[1]-P[1],m=M[1]-P[1],X=W[1]-P[1],nt=N[2]-P[2],yt=M[2]-P[2],Ct=W[2]-P[2],bt=O*X,b=B*m,Lt=B*G,ot=A*X,pt=A*m,Ht=O*G,Tn=nt*(bt-b)+yt*(Lt-ot)+Ct*(pt-Ht),ge=(Math.abs(bt)+Math.abs(b))*Math.abs(nt)+(Math.abs(Lt)+Math.abs(ot))*Math.abs(yt)+(Math.abs(pt)+Math.abs(Ht))*Math.abs(Ct),$=I*ge;return Tn>$||-Tn>$?Tn:T(N,M,W,P)}];function z(L){var N=E[L.length];return N||(N=E[L.length]=S(L.length)),N.apply(void 0,L)}function H(L,N,M,W,P,A,O){return function(G,m,X,nt,yt){switch(arguments.length){case 0:case 1:return 0;case 2:return W(G,m);case 3:return P(G,m,X);case 4:return A(G,m,X,nt);case 5:return O(G,m,X,nt,yt)}for(var Ct=new Array(arguments.length),bt=0;bt<arguments.length;++bt)Ct[bt]=arguments[bt];return L(Ct)}}function V(){for(;E.length<=d;)E.push(S(E.length));a.exports=H.apply(void 0,[z].concat(E));for(var L=0;L<=d;++L)a.exports[L]=E[L]}V()})(Qh);var gc=fc,eu=Vi[3];function fc(a){var l=a.length;if(l<3){for(var x=new Array(l),h=0;h<l;++h)x[h]=h;return l===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:x}for(var u=new Array(l),h=0;h<l;++h)u[h]=h;u.sort(function(F,T){var E=a[F][0]-a[T][0];return E||a[F][1]-a[T][1]});for(var g=[u[0],u[1]],d=[u[0],u[1]],h=2;h<l;++h){for(var p=u[h],v=a[p],I=g.length;I>1&&eu(a[g[I-2]],a[g[I-1]],v)<=0;)I-=1,g.pop();for(g.push(p),I=d.length;I>1&&eu(a[d[I-2]],a[d[I-1]],v)>=0;)I-=1,d.pop();d.push(p)}for(var x=new Array(d.length+g.length-2),C=0,h=0,w=g.length;h<w;++h)x[C++]=g[h];for(var S=d.length-2;S>0;--S)x[C++]=d[S];return x}var dc=mc,pc=gc;function mc(a){var l=pc(a),h=l.length;if(h<=2)return[];for(var u=new Array(h),g=l[h-1],d=0;d<h;++d){var p=l[d];u[d]=[g,p],g=p}return u}var Ie={},Gt={},Oa=32;Gt.INT_BITS=Oa;Gt.INT_MAX=2147483647;Gt.INT_MIN=-1<<Oa-1;Gt.sign=function(a){return(a>0)-(a<0)};Gt.abs=function(a){var l=a>>Oa-1;return(a^l)-l};Gt.min=function(a,l){return l^(a^l)&-(a<l)};Gt.max=function(a,l){return a^(a^l)&-(a<l)};Gt.isPow2=function(a){return!(a&a-1)&&!!a};Gt.log2=function(a){var l,h;return l=(a>65535)<<4,a>>>=l,h=(a>255)<<3,a>>>=h,l|=h,h=(a>15)<<2,a>>>=h,l|=h,h=(a>3)<<1,a>>>=h,l|=h,l|a>>1};Gt.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0};Gt.popCount=function(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),(a+(a>>>4)&252645135)*16843009>>>24};function Fu(a){var l=32;return a&=-a,a&&l--,a&65535&&(l-=16),a&16711935&&(l-=8),a&252645135&&(l-=4),a&858993459&&(l-=2),a&1431655765&&(l-=1),l}Gt.countTrailingZeros=Fu;Gt.nextPow2=function(a){return a+=a===0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1};Gt.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)};Gt.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var qi=new Array(256);(function(a){for(var l=0;l<256;++l){var h=l,u=l,g=7;for(h>>>=1;h;h>>>=1)u<<=1,u|=h&1,--g;a[l]=u<<g&255}})(qi);Gt.reverse=function(a){return qi[a&255]<<24|qi[a>>>8&255]<<16|qi[a>>>16&255]<<8|qi[a>>>24&255]};Gt.interleave2=function(a,l){return a&=65535,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,a|l<<1};Gt.deinterleave2=function(a,l){return a=a>>>l&1431655765,a=(a|a>>>1)&858993459,a=(a|a>>>2)&252645135,a=(a|a>>>4)&16711935,a=(a|a>>>16)&65535,a<<16>>16};Gt.interleave3=function(a,l,h){return a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,a|=l<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,a|h<<2};Gt.deinterleave3=function(a,l){return a=a>>>l&1227133513,a=(a|a>>>2)&3272356035,a=(a|a>>>4)&251719695,a=(a|a>>>8)&4278190335,a=(a|a>>>16)&1023,a<<22>>22};Gt.nextCombination=function(a){var l=a|a-1;return l+1|(~l&-~l)-1>>>Fu(a)+1};var vc=Gu;function Gu(a){this.roots=new Array(a),this.ranks=new Array(a);for(var l=0;l<a;++l)this.roots[l]=l,this.ranks[l]=0}var go=Gu.prototype;Object.defineProperty(go,"length",{get:function(){return this.roots.length}});go.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a};go.find=function(a){for(var l=a,h=this.roots;h[a]!==a;)a=h[a];for(;h[l]!==a;){var u=h[l];h[l]=a,l=u}return a};go.link=function(a,l){var h=this.find(a),u=this.find(l);if(h!==u){var g=this.ranks,d=this.roots,p=g[h],v=g[u];p<v?d[h]=u:v<p?d[u]=h:(d[u]=h,++g[h])}};var qu=Gt,Bu=vc;function yc(a){for(var l=0,h=Math.max,u=0,g=a.length;u<g;++u)l=h(l,a[u].length);return l-1}Ie.dimension=yc;function xc(a){for(var l=-1,h=Math.max,u=0,g=a.length;u<g;++u)for(var d=a[u],p=0,v=d.length;p<v;++p)l=h(l,d[p]);return l+1}Ie.countVertices=xc;function Ec(a){for(var l=new Array(a.length),h=0,u=a.length;h<u;++h)l[h]=a[h].slice(0);return l}Ie.cloneCells=Ec;function Hr(a,l){var h=a.length,u=a.length-l.length,g=Math.min;if(u)return u;switch(h){case 0:return 0;case 1:return a[0]-l[0];case 2:var x=a[0]+a[1]-l[0]-l[1];return x||g(a[0],a[1])-g(l[0],l[1]);case 3:var d=a[0]+a[1],p=l[0]+l[1];if(x=d+a[2]-(p+l[2]),x)return x;var v=g(a[0],a[1]),I=g(l[0],l[1]),x=g(v,a[2])-g(I,l[2]);return x||g(v+a[2],d)-g(I+l[2],p);default:var C=a.slice(0);C.sort();var w=l.slice(0);w.sort();for(var S=0;S<h;++S)if(u=C[S]-w[S],u)return u;return 0}}Ie.compareCells=Hr;function Ic(a,l){return Hr(a[0],l[0])}function Xi(a,l){if(l){for(var h=a.length,u=new Array(h),g=0;g<h;++g)u[g]=[a[g],l[g]];u.sort(Ic);for(var g=0;g<h;++g)a[g]=u[g][0],l[g]=u[g][1];return a}else return a.sort(Hr),a}Ie.normalize=Xi;function Ma(a){if(a.length===0)return[];for(var l=1,h=a.length,u=1;u<h;++u){var g=a[u];if(Hr(g,a[u-1])){if(u===l){l++;continue}a[l++]=g}}return a.length=l,a}Ie.unique=Ma;function Bi(a,l){for(var h=0,u=a.length-1,g=-1;h<=u;){var d=h+u>>1,p=Hr(a[d],l);p<=0?(p===0&&(g=d),h=d+1):p>0&&(u=d-1)}return g}Ie.findCell=Bi;function Vu(a,l){for(var h=new Array(a.length),u=0,g=h.length;u<g;++u)h[u]=[];for(var d=[],u=0,p=l.length;u<p;++u)for(var v=l[u],I=v.length,x=1,C=1<<I;x<C;++x){d.length=qu.popCount(x);for(var w=0,S=0;S<I;++S)x&1<<S&&(d[w++]=v[S]);var F=Bi(a,d);if(!(F<0))for(;h[F++].push(u),!(F>=a.length||Hr(a[F],d)!==0););}return h}Ie.incidence=Vu;function Nc(a,l){if(!l)return Vu(Ma(_a(a,0)),a);for(var h=new Array(l),u=0;u<l;++u)h[u]=[];for(var u=0,g=a.length;u<g;++u)for(var d=a[u],p=0,v=d.length;p<v;++p)h[d[p]].push(u);return h}Ie.dual=Nc;function Cc(a){for(var l=[],h=0,u=a.length;h<u;++h)for(var g=a[h],d=g.length|0,p=1,v=1<<d;p<v;++p){for(var I=[],x=0;x<d;++x)p>>>x&1&&I.push(g[x]);l.push(I)}return Xi(l)}Ie.explode=Cc;function _a(a,l){if(l<0)return[];for(var h=[],u=(1<<l+1)-1,g=0;g<a.length;++g)for(var d=a[g],p=u;p<1<<d.length;p=qu.nextCombination(p)){for(var v=new Array(l+1),I=0,x=0;x<d.length;++x)p&1<<x&&(v[I++]=d[x]);h.push(v)}return Xi(h)}Ie.skeleton=_a;function wc(a){for(var l=[],h=0,u=a.length;h<u;++h)for(var g=a[h],d=0,p=g.length;d<p;++d){for(var v=new Array(g.length-1),I=0,x=0;I<p;++I)I!==d&&(v[x++]=g[I]);l.push(v)}return Xi(l)}Ie.boundary=wc;function Sc(a,l){for(var h=new Bu(l),u=0;u<a.length;++u)for(var g=a[u],d=0;d<g.length;++d)for(var p=d+1;p<g.length;++p)h.link(g[d],g[p]);for(var v=[],I=h.ranks,u=0;u<I.length;++u)I[u]=-1;for(var u=0;u<a.length;++u){var x=h.find(a[u][0]);I[x]<0?(I[x]=v.length,v.push([a[u].slice(0)])):v[I[x]].push(a[u].slice(0))}return v}function Lc(a){for(var l=Ma(Xi(_a(a,0))),h=new Bu(l.length),u=0;u<a.length;++u)for(var g=a[u],d=0;d<g.length;++d)for(var p=Bi(l,[g[d]]),v=d+1;v<g.length;++v)h.link(p,Bi(l,[g[v]]));for(var I=[],x=h.ranks,u=0;u<x.length;++u)x[u]=-1;for(var u=0;u<a.length;++u){var C=h.find(Bi(l,[a[u][0]]));x[C]<0?(x[C]=I.length,I.push([a[u].slice(0)])):I[x[C]].push(a[u].slice(0))}return I}function Rc(a,l){return l?Sc(a,l):Lc(a)}Ie.connectedComponents=Rc;var Tc=bc,xa=Vi,Pc=Ie.compareCells;function ao(a,l,h){this.vertices=a,this.adjacent=l,this.boundary=h,this.lastVisited=-1}ao.prototype.flip=function(){var a=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=a;var l=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=l};function Oc(a,l,h){this.vertices=a,this.cell=l,this.index=h}function Mc(a,l){return Pc(a.vertices,l.vertices)}function _c(a){for(var l=["function orient(){var tuple=this.tuple;return test("],h=0;h<=a;++h)h>0&&l.push(","),l.push("tuple[",h,"]");l.push(")}return orient");var u=new Function("test",l.join("")),g=xa[a+1];return g||(g=xa),u(g)}var nu=[];function zu(a,l,h){this.dimension=a,this.vertices=l,this.simplices=h,this.interior=h.filter(function(d){return!d.boundary}),this.tuple=new Array(a+1);for(var u=0;u<=a;++u)this.tuple[u]=this.vertices[u];var g=nu[a];g||(g=nu[a]=_c(a)),this.orient=g}var Yi=zu.prototype;Yi.handleBoundaryDegeneracy=function(a,l){var h=this.dimension,u=this.vertices.length-1,g=this.tuple,d=this.vertices,p=[a];for(a.lastVisited=-u;p.length>0;){a=p.pop(),a.vertices;for(var v=a.adjacent,I=0;I<=h;++I){var x=v[I];if(!(!x.boundary||x.lastVisited<=-u)){for(var C=x.vertices,w=0;w<=h;++w){var S=C[w];S<0?g[w]=l:g[w]=d[S]}var F=this.orient();if(F>0)return x;x.lastVisited=-u,F===0&&p.push(x)}}}return null};Yi.walk=function(a,l){var h=this.vertices.length-1,u=this.dimension,g=this.vertices,d=this.tuple,p=l?this.interior.length*Math.random()|0:this.interior.length-1,v=this.interior[p];t:for(;!v.boundary;){for(var I=v.vertices,x=v.adjacent,C=0;C<=u;++C)d[C]=g[I[C]];v.lastVisited=h;for(var C=0;C<=u;++C){var w=x[C];if(!(w.lastVisited>=h)){var S=d[C];d[C]=a;var F=this.orient();if(d[C]=S,F<0){v=w;continue t}else w.boundary?w.lastVisited=-h:w.lastVisited=h}}return}return v};Yi.addPeaks=function(a,l){var h=this.vertices.length-1,u=this.dimension,g=this.vertices,d=this.tuple,p=this.interior,v=this.simplices,I=[l];l.lastVisited=h,l.vertices[l.vertices.indexOf(-1)]=h,l.boundary=!1,p.push(l);for(var x=[];I.length>0;){var l=I.pop(),C=l.vertices,w=l.adjacent,S=C.indexOf(h);if(!(S<0)){for(var F=0;F<=u;++F)if(F!==S){var T=w[F];if(!(!T.boundary||T.lastVisited>=h)){var E=T.vertices;if(T.lastVisited!==-h){for(var z=0,H=0;H<=u;++H)E[H]<0?(z=H,d[H]=a):d[H]=g[E[H]];var V=this.orient();if(V>0){E[z]=h,T.boundary=!1,p.push(T),I.push(T),T.lastVisited=h;continue}else T.lastVisited=-h}var L=T.adjacent,N=C.slice(),M=w.slice(),W=new ao(N,M,!0);v.push(W);var P=L.indexOf(l);if(!(P<0)){L[P]=W,M[S]=T,N[F]=-1,M[F]=l,w[F]=W,W.flip();for(var H=0;H<=u;++H){var A=N[H];if(!(A<0||A===h)){for(var O=new Array(u-1),B=0,G=0;G<=u;++G){var m=N[G];m<0||G===H||(O[B++]=m)}x.push(new Oc(O,W,H))}}}}}}}x.sort(Mc);for(var F=0;F+1<x.length;F+=2){var X=x[F],nt=x[F+1],yt=X.index,Ct=nt.index;yt<0||Ct<0||(X.cell.adjacent[X.index]=nt.cell,nt.cell.adjacent[nt.index]=X.cell)}};Yi.insert=function(a,l){var h=this.vertices;h.push(a);var u=this.walk(a,l);if(u){for(var g=this.dimension,d=this.tuple,p=0;p<=g;++p){var v=u.vertices[p];v<0?d[p]=a:d[p]=h[v]}var I=this.orient(d);I<0||I===0&&(u=this.handleBoundaryDegeneracy(u,a),!u)||this.addPeaks(a,u)}};Yi.boundary=function(){for(var a=this.dimension,l=[],h=this.simplices,u=h.length,g=0;g<u;++g){var d=h[g];if(d.boundary){for(var p=new Array(a),v=d.vertices,I=0,x=0,C=0;C<=a;++C)v[C]>=0?p[I++]=v[C]:x=C&1;if(x===(a&1)){var w=p[0];p[0]=p[1],p[1]=w}l.push(p)}}return l};function bc(a,l){var h=a.length;if(h===0)throw new Error("Must have at least d+1 points");var u=a[0].length;if(h<=u)throw new Error("Must input at least d+1 points");var g=a.slice(0,u+1),d=xa.apply(void 0,g);if(d===0)throw new Error("Input not in general position");for(var p=new Array(u+1),v=0;v<=u;++v)p[v]=v;d<0&&(p[0]=1,p[1]=0);for(var I=new ao(p,new Array(u+1),!1),x=I.adjacent,C=new Array(u+2),v=0;v<=u;++v){for(var w=p.slice(),S=0;S<=u;++S)S===v&&(w[S]=-1);var F=w[0];w[0]=w[1],w[1]=F;var T=new ao(w,new Array(u+1),!0);x[v]=T,C[v]=T}C[u+1]=I;for(var v=0;v<=u;++v)for(var w=x[v].vertices,E=x[v].adjacent,S=0;S<=u;++S){var z=w[S];if(z<0){E[S]=I;continue}for(var H=0;H<=u;++H)x[H].vertices.indexOf(z)<0&&(E[S]=x[H])}for(var V=new zu(u,g,C),L=!!l,v=u+1;v<h;++v)V.insert(a[v],L);return V.boundary()}var Ac=Gc,Dc=Vi;function Fc(a,l){for(var h=new Array(l+1),u=0;u<a.length;++u)h[u]=a[u];for(var u=0;u<=a.length;++u){for(var g=a.length;g<=l;++g){for(var d=new Array(l),p=0;p<l;++p)d[p]=Math.pow(g+1-u,p);h[g]=d}var v=Dc.apply(void 0,h);if(v)return!0}return!1}function Gc(a){var l=a.length;if(l===0)return[];if(l===1)return[0];for(var h=a[0].length,u=[a[0]],g=[0],d=1;d<l;++d){if(u.push(a[d]),!Fc(u,h)){u.pop();continue}if(g.push(d),g.length===h+1)return g}return g}var qc=kc,ru=Tc,Bc=Ac;function Vc(a,l){for(var h=a.length,u=new Array(h),g=0;g<l.length;++g)u[g]=a[l[g]];for(var d=l.length,g=0;g<h;++g)l.indexOf(g)<0&&(u[d++]=a[g]);return u}function zc(a,l){for(var h=a.length,u=l.length,g=0;g<h;++g)for(var d=a[g],p=0;p<d.length;++p){var v=d[p];if(v<u)d[p]=l[v];else{v=v-u;for(var I=0;I<u;++I)v>=l[I]&&(v+=1);d[p]=v}}return a}function kc(a,l){try{return ru(a,!0)}catch{var h=Bc(a);if(h.length<=l)return[];var u=Vc(a,h),g=ru(u,!0);return zc(g,h)}}var Uc=Kh,Xc=dc,Yc=qc,Hc=Wc;function Wc(a){var l=a.length;if(l===0)return[];if(l===1)return[[0]];var h=a[0].length;return h===0?[]:h===1?Uc(a):h===2?Xc(a):Yc(a,h)}var $c=Ge.coordEach,Zc=Hc,Jc=it.polygon,Kc=function(a){var l=[];$c(a,function(d){l.push(d)});var h=Zc(l);if(h.length>0){for(var u=[],g=0;g<h.length;g++)u.push(l[h[g][0]]);return u.push(l[h[h.length-1][1]]),Jc([u])}},jc=Yr,Qc=it.featureCollection,tg=function(a,l){for(var h=Qc([]),u=0;u<l.features.length;u++)for(var g=0;g<a.features.length;g++){var d=jc(a.features[g],l.features[u]);d&&h.features.push(a.features[g])}return h},vr={},eg={get exports(){return vr},set exports(a){vr=a}};(function(a,l){(function(h,u){u(l)})(hh,function(h){function u(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function g(){}function d(){}function p(){}function v(){}function I(){}function x(){}function C(){}function w(t){this.message=t}function S(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function F(){if(arguments.length===0)w.call(this);else if(arguments.length===1){var t=arguments[0];w.call(this,t)}}function T(){}function E(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)E.call(this,0,0);else if(arguments.length===1){var t=arguments[0];E.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];E.call(this,e,n,E.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.x=r,this.y=s,this.z=o}}function z(){if(this.dimensionsToTest=2,arguments.length===0)z.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new d;this.dimensionsToTest=t}}function H(){}function V(){}function L(t){this.message=t||""}function N(){}function M(t){this.message=t||""}function W(t){this.message=t||""}function P(){this.array_=[],arguments[0]instanceof V&&this.addAll(arguments[0])}function A(){if(P.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}function O(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],f=arguments[3];this.init(s,o,c,f)}}function B(){}function G(){B.call(this,"Projective point not representable on the Cartesian plane.")}function m(){}function X(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function nt(){}function yt(t){this.str=t}function Ct(t){this.value=t}function bt(){}function b(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof b){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];b.call(this,b.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}function Lt(){}function ot(){}function pt(){}function Ht(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof E&&arguments[1]instanceof E){var o=arguments[0],c=arguments[1];this.x=o.y-c.y,this.y=c.x-o.x,this.w=o.x*c.y-c.x*o.y}}else if(arguments.length===3){var f=arguments[0],y=arguments[1],R=arguments[2];this.x=f,this.y=y,this.w=R}else if(arguments.length===4){var _=arguments[0],D=arguments[1],q=arguments[2],Z=arguments[3],K=_.y-D.y,Q=D.x-_.x,It=_.x*D.y-D.x*_.y,_t=q.y-Z.y,Fe=Z.x-q.x,mr=q.x*Z.y-Z.x*q.y;this.x=Q*mr-Fe*It,this.y=_t*It-K*mr,this.w=K*Fe-_t*Q}}function Tn(){}function ge(){}function $(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function Pn(){}function qt(){}function Hi(){}function Wi(){}function $i(){}function Zi(){}function j(){}function Eo(){}function Io(){}function Kn(){}function Da(){}function Ji(){}function kt(){this.array_=[],arguments[0]instanceof V&&this.addAll(arguments[0])}function Fa(t){return t==null?hn:t.color}function xt(t){return t==null?null:t.parent}function Je(t,e){t!==null&&(t.color=e)}function No(t){return t==null?null:t.left}function Ga(t){return t==null?null:t.right}function Dt(){this.root_=null,this.size_=0}function Ki(){}function qa(){}function Kt(){this.array_=[],arguments[0]instanceof V&&this.addAll(arguments[0])}function Ke(){}function k(){}function je(){}function jn(){}function at(){this.geometries=null;var t=arguments[0],e=arguments[1];if($.call(this,e),t===null&&(t=[]),$.hasNullElements(t))throw new d;this.geometries=t}function ie(){var t=arguments[0],e=arguments[1];at.call(this,t,e)}function vn(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];vn.call(this,t,qt.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function Co(){this.count=null}function ul(){}function ll(){}function hl(){}function cl(){}function gl(){}function fl(){}function fe(){}function Mt(){}function rt(){this.points=null;var t=arguments[0],e=arguments[1];$.call(this,e),this.init(t)}function ji(){}function wt(){this.coordinates=null;var t=arguments[0],e=arguments[1];$.call(this,e),this.init(t)}function Qe(){}function mt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if($.call(this,n),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),$.hasNullElements(e))throw new d;if(t.isEmpty()&&$.hasNonEmptyElements(e))throw new d;this.shell=t,this.holes=e}function se(){var t=arguments[0],e=arguments[1];at.call(this,t,e)}function Tt(){if(arguments[0]instanceof E&&arguments[1]instanceof st){var t=arguments[0],e=arguments[1];Tt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(X(arguments[0],ot)&&arguments[1]instanceof st){var n=arguments[0],r=arguments[1];rt.call(this,n,r),this.validateConstruction()}}function Ut(){var t=arguments[0],e=arguments[1];at.call(this,t,e)}function de(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function Qi(){}function wo(){}function So(){}function Lo(){}function pe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];pe.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new E}else if(X(arguments[0],ot)){var r=arguments[0];if(r===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=r.getDimension(),this.coordinates=new Array(r.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=r.getCoordinateCopy(n)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1];this.coordinates=s,this.dimension=o,s===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1];this.coordinates=new Array(c).fill(null),this.dimension=f;for(var n=0;c>n;n++)this.coordinates[n]=new E}}}function yn(){}function dl(t,e){return t===e||t!==t&&e!==e}function pl(t,e){function n(r){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(r&&ml.call(this,r))):new n(r)}return e||Ol(t,"size",{get:Ll}),t.constructor=n,n.prototype=t,n}function ml(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function vl(t){return this.has(t)&&(this._keys.splice(He,1),this._values.splice(He,1),this._itp.forEach(function(e){He<e[0]&&e[0]--})),He>-1}function yl(t){return this.has(t)?this._values[He]:void 0}function xl(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(He=t.length;He--&&!dl(t[He],e););else He=t.indexOf(e);return He>-1}function El(t){return xl.call(this,this._keys,t)}function Il(t,e){return this.has(t)?this._values[He]=e:this._values[this._keys.push(t)-1]=e,this}function Nl(){(this._keys||0).length=this._values.length=0}function Cl(){return Ro(this._itp,this._keys)}function wl(){return Ro(this._itp,this._values)}function Sl(){return Ro(this._itp,this._keys,this._values)}function Ro(t,e,n){var r=[0],s=!1;return t.push(r),{next:function(){var o,c=r[0];return!s&&c<e.length?(o=n?[e[c],n[c]]:e[c],r[0]++):(s=!0,t.splice(t.indexOf(r),1)),{done:s,value:o}}}}function Ll(){return this._values.length}function Rl(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}function tn(){this.map_=new _l}function gt(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=gt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof qe){var t=arguments[0];this.modelType=t,t===gt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=gt.FIXED,this.setScale(e)}else if(arguments[0]instanceof gt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}}function qe(){this.name=null;var t=arguments[0];this.name=t,qe.nameToTypeMap.put(t,this)}function st(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)st.call(this,new gt,0);else if(arguments.length===1){if(X(arguments[0],Tn)){var t=arguments[0];st.call(this,new gt,0,t)}else if(arguments[0]instanceof gt){var e=arguments[0];st.call(this,e,0,st.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];st.call(this,n,r,st.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.precisionModel=s,this.coordinateSequenceFactory=c,this.SRID=o}}function To(t){this.geometryFactory=t||new st}function Wt(t){this.parser=new To(t)}function vt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new E,this.intPt[1]=new E,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Bt(){vt.apply(this)}function Qn(){}function tr(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Y(){}function tt(){if(this.p0=null,this.p1=null,arguments.length===0)tt.call(this,new E,new E);else if(arguments.length===1){var t=arguments[0];tt.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];tt.call(this,new E(r,s),new E(o,c))}}function ft(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(k.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];ft.call(this),this.set(t)}else if(arguments[0]instanceof ft){var e=arguments[0];ft.call(this),this.matrix[m.INTERIOR][m.INTERIOR]=e.matrix[m.INTERIOR][m.INTERIOR],this.matrix[m.INTERIOR][m.BOUNDARY]=e.matrix[m.INTERIOR][m.BOUNDARY],this.matrix[m.INTERIOR][m.EXTERIOR]=e.matrix[m.INTERIOR][m.EXTERIOR],this.matrix[m.BOUNDARY][m.INTERIOR]=e.matrix[m.BOUNDARY][m.INTERIOR],this.matrix[m.BOUNDARY][m.BOUNDARY]=e.matrix[m.BOUNDARY][m.BOUNDARY],this.matrix[m.BOUNDARY][m.EXTERIOR]=e.matrix[m.BOUNDARY][m.EXTERIOR],this.matrix[m.EXTERIOR][m.INTERIOR]=e.matrix[m.EXTERIOR][m.INTERIOR],this.matrix[m.EXTERIOR][m.BOUNDARY]=e.matrix[m.EXTERIOR][m.BOUNDARY],this.matrix[m.EXTERIOR][m.EXTERIOR]=e.matrix[m.EXTERIOR][m.EXTERIOR]}}}function en(){this.areaBasePt=null,this.triangleCent3=new E,this.areasum2=0,this.cg3=new E,this.lineCentSum=new E,this.totalLength=0,this.ptCount=0,this.ptCentSum=new E;var t=arguments[0];this.areaBasePt=null,this.add(t)}function ts(t){this.message=t||""}function jt(){this.array_=[]}function xr(){this.treeSet=new Kt,this.list=new P}function nn(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];nn.call(this,nn.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputPts=xr.filterCoordinates(e),this.geomFactory=n}}function Er(){this.origin=null;var t=arguments[0];this.origin=t}function ee(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function Ir(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new tt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof rt&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];Ir.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.srcPts=n,this._isClosed=Ir.isClosed(n),this.snapTolerance=r}}function Qt(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Wr(){if(ee.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.snapTolerance=n,this.snapPts=r,this.isSelfSnap=s}}function me(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function $r(){this.commonCoord=null,this.ccFilter=new es}function es(){this.commonBitsX=new me,this.commonBitsY=new me}function Zr(){this.trans=null;var t=arguments[0];this.trans=t}function er(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function nr(){if(this.boundaryRule=qt.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new d;this.boundaryRule=t}}}function Nr(){}function Jr(){}function Po(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function ns(){}function rn(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Oo(){this._size=null,this.items=null,this._size=0,this.items=new P,this.items.add(null)}function On(){}function rs(){}function te(){if(this.childBoundables=new P,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function ne(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Pt(){if(this.root=null,this.built=!1,this.itemBoundables=new P,this.nodeCapacity=null,arguments.length===0)Pt.call(this,Pt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];T.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Tl(){}function is(){}function St(){if(arguments.length===0)St.call(this,St.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Pt.call(this,t)}}function Kr(){var t=arguments[0];te.call(this,t)}function re(){}function Mo(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.segString=t,this.coord=new E(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}function _o(){this.nodeMap=new Dt,this.edge=null;var t=arguments[0];this.edge=t}function Ba(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function bo(){}function Be(){this.nodeList=new _o(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function jr(){this.tempEnv1=new O,this.tempEnv2=new O,this.overlapSeg1=new tt,this.overlapSeg2=new tt}function Ao(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=r}function lt(){}function Pe(){}function Qr(){}function ss(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function Mn(){if(this.monoChains=new P,this.index=new St,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];ss.call(this,t)}}}function ti(){jr.apply(this),this.si=null;var t=arguments[0];this.si=t}function oe(){if(this.pt=null,arguments.length===1){var t=arguments[0];w.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];w.call(this,oe.msgWithCoord(e,n)),this.pt=new E(n)}}function ei(){}function xn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new P,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function ni(){this.li=new Bt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function rr(){this.nv=null;var t=arguments[0];this.nv=new ni(rr.toSegmentStrings(t))}function Cr(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function U(){}function ae(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[U.ON]=e}else if(arguments[0]instanceof ae){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.init(3),this.location[U.ON]=s,this.location[U.LEFT]=o,this.location[U.RIGHT]=c}}function Ot(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new ae(t),this.elt[1]=new ae(t)}else if(arguments[0]instanceof Ot){var e=arguments[0];this.elt[0]=new ae(e.elt[0]),this.elt[1]=new ae(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new ae(m.NONE),this.elt[1]=new ae(m.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.elt[0]=new ae(s,o,c),this.elt[1]=new ae(s,o,c)}else if(arguments.length===4){var f=arguments[0],y=arguments[1],R=arguments[2],_=arguments[3];this.elt[0]=new ae(m.NONE,m.NONE,m.NONE),this.elt[1]=new ae(m.NONE,m.NONE,m.NONE),this.elt[f].setLocations(y,R,_)}}function wr(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new P,this.pts=new P,this.label=new Ot(m.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new P,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function os(){var t=arguments[0],e=arguments[1];wr.call(this,t,e)}function ri(){var t=arguments[0],e=arguments[1];wr.call(this,t,e)}function _n(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function sn(){_n.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Ot(0,m.NONE)}function Sr(){this.nodeMap=new Dt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function Ve(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];Ve.call(this,e,n,r,null)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],f=arguments[3];Ve.call(this,s),this.init(o,c),this.label=f}}function ir(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Ve.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function sr(){}function ze(){if(this.edges=new P,this.nodes=null,this.edgeEndList=new P,arguments.length===0)this.nodes=new Sr(new sr);else if(arguments.length===1){var t=arguments[0];this.nodes=new Sr(t)}}function as(){this.geometryFactory=null,this.shellList=new P;var t=arguments[0];this.geometryFactory=t}function Do(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new P,this.resultLineList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Fo(){this.op=null,this.geometryFactory=null,this.resultPointList=new P;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function us(){}function ve(){this.geom=null;var t=arguments[0];this.geom=t}function or(){this.edgeMap=new Dt,this.edgeList=null,this.ptInAreaLocation=[m.NONE,m.NONE]}function ls(){or.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function Lr(){sr.apply(this)}function Go(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function on(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=on.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.eventType=on.INSERT,this.label=n,this.xValue=r,this.obj=s}}function hs(){}function bn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function cs(){hs.apply(this),this.events=new P,this.nOverlaps=null}function ar(){this.min=p.POSITIVE_INFINITY,this.max=p.NEGATIVE_INFINITY}function qo(){}function gs(){ar.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function fs(){ar.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Bo(){this.leaves=new P,this.root=null,this.level=0}function $t(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function ds(){this.items=new P}function ii(){this.index=null;var t=arguments[0];if(!X(t,Qe))throw new d;this.index=new ms(t)}function ps(){this.counter=null;var t=arguments[0];this.counter=t}function ms(){this.index=new Bo;var t=arguments[0];this.init(t)}function Vo(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new E(t),this.segmentIndex=e,this.dist=n}function zo(){this.nodeMap=new Dt,this.edge=null;var t=arguments[0];this.edge=t}function si(){}function ko(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new O,this.env2=new O;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new si;this.startIndex=e.getChainStartIndices(this.pts)}function Oe(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Oe.NULL_VALUE}function Ne(){if(_n.apply(this),this.pts=null,this.env=null,this.eiList=new zo(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Oe,this.depthDelta=0,arguments.length===1){var t=arguments[0];Ne.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function ue(){if(ze.apply(this),this.parentGeom=null,this.lineEdgeMap=new tn,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new nr,arguments.length===2){var t=arguments[0],e=arguments[1];ue.call(this,t,e,qt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.argIndex=n,this.parentGeom=r,this.boundaryNodeRule=s,r!==null&&this.add(r)}}function An(){if(this.li=new Bt,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new ue(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];An.call(this,e,n,qt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];r.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new ue(0,r,o),this.arg[1]=new ue(1,s,o)}}function Dn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Dn.orientation(t)}function vs(){this.edges=new P,this.ocaMap=new Dt}function J(){this.ptLocator=new nr,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new vs,this.resultPolyList=new P,this.resultLineList=new P,this.resultPointList=new P;var t=arguments[0],e=arguments[1];An.call(this,t,e),this.graph=new ze(new Lr),this.geomFact=t.getFactory()}function Ce(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Vt(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Me(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function Rr(){this.poly=null,this.centreY=null,this.hiY=p.MAX_VALUE,this.loY=-p.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Me.avg(this.loY,this.hiY)}function ys(){this.centroid=null,this.minDistance=p.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function xs(){this.centroid=null,this.minDistance=p.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function et(){}function Et(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function En(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Zt(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new tt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];Zt.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Fn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function oi(){ee.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function an(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function le(){this._isMarked=!1;var t=arguments[0];an.call(this,t)}function Tr(){this.vertexMap=new tn}function Es(){this._isStart=!1;var t=arguments[0];le.call(this,t)}function Is(){Tr.apply(this)}function ai(){this.result=null,this.factory=null,this.graph=null,this.lines=new P,this.nodeEdgeStack=new jt,this.ringStartEdge=null,this.graph=new Is}function ke(){this.items=new P,this.subnode=new Array(4).fill(null)}function ur(){}function Pl(t,e){var n,r,s,o,c={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},f={32:8,64:11}[t];if(o||(n=0>e||0>1/e,isFinite(e)||(o=c[t],n&&(o.d+=1<<t/4-1),r=Math.pow(2,f)-1,s=0)),!o){for(r={32:127,64:1023}[t],s=Math.abs(e);s>=2;)r++,s/=2;for(;1>s&&r>0;)r--,s*=2;0>=r&&(s/=2),t===32&&r>254&&(o={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,f)-1,s=0)}return r}function ui(){this.pt=new E,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function In(){ke.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Gn(){}function lr(){ke.apply(this)}function qn(){this.root=null,this.minExtent=1,this.root=new lr}function Uo(t){this.geometryFactory=t||new st}function Va(t){this.geometryFactory=t||new st,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Uo(this.geometryFactory)}function za(){this.parser=new Uo(this.geometryFactory)}function ka(t){this.geometryFactory=t||new st,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new To(this.geometryFactory)}function li(t){return[t.x,t.y]}function Ua(t){this.geometryFactory=t||new st}function hi(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];hi.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this.noder=n,this.scaleFactor=r,this.isScaled=!this.isIntegerPrecision()}}function ci(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Ns(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function ht(){if(this.quadrantSegments=ht.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=ht.CAP_ROUND,this.joinStyle=ht.JOIN_ROUND,this.mitreLimit=ht.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=ht.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(o),this.setMitreLimit(c)}}}function Xo(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Cs(){this.array_=[]}function Yo(){this.finder=null,this.dirEdgeList=new P,this.nodes=new P,this.rightMostCoord=null,this.env=null,this.finder=new Xo}function Xt(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Y.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function gi(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new P}function Ue(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new tt,this.seg1=new tt,this.offset0=new tt,this.offset1=new tt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Bt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===ht.JOIN_ROUND&&(this.closingSegLengthFactor=Ue.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function fi(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function ws(){this.subgraphs=null,this.seg=new tt,this.cga=new Y;var t=arguments[0];this.subgraphs=t}function Ss(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new tt(t),this.leftDepth=e}function Ho(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function di(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function Bn(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new vs;var t=arguments[0];this.bufParams=t}function pi(){this.li=new Bt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Pr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new d;e!==1&&(this.pt=new E(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new E,this.p1Scaled=new E),this.initCorners(this.pt)}function Vn(){this.tempEnv1=new O,this.selectedSegment=new tt}function Ls(){this.index=null;var t=arguments[0];this.index=t}function mi(){Vn.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function Wo(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new P}function $o(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Bt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Yt(){if(this.argGeom=null,this.distance=null,this.bufParams=new ht,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function hr(){this.comps=null;var t=arguments[0];this.comps=t}function he(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];he.call(this,t,he.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.component=n,this.segIndex=r,this.pt=s}}function cr(){this.pts=null;var t=arguments[0];this.pts=t}function vi(){this.locations=null;var t=arguments[0];this.locations=t}function _e(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new nr,this.minDistanceLocation=null,this.minDistance=p.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];_e.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=s}}function Zo(){this.factory=null,this.directedEdges=new P,this.coordinates=null;var t=arguments[0];this.factory=t}function we(){this._isMarked=!1,this._isVisited=!1,this.data=null}function ye(){we.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=lt.quadrant(s,o),this.angle=Math.atan2(o,s)}function yi(){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];ye.call(this,t,e,n,r)}function Xe(){if(we.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function Jo(){this.outEdges=new P,this.sorted=!1}function un(){if(we.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];un.call(this,t,new Jo)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function Rs(){Xe.apply(this),this.line=null;var t=arguments[0];this.line=t}function Ko(){this.nodeMap=new Dt}function Or(){this.edges=new kt,this.dirEdges=new kt,this.nodeMap=new Ko}function Ts(){Or.apply(this)}function jo(){this.graph=new Ts,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function xi(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];ye.call(this,t,e,n,r)}function Ps(){Xe.apply(this),this.line=null;var t=arguments[0];this.line=t}function be(){this.factory=null,this.deList=new P,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Qo(){}function Ft(){Or.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function ce(){if(this.lineStringAdder=new Os(this),this.graph=null,this.dangles=new P,this.cutEdges=new P,this.invalidRingLines=new P,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)ce.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function Os(){this.p=null;var t=arguments[0];this.p=t}function Ms(){}function Ei(){if(this.edgeEnds=new P,arguments.length===1){var t=arguments[0];Ei.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];Ve.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Ot(e.getLabel())),this.insert(e)}}function _s(){or.apply(this)}function bs(){var t=arguments[0],e=arguments[1];sn.call(this,t,e)}function Ii(){sr.apply(this)}function As(){this.li=new Bt,this.ptLocator=new nr,this.arg=null,this.nodes=new Sr(new Ii),this.im=null,this.isolatedEdges=new P,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Ni(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function ta(){this.li=new Bt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new E(t.getMinX(),t.getMinY()),this.diagUp1=new E(t.getMaxX(),t.getMaxY()),this.diagDown0=new E(t.getMinX(),t.getMaxY()),this.diagDown1=new E(t.getMaxX(),t.getMinY())}function zn(){this._isDone=!1}function Mr(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Ds(){zn.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Fs(){zn.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Gs(){zn.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new E,this.p1=new E;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new ta(this.rectEnv)}function ct(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];An.call(this,t,e),this._relate=new As(this.arg)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];An.call(this,n,r,s),this._relate=new As(this.arg)}}function xe(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=xe.extractFactory(t),this.inputGeoms=t}function Ci(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function kn(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Se(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new P)}function Un(){if(this.polygons=new P,this.lines=new P,this.points=new P,this.geomFact=null,arguments.length===1){if(X(arguments[0],V)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof $){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.geomFact=r,this.extract(n)}}function wi(){this.geometryFactory=new st,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Ye(){this.items=new P,this.subnode=[null,null]}function ln(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.init(e,n)}}function Si(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Nn(){Ye.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function _r(){Ye.apply(this)}function br(){this.root=null,this.minExtent=1,this.root=new _r}function ea(){}function qs(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new ln;var t=arguments[0];this.ring=t,this.buildIndex()}function Li(){Vn.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function na(){this.nodes=new Sr(new Ii)}function ra(){this.li=new Bt,this.geomGraph=null,this.nodeGraph=new na,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function ia(){this.graph=null,this.rings=new P,this.totalEnv=new O,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function ut(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];ut.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.errorType=e,n!==null&&(this.pt=n.copy())}}function Le(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Bs(){de.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function gr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Ri(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new tt;var t=arguments[0];this.pts=t}function Ar(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Ti(){ee.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function Pi(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];Pi.call(this,t,e,null,-1)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];tt.call(this,n,r),this.parent=s,this.index=o}}function Cn(){if(this.parentLine=null,this.segs=null,this.resultSegs=new P,this.minimumSize=null,arguments.length===1){var t=arguments[0];Cn.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Dr(){this.index=new qn}function sa(){this.querySeg=null,this.items=new P;var t=arguments[0];this.querySeg=t}function Oi(){this.li=new Bt,this.inputIndex=new Dr,this.outputIndex=new Dr,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function oa(){this.inputIndex=new Dr,this.outputIndex=new Dr,this.distanceTolerance=0}function fr(){this.inputGeom=null,this.lineSimplifier=new oa,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function Mi(){ee.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function Vs(){this.tps=null;var t=arguments[0];this.tps=t}function Fr(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function aa(){}function _i(){}function Nt(){}function dt(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new E(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p=new E(e,n)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.p=new E(r,s,o)}}function Xn(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];dt.call(this,t)}function Rt(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function bi(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function ua(){}function zs(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Gr(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];w.call(this,t)}else if(arguments[0]instanceof tt){var e=arguments[0];w.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new tt(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];w.call(this,Gr.msgWithSpatial(n,r)),this.seg=new tt(r)}}function qr(){}function Ee(){this.visitedKey=0,this.quadEdges=new P,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new tt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Ee.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new zs(this)}function ks(){}function Us(){this.triList=new P}function Xs(){this.triList=new P}function Ys(){this.coordList=new A,this.triCoords=new P}function dr(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new tt(t,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.ls=new tt(n,r),this.data=s}else if(arguments.length===6){var o=arguments[0],c=arguments[1],f=arguments[2],y=arguments[3],R=arguments[4],_=arguments[5];dr.call(this,new E(o,c,f),new E(y,R,_))}else if(arguments.length===7){var D=arguments[0],q=arguments[1],Z=arguments[2],K=arguments[3],Q=arguments[4],It=arguments[5],_t=arguments[6];dr.call(this,new E(D,q,Z),new E(K,Q,It),_t)}}function Ai(){}function Hs(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new E(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.p=new E(n,r),this.left=null,this.right=null,this.count=1,this.data=s}}function pr(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)pr.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function Ws(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Yn(){this.initialVertices=null,this.segVertices=null,this.segments=new P,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new _i,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new P(t),this.tolerance=e,this.kdt=new pr(e)}function Jt(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Br(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new Dt}function Di(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function $s(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),r=arguments[1],s=parseInt(r,10)||0,o=0>s?Math.max(n+s,0):Math.min(s,n),c=arguments[2],f=c===void 0?n:parseInt(c,10)||0,y=0>f?Math.max(n+f,0):Math.min(f,n);y>o;o++)e[o]=t;return e}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},u(g.prototype,{interfaces_:function(){return[]},getClass:function(){return g}}),g.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},p.isNaN=function(t){return Number.isNaN(t)},p.doubleToLongBits=function(t){return t},p.longBitsToDouble=function(t){return t},p.isInfinite=function(t){return!Number.isFinite(t)},p.MAX_VALUE=Number.MAX_VALUE,S(F,w),u(F.prototype,{interfaces_:function(){return[]},getClass:function(){return F}}),u(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.shouldNeverReachHere=function(){if(arguments.length===0)T.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new F("Should never reach here"+(t!==null?": "+t:""))}},T.isTrue=function(){if(arguments.length===1){var t=arguments[0];T.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e)throw n===null?new F:new F(n)}},T.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];T.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new F("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}},u(E.prototype,{setOrdinate:function(t,e){switch(t){case E.X:this.x=e;break;case E.Y:this.y=e;break;case E.Z:this.z=e;break;default:throw new d}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x!==t.x?!1:this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return g.equalsWithTolerance(this.x,e.x,n)?!!g.equalsWithTolerance(this.y,e.y,n):!1}},getOrdinate:function(t){switch(t){case E.X:return this.x;case E.Y:return this.y;case E.Z:return this.z}throw new d},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||p.isNaN(this.z)&&p.isNaN(t.z))},equals:function(t){return t instanceof E?this.equals2D(t):!1},equalInZ:function(t,e){return g.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return T.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new E(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+E.hashCode(this.x),t=37*t+E.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[v,I,C]},getClass:function(){return E}}),E.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=p.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},u(z.prototype,{compare:function(t,e){var n=t,r=e,s=z.compare(n.x,r.x);if(s!==0)return s;var o=z.compare(n.y,r.y);if(o!==0)return o;if(this.dimensionsToTest<=2)return 0;var c=z.compare(n.z,r.z);return c},interfaces_:function(){return[x]},getClass:function(){return z}}),z.compare=function(t,e){return e>t?-1:t>e?1:p.isNaN(t)?p.isNaN(e)?0:-1:p.isNaN(e)?1:0},E.DimensionalComparator=z,E.serialVersionUID=6683108902428367e3,E.NULL_ORDINATE=p.NaN,E.X=0,E.Y=1,E.Z=2,H.prototype.hasNext=function(){},H.prototype.next=function(){},H.prototype.remove=function(){},V.prototype.add=function(){},V.prototype.addAll=function(){},V.prototype.isEmpty=function(){},V.prototype.iterator=function(){},V.prototype.size=function(){},V.prototype.toArray=function(){},V.prototype.remove=function(){},L.prototype=new Error,L.prototype.name="IndexOutOfBoundsException",N.prototype=Object.create(V.prototype),N.prototype.constructor=N,N.prototype.get=function(){},N.prototype.set=function(){},N.prototype.isEmpty=function(){},M.prototype=new Error,M.prototype.name="NoSuchElementException",W.prototype=new Error,W.prototype.name="OperationNotSupported",P.prototype=Object.create(N.prototype),P.prototype.constructor=P,P.prototype.ensureCapacity=function(){},P.prototype.interfaces_=function(){return[N,V]},P.prototype.add=function(t){return this.array_.push(t),!0},P.prototype.clear=function(){this.array_=[]},P.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},P.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},P.prototype.iterator=function(){return new Fi(this)},P.prototype.get=function(t){if(0>t||t>=this.size())throw new L;return this.array_[t]},P.prototype.isEmpty=function(){return this.array_.length===0},P.prototype.size=function(){return this.array_.length},P.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},P.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Fi=function(t){this.arrayList_=t,this.position_=0};Fi.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new M;return this.arrayList_.get(this.position_++)},Fi.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Fi.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Fi.prototype.remove=function(){throw new W},S(A,P),u(A.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return P.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=P.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},toCoordinateArray:function(){return this.toArray(A.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];P.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof E&&typeof arguments[1]=="boolean"){var r=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(r))return null}P.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],f=arguments[1];return this.add(c,f),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var y=arguments[0],R=arguments[1],_=arguments[2];if(_)for(var D=0;D<y.length;D++)this.add(y[D],R);else for(var D=y.length-1;D>=0;D--)this.add(y[D],R);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof E){var q=arguments[0],Z=arguments[1],K=arguments[2];if(!K){var Q=this.size();if(Q>0){if(q>0){var It=this.get(q-1);if(It.equals2D(Z))return null}if(Q>q){var _t=this.get(q);if(_t.equals2D(Z))return null}}}P.prototype.add.call(this,q,Z)}}else if(arguments.length===4){var Fe=arguments[0],mr=arguments[1],Ks=arguments[2],js=arguments[3],Qs=1;Ks>js&&(Qs=-1);for(var D=Ks;D!==js;D+=Qs)this.add(Fe[D],mr);return!0}},closeRing:function(){this.size()>0&&this.add(new E(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return A}}),A.coordArrayType=new Array(0).fill(null),u(O.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof O))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new O;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,r=this.maxx<t.maxx?this.maxx:t.maxx,s=this.maxy<t.maxy?this.maxy:t.maxy;return new O(e,r,n,s)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof O){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this.minx&&n<=this.maxx&&r>=this.miny&&r<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof E){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this.maxx||n<this.minx||r>this.maxy||r<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=r,this.maxy=r):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),r<this.miny&&(this.miny=r),r>this.maxy&&(this.maxy=r))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},centre:function(){return this.isNull()?null:new E((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],f=arguments[3];o>s?(this.minx=s,this.maxx=o):(this.minx=o,this.maxx=s),f>c?(this.miny=c,this.maxy=f):(this.miny=f,this.maxy=c)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+E.hashCode(this.minx),t=37*t+E.hashCode(this.maxx),t=37*t+E.hashCode(this.miny),t=37*t+E.hashCode(this.maxy)},interfaces_:function(){return[v,C]},getClass:function(){return O}}),O.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],f=Math.min(o.x,c.x),y=Math.max(o.x,c.x),R=Math.min(r.x,s.x),_=Math.max(r.x,s.x);return R>y||f>_?!1:(f=Math.min(o.y,c.y),y=Math.max(o.y,c.y),R=Math.min(r.y,s.y),_=Math.max(r.y,s.y),R>y?!1:!(f>_))}},O.serialVersionUID=5873921885273102e3,S(G,B),u(G.prototype,{interfaces_:function(){return[]},getClass:function(){return G}}),u(m.prototype,{interfaces_:function(){return[]},getClass:function(){return m}}),m.toLocationSymbol=function(t){switch(t){case m.EXTERIOR:return"e";case m.BOUNDARY:return"b";case m.INTERIOR:return"i";case m.NONE:return"-"}throw new d},m.INTERIOR=0,m.BOUNDARY=1,m.EXTERIOR=2,m.NONE=-1,u(nt.prototype,{interfaces_:function(){return[]},getClass:function(){return nt}}),nt.log10=function(t){var e=Math.log(t);return p.isInfinite(e)||p.isNaN(e)?e:e/nt.LOG_10},nt.min=function(t,e,n,r){var s=t;return s>e&&(s=e),s>n&&(s=n),s>r&&(s=r),s},nt.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],o=arguments[2];return s>r?s:r>o?o:r}},nt.wrap=function(t,e){return 0>t?e- -t%e:t%e},nt.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],f=arguments[3],r=s;return o>r&&(r=o),c>r&&(r=c),f>r&&(r=f),r}},nt.average=function(t,e){return(t+e)/2},nt.LOG_10=Math.log(10),yt.prototype.append=function(t){this.str+=t},yt.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},yt.prototype.toString=function(t){return this.str},Ct.prototype.intValue=function(){return this.value},Ct.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ct.isNaN=function(t){return Number.isNaN(t)},bt.isWhitespace=function(t){return 32>=t&&t>=0||t==127},bt.toUpperCase=function(t){return t.toUpperCase()},u(b.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),r=b.magnitude(n.hi),s=b.TEN.pow(r);n=n.divide(s),n.gt(b.TEN)?(n=n.divide(b.TEN),r+=1):n.lt(b.ONE)&&(n=n.multiply(b.TEN),r-=1);for(var o=r+1,c=new yt,f=b.MAX_PRINT_DIGITS-1,y=0;f>=y;y++){t&&y===o&&c.append(".");var R=Math.trunc(n.hi);if(0>R)break;var _=!1,D=0;R>9?(_=!0,D="9"):D="0"+R,c.append(D),n=n.subtract(b.valueOf(R)).multiply(b.TEN),_&&n.selfAdd(b.TEN);var q=!0,Z=b.magnitude(n.hi);if(0>Z&&Math.abs(Z)>=f-y&&(q=!1),!q)break}return e[0]=r,c.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof b){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof b){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof b){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,o=null,c=null,f=null,y=null,R=null,_=null,D=null;return y=this.hi/n,R=b.SPLIT*y,s=R-y,D=b.SPLIT*n,s=R-s,o=y-s,c=D-n,_=y*n,c=D-c,f=n-c,D=s*c-_+s*f+o*c+o*f,R=(this.hi-_-D+this.lo-y*r)/n,D=y+R,this.hi=D,this.lo=y-D+R,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof b){var t=arguments[0],e=null,n=null,r=null,s=null,o=null,c=null,f=null,y=null;o=this.hi/t.hi,c=b.SPLIT*o,e=c-o,y=b.SPLIT*t.hi,e=c-e,n=o-e,r=y-t.hi,f=o*t.hi,r=y-r,s=t.hi-r,y=e*r-f+e*s+n*r+n*s,c=(this.hi-f-y+this.lo-o*t.lo)/t.hi,y=o+c;var R=y,_=o-y+c;return new b(R,_)}if(typeof arguments[0]=="number"){var D=arguments[0];return p.isNaN(D)?b.createNaN():b.copy(this).selfDivide(D,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return b.valueOf(1);var e=new b(this),n=b.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return b.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new b(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof b){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return b.valueOf(0);if(this.isNegative())return b.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=b.valueOf(e),r=this.subtract(n.sqr()),s=r.hi*(.5*t);return n.add(s)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof b){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],n=null,r=null,s=null,o=null,c=null,f=null;return s=this.hi+e,c=s-this.hi,o=s-c,o=e-c+(this.hi-o),f=o+this.lo,n=s+f,r=f+(s-n),this.hi=n+r,this.lo=r+(n-this.hi),this}}else if(arguments.length===2){var y=arguments[0],R=arguments[1],n=null,r=null,_=null,D=null,s=null,o=null,c=null,f=null;s=this.hi+y,_=this.lo+R,c=s-this.hi,f=_-this.lo,o=s-c,D=_-f,o=y-c+(this.hi-o),D=R-f+(this.lo-D),c=o+_,n=s+c,r=c+(s-n),c=D+r;var q=n+c,Z=c+(n-q);return this.hi=q,this.lo=Z,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof b){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,o=null,c=null,f=null,y=null,R=null;y=b.SPLIT*this.hi,s=y-this.hi,R=b.SPLIT*n,s=y-s,o=this.hi-s,c=R-n,y=this.hi*n,c=R-c,f=n-c,R=s*c-y+s*f+o*c+o*f+(this.hi*r+this.lo*n);var _=y+R;s=y-_;var D=R+s;return this.hi=_,this.lo=D,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return b.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new b(t,e)},negate:function(){return this.isNaN()?this:new b(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof b){var t=arguments[0];return t.isNaN()?b.createNaN():b.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return p.isNaN(e)?b.createNaN():b.copy(this).selfMultiply(e,0)}},isNaN:function(){return p.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=b.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(0>r)s="0."+b.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,c=b.stringOfChar("0",o);s=n+c+".0"}return this.isNegative()?"-"+s:s},reciprocal:function(){var t=null,e=null,n=null,r=null,s=null,o=null,c=null,f=null;s=1/this.hi,o=b.SPLIT*s,t=o-s,f=b.SPLIT*this.hi,t=o-t,e=s-t,n=f-this.hi,c=s*this.hi,n=f-n,r=this.hi-n,f=t*n-c+t*r+e*n+e*r,o=(1-c-f-s*this.lo)/this.hi;var y=s+o,R=s-y+o;return new b(y,R)},toSciNotation:function(){if(this.isZero())return b.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=b.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var o=n.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r},abs:function(){return this.isNaN()?b.NaN:this.isNegative()?this.negate():new b(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof b){var t=arguments[0];return b.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return b.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof b){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.hi=n,this.lo=r}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?b.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[C,v,I]},getClass:function(){return b}}),b.sqr=function(t){return b.valueOf(t).selfMultiply(t)},b.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return b.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new b(e)}},b.sqrt=function(t){return b.valueOf(t).sqrt()},b.parse=function(t){for(var e=0,n=t.length;bt.isWhitespace(t.charAt(e));)e++;var r=!1;if(n>e){var s=t.charAt(e);s!=="-"&&s!=="+"||(e++,s==="-"&&(r=!0))}for(var o=new b,c=0,f=0,y=0;!(e>=n);){var R=t.charAt(e);if(e++,bt.isDigit(R)){var _=R-"0";o.selfMultiply(b.TEN),o.selfAdd(_),c++}else{if(R!=="."){if(R==="e"||R==="E"){var D=t.substring(e);try{y=Ct.parseInt(D)}catch(Q){throw Q instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+D+" in string "+t):Q}finally{}break}throw new NumberFormatException("Unexpected character '"+R+"' at position "+e+" in string "+t)}f=c}}var q=o,Z=c-f-y;if(Z===0)q=o;else if(Z>0){var K=b.TEN.pow(Z);q=o.divide(K)}else if(0>Z){var K=b.TEN.pow(-Z);q=o.multiply(K)}return r?q.negate():q},b.createNaN=function(){return new b(p.NaN,p.NaN)},b.copy=function(t){return new b(t)},b.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),s=Math.pow(10,r);return e>=10*s&&(r+=1),r},b.stringOfChar=function(t,e){for(var n=new yt,r=0;e>r;r++)n.append(t);return n.toString()},b.PI=new b(3.141592653589793,12246467991473532e-32),b.TWO_PI=new b(6.283185307179586,24492935982947064e-32),b.PI_2=new b(1.5707963267948966,6123233995736766e-32),b.E=new b(2.718281828459045,14456468917292502e-32),b.NaN=new b(p.NaN,p.NaN),b.EPS=123259516440783e-46,b.SPLIT=134217729,b.MAX_PRINT_DIGITS=32,b.TEN=b.valueOf(10),b.ONE=b.valueOf(1),b.SCI_NOT_EXPONENT_CHAR="E",b.SCI_NOT_ZERO="0.0E0",u(Lt.prototype,{interfaces_:function(){return[]},getClass:function(){return Lt}}),Lt.orientationIndex=function(t,e,n){var r=Lt.orientationIndexFilter(t,e,n);if(1>=r)return r;var s=b.valueOf(e.x).selfAdd(-t.x),o=b.valueOf(e.y).selfAdd(-t.y),c=b.valueOf(n.x).selfAdd(-e.x),f=b.valueOf(n.y).selfAdd(-e.y);return s.selfMultiply(f).selfSubtract(o.selfMultiply(c)).signum()},Lt.signOfDet2x2=function(t,e,n,r){var s=t.multiply(r).selfSubtract(e.multiply(n));return s.signum()},Lt.intersection=function(t,e,n,r){var s=b.valueOf(r.y).selfSubtract(n.y).selfMultiply(b.valueOf(e.x).selfSubtract(t.x)),o=b.valueOf(r.x).selfSubtract(n.x).selfMultiply(b.valueOf(e.y).selfSubtract(t.y)),c=s.subtract(o),f=b.valueOf(r.x).selfSubtract(n.x).selfMultiply(b.valueOf(t.y).selfSubtract(n.y)),y=b.valueOf(r.y).selfSubtract(n.y).selfMultiply(b.valueOf(t.x).selfSubtract(n.x)),R=f.subtract(y),_=R.selfDivide(c).doubleValue(),D=b.valueOf(t.x).selfAdd(b.valueOf(e.x).selfSubtract(t.x).selfMultiply(_)).doubleValue(),q=b.valueOf(e.x).selfSubtract(t.x).selfMultiply(b.valueOf(t.y).selfSubtract(n.y)),Z=b.valueOf(e.y).selfSubtract(t.y).selfMultiply(b.valueOf(t.x).selfSubtract(n.x)),K=q.subtract(Z),Q=K.selfDivide(c).doubleValue(),It=b.valueOf(n.y).selfAdd(b.valueOf(r.y).selfSubtract(n.y).selfMultiply(Q)).doubleValue();return new E(D,It)},Lt.orientationIndexFilter=function(t,e,n){var r=null,s=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),c=s-o;if(s>0){if(0>=o)return Lt.signum(c);r=s+o}else{if(!(0>s)||o>=0)return Lt.signum(c);r=-s-o}var f=Lt.DP_SAFE_EPSILON*r;return c>=f||-c>=f?Lt.signum(c):2},Lt.signum=function(t){return t>0?1:0>t?-1:0},Lt.DP_SAFE_EPSILON=1e-15,u(ot.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[I]},getClass:function(){return ot}}),ot.X=0,ot.Y=1,ot.Z=2,ot.M=3,pt.arraycopy=function(t,e,n,r,s){for(var o=0,c=e;e+s>c;c++)n[r+o]=t[c],o++},pt.getProperty=function(t){return{"line.separator":`
`}[t]},u(Ht.prototype,{getY:function(){var t=this.y/this.w;if(p.isNaN(t)||p.isInfinite(t))throw new G;return t},getX:function(){var t=this.x/this.w;if(p.isNaN(t)||p.isInfinite(t))throw new G;return t},getCoordinate:function(){var t=new E;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.intersection=function(t,e,n,r){var s=t.y-e.y,o=e.x-t.x,c=t.x*e.y-e.x*t.y,f=n.y-r.y,y=r.x-n.x,R=n.x*r.y-r.x*n.y,_=o*R-y*c,D=f*c-s*R,q=s*y-f*o,Z=_/q,K=D/q;if(p.isNaN(Z)||p.isInfinite(Z)||p.isNaN(K)||p.isInfinite(K))throw new G;return new E(Z,K)},u(Tn.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||X(arguments[0],ot))},interfaces_:function(){return[]},getClass:function(){return Tn}}),u(ge.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ge}}),u($.prototype,{isGeometryCollection:function(){return this.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof $){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof $))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply($.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t===null?!1:this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION)throw new d},equal:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new O(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),o=r.next(),c=s.compareTo(o);if(c!==0)return c}return n.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===$.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===$.SORTINDEX_MULTIPOINT||this.getSortIndex()===$.SORTINDEX_MULTILINESTRING||this.getSortIndex()===$.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[I,v,C]},getClass:function(){return $}}),$.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},$.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},$.serialVersionUID=8763622679187377e3,$.SORTINDEX_POINT=0,$.SORTINDEX_MULTIPOINT=1,$.SORTINDEX_LINESTRING=2,$.SORTINDEX_LINEARRING=3,$.SORTINDEX_MULTILINESTRING=4,$.SORTINDEX_POLYGON=5,$.SORTINDEX_MULTIPOLYGON=6,$.SORTINDEX_GEOMETRYCOLLECTION=7,$.geometryChangedFilter={interfaces_:function(){return[ge]},filter:function(t){t.geometryChangedAction()}},u(Pn.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Pn}}),u(qt.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return qt}}),u(Hi.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[qt]},getClass:function(){return Hi}}),u(Wi.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[qt]},getClass:function(){return Wi}}),u($i.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[qt]},getClass:function(){return $i}}),u(Zi.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[qt]},getClass:function(){return Zi}}),qt.Mod2BoundaryNodeRule=Hi,qt.EndPointBoundaryNodeRule=Wi,qt.MultiValentEndPointBoundaryNodeRule=$i,qt.MonoValentEndPointBoundaryNodeRule=Zi,qt.MOD2_BOUNDARY_RULE=new Hi,qt.ENDPOINT_BOUNDARY_RULE=new Wi,qt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new $i,qt.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Zi,qt.OGC_SFS_BOUNDARY_RULE=qt.MOD2_BOUNDARY_RULE,u(j.prototype,{interfaces_:function(){return[]},getClass:function(){return j}}),j.isRing=function(t){return t.length<4?!1:!!t[0].equals2D(t[t.length-1])},j.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(j.indexOf(r,e)<0)return r}return null},j.scroll=function(t,e){var n=j.indexOf(e,t);if(0>n)return null;var r=new Array(t.length).fill(null);pt.arraycopy(t,n,r,0,t.length-n),pt.arraycopy(t,0,r,t.length-n,n),pt.arraycopy(r,0,t,0,t.length)},j.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var n=0;n<r.length;n++)if(o.compare(r[n],s[n])!==0)return!1;return!0}},j.intersection=function(t,e){for(var n=new A,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},j.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},j.removeRepeatedPoints=function(t){if(!j.hasRepeatedPoints(t))return t;var e=new A(t,!1);return e.toCoordinateArray()},j.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;n>=r;r++){var s=t[r];t[r]=t[e-r],t[e-r]=s}},j.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var s=0,n=0;n<t.length;n++)t[n]!==null&&(r[s++]=t[n]);return r},j.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new E(t[n]);return e}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],f=arguments[4],n=0;f>n;n++)o[c+n]=new E(r[s+n])},j.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[t.length-n-1];if(r.compareTo(s)!==0)return!1}return!0},j.envelope=function(t){for(var e=new O,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},j.toCoordinateArray=function(t){return t.toArray(j.coordArrayType)},j.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},j.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},j.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1},j.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0},j.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e},j.extract=function(t,e,n){e=nt.clamp(e,0,t.length),n=nt.clamp(n,-1,t.length);var r=n-e+1;0>n&&(r=0),e>=t.length&&(r=0),e>n&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var o=0,c=e;n>=c;c++)s[o++]=t[c];return s},u(Eo.prototype,{compare:function(t,e){var n=t,r=e;return j.compare(n,r)},interfaces_:function(){return[x]},getClass:function(){return Eo}}),u(Io.prototype,{compare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var s=j.compare(n,r),o=j.isEqualReversed(n,r);return o?0:s},OLDcompare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var s=j.increasingDirection(n),o=j.increasingDirection(r),c=s>0?0:n.length-1,f=o>0?0:n.length-1,y=0;y<n.length;y++){var R=n[c].compareTo(r[f]);if(R!==0)return R;c+=s,f+=o}return 0},interfaces_:function(){return[x]},getClass:function(){return Io}}),j.ForwardComparator=Eo,j.BidirectionalComparator=Io,j.coordArrayType=new Array(0).fill(null),Kn.prototype.get=function(){},Kn.prototype.put=function(){},Kn.prototype.size=function(){},Kn.prototype.values=function(){},Kn.prototype.entrySet=function(){},Da.prototype=new Kn,Ji.prototype=new V,Ji.prototype.contains=function(){},kt.prototype=new Ji,kt.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r===t)return!0}return!1},kt.prototype.add=function(t){return this.contains(t)?!1:(this.array_.push(t),!0)},kt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},kt.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},kt.prototype.size=function(){return this.array_.length},kt.prototype.isEmpty=function(){return this.array_.length===0},kt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},kt.prototype.iterator=function(){return new Zs(this)};var Zs=function(t){this.hashSet_=t,this.position_=0};Zs.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new M;return this.hashSet_.array_[this.position_++]},Zs.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Zs.prototype.remove=function(){throw new W};var hn=0,Hn=1;Dt.prototype=new Da,Dt.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Dt.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:hn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,s=this.root_;do if(n=s,r=t.compareTo(s.key),0>r)s=s.left;else{if(!(r>0)){var o=s.value;return s.value=e,o}s=s.right}while(s!==null);var c={key:t,left:null,right:null,value:e,parent:n,color:hn,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=c:n.right=c,this.fixAfterInsertion(c),this.size_++,null},Dt.prototype.fixAfterInsertion=function(t){for(t.color=Hn;t!=null&&t!=this.root_&&t.parent.color==Hn;)if(xt(t)==No(xt(xt(t)))){var e=Ga(xt(xt(t)));Fa(e)==Hn?(Je(xt(t),hn),Je(e,hn),Je(xt(xt(t)),Hn),t=xt(xt(t))):(t==Ga(xt(t))&&(t=xt(t),this.rotateLeft(t)),Je(xt(t),hn),Je(xt(xt(t)),Hn),this.rotateRight(xt(xt(t))))}else{var e=No(xt(xt(t)));Fa(e)==Hn?(Je(xt(t),hn),Je(e,hn),Je(xt(xt(t)),Hn),t=xt(xt(t))):(t==No(xt(t))&&(t=xt(t),this.rotateRight(t)),Je(xt(t),hn),Je(xt(xt(t)),Hn),this.rotateLeft(xt(xt(t))))}this.root_.color=hn},Dt.prototype.values=function(){var t=new P,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=Dt.successor(e))!==null;)t.add(e.value);return t},Dt.prototype.entrySet=function(){var t=new kt,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=Dt.successor(e))!==null;)t.add(e);return t},Dt.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Dt.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Dt.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},Dt.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,n=t;e!==null&&n===e.right;)n=e,e=e.parent;return e},Dt.prototype.size=function(){return this.size_},u(Ki.prototype,{interfaces_:function(){return[]},getClass:function(){return Ki}}),qa.prototype=new Ji,Kt.prototype=new qa,Kt.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===0)return!0}return!1},Kt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Kt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Kt.prototype.remove=function(t){throw new W},Kt.prototype.size=function(){return this.array_.length},Kt.prototype.isEmpty=function(){return this.array_.length===0},Kt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Kt.prototype.iterator=function(){return new Js(this)};var Js=function(t){this.treeSet_=t,this.position_=0};Js.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new M;return this.treeSet_.array_[this.position_++]},Js.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Js.prototype.remove=function(){throw new W},Ke.sort=function(){var t,e,n,r,s=arguments[0];if(arguments.length===1)return r=function(c,f){return c.compareTo(f)},void s.sort(r);if(arguments.length===2)n=arguments[1],r=function(c,f){return n.compare(c,f)},s.sort(r);else{if(arguments.length===3){e=s.slice(arguments[1],arguments[2]),e.sort();var o=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length));for(s.splice(0,s.length),t=0;t<o.length;t++)s.push(o[t]);return}if(arguments.length===4){for(e=s.slice(arguments[1],arguments[2]),n=arguments[3],r=function(c,f){return n.compare(c,f)},e.sort(r),o=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length)),s.splice(0,s.length),t=0;t<o.length;t++)s.push(o[t]);return}}},Ke.asList=function(t){for(var e=new P,n=0,r=t.length;r>n;n++)e.add(t[n]);return e},u(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),k.toDimensionSymbol=function(t){switch(t){case k.FALSE:return k.SYM_FALSE;case k.TRUE:return k.SYM_TRUE;case k.DONTCARE:return k.SYM_DONTCARE;case k.P:return k.SYM_P;case k.L:return k.SYM_L;case k.A:return k.SYM_A}throw new d},k.toDimensionValue=function(t){switch(bt.toUpperCase(t)){case k.SYM_FALSE:return k.FALSE;case k.SYM_TRUE:return k.TRUE;case k.SYM_DONTCARE:return k.DONTCARE;case k.SYM_P:return k.P;case k.SYM_L:return k.L;case k.SYM_A:return k.A}throw new d},k.P=0,k.L=1,k.A=2,k.FALSE=-1,k.TRUE=-2,k.DONTCARE=-3,k.SYM_FALSE="F",k.SYM_TRUE="T",k.SYM_DONTCARE="*",k.SYM_P="0",k.SYM_L="1",k.SYM_A="2",u(je.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return je}}),u(jn.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return jn}}),S(at,$),u(at.prototype,{computeEnvelopeInternal:function(){for(var t=new O,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return $.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var r=0;r<this.geometries.length;r++)if(!this.geometries[r].equalsExact(n.geometries[r],e))return!1;return!0}return $.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();Ke.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=k.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=k.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new Kt(Ke.asList(this.geometries)),n=new Kt(Ke.asList(t.geometries));return this.compare(e,n)}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],o=r,c=this.getNumGeometries(),f=o.getNumGeometries(),y=0;c>y&&f>y;){var R=this.getGeometryN(y),_=o.getGeometryN(y),D=R.compareToSameClass(_,s);if(D!==0)return D;y++}return c>y?1:f>y?-1:0}},apply:function(){if(X(arguments[0],Pn))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(X(arguments[0],jn)){var n=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(X(arguments[0],je)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}else if(X(arguments[0],ge)){var s=arguments[0];s.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(s)}},getBoundary:function(){return this.checkNotGeometryCollection(this),T.shouldNeverReachHere(),null},clone:function(){var t=$.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new at(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return at}}),at.serialVersionUID=-5694727726395021e3,S(ie,at),u(ie.prototype,{getSortIndex:function(){return $.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?at.prototype.equalsExact.call(this,t,e):!1}return at.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?k.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new vn(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ie(t,this.factory)},interfaces_:function(){return[Ki]},getClass:function(){return ie}}),ie.serialVersionUID=8166665132445434e3,u(vn.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof rt?this.boundaryLineString(this.geom):this.geom instanceof ie?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new P;this.endpointMap=new Dt;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);r.getNumPoints()!==0&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var s=this.endpointMap.entrySet().iterator();s.hasNext();){var o=s.next(),c=o.getValue(),f=c.count;this.bnRule.isInBoundary(f)&&e.add(o.getKey())}return j.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new Co,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new vn(t);return e.getBoundary()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new vn(n,r);return e.getBoundary()}},u(Co.prototype,{interfaces_:function(){return[]},getClass:function(){return Co}}),u(fe.prototype,{interfaces_:function(){return[]},getClass:function(){return fe}}),fe.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;e>r;r++)n[r]=t;return new String(n)},fe.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new cl,n=new ul;return t.printStackTrace(n),e.toString()}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],o="",c=new ll(fe.getStackTrace(r)),f=new fl,y=0;s>y;y++)try{o+=f.readLine()+fe.NEWLINE}catch(R){if(!(R instanceof gl))throw R;T.shouldNeverReachHere()}finally{}return o}},fe.split=function(t,e){for(var n=e.length,r=new P,s=""+t,o=s.indexOf(e);o>=0;){var c=s.substring(0,o);r.add(c),s=s.substring(o+n),o=s.indexOf(e)}s.length>0&&r.add(s);for(var f=new Array(r.size()).fill(null),y=0;y<f.length;y++)f[y]=r.get(y);return f},fe.toString=function(){if(arguments.length===1){var t=arguments[0];return fe.SIMPLE_ORDINATE_FORMAT.format(t)}},fe.spaces=function(t){return fe.chars(" ",t)},fe.NEWLINE=pt.getProperty("line.separator"),fe.SIMPLE_ORDINATE_FORMAT=new hl,u(Mt.prototype,{interfaces_:function(){return[]},getClass:function(){return Mt}}),Mt.copyCoord=function(t,e,n,r){for(var s=Math.min(t.getDimension(),n.getDimension()),o=0;s>o;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Mt.isRing=function(t){var e=t.size();return e===0?!0:3>=e?!1:t.getOrdinate(0,ot.X)===t.getOrdinate(e-1,ot.X)&&t.getOrdinate(0,ot.Y)===t.getOrdinate(e-1,ot.Y)},Mt.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),o=0;n>o;o++)for(var c=0;s>c;c++){var f=t.getOrdinate(o,c),y=e.getOrdinate(o,c);if(!(t.getOrdinate(o,c)===e.getOrdinate(o,c)||p.isNaN(f)&&p.isNaN(y)))return!1}return!0},Mt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();if(Mt.copy(e,0,r,0,s),s>0)for(var o=s;n>o;o++)Mt.copy(e,s-1,r,o,1);return r},Mt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;n>=r;r++)Mt.swap(t,r,e-r)},Mt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var s=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}},Mt.copy=function(t,e,n,r,s){for(var o=0;s>o;o++)Mt.copyCoord(t,e+o,n,r+o)},Mt.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),r=new yt;r.append("(");for(var s=0;e>s;s++){s>0&&r.append(" ");for(var o=0;n>o;o++)o>0&&r.append(","),r.append(fe.toString(t.getOrdinate(s,o)))}return r.append(")"),r.toString()}},Mt.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(3>=n)return Mt.createClosedRing(t,e,4);var r=e.getOrdinate(0,ot.X)===e.getOrdinate(n-1,ot.X)&&e.getOrdinate(0,ot.Y)===e.getOrdinate(n-1,ot.Y);return r?e:Mt.createClosedRing(t,e,n+1)},Mt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();Mt.copy(e,0,r,0,s);for(var o=s;n>o;o++)Mt.copy(e,0,r,o,1);return r},S(rt,$),u(rt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new O:this.points.expandEnvelope(new O)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return $.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var r=0;r<this.points.size();r++)if(!this.equal(this.points.getCoordinate(r),n.points.getCoordinate(r),e))return!1;return!0}return $.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Mt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?k.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Y.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();Mt.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,n=0,r=0;n<this.points.size()&&r<e.points.size();){var s=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this.points.size()?1:r<e.points.size()?-1:0}if(arguments.length===2){var o=arguments[0],c=arguments[1],e=o;return c.compare(this.points,e.points)}},apply:function(){if(X(arguments[0],Pn))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(X(arguments[0],jn)){var n=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(X(arguments[0],je)){var r=arguments[0];r.filter(this)}else if(X(arguments[0],ge)){var s=arguments[0];s.filter(this)}},getBoundary:function(){return new vn(this).getBoundary()},isEquivalentClass:function(t){return t instanceof rt},clone:function(){var t=$.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new rt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new d("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[Ki]},getClass:function(){return rt}}),rt.serialVersionUID=0x2b2b51ba435c8e00,u(ji.prototype,{interfaces_:function(){return[]},getClass:function(){return ji}}),S(wt,$),u(wt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new O;var t=new O;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return $.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1}return $.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return k.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return r.compare(this.coordinates,e.coordinates)}},apply:function(){if(X(arguments[0],Pn)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(X(arguments[0],jn)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(X(arguments[0],je)){var n=arguments[0];n.filter(this)}else if(X(arguments[0],ge)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=$.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new wt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),T.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[ji]},getClass:function(){return wt}}),wt.serialVersionUID=4902022702746615e3,u(Qe.prototype,{interfaces_:function(){return[]},getClass:function(){return Qe}}),S(mt,$),u(mt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return $.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];for(var s=0;s<this.holes.length;s++)for(var o=this.holes[s].getCoordinates(),c=0;c<o.length;c++)e++,t[e]=o[c];return t},getArea:function(){var t=0;t+=Math.abs(Y.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Y.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var s=t.getY(n);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}for(var o=t.getX(0),c=t.getY(0),n=1;4>=n;n++){var r=t.getX(n),s=t.getY(n),f=r!==o,y=s!==c;if(f===y)return!1;o=r,c=s}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this.shell,s=n.shell;if(!r.equalsExact(s,e)||this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return $.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);Ke.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);pt.arraycopy(e.getCoordinates(),0,r,0,r.length);var s=j.minCoordinate(e.getCoordinates());j.scroll(r,s),pt.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Y.isCCW(e.getCoordinates())===n&&j.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(arguments.length===2){var r=arguments[0],s=arguments[1],o=r,e=this.shell,n=o.shell,c=e.compareToSameClass(n,s);if(c!==0)return c;for(var f=this.getNumInteriorRing(),y=o.getNumInteriorRing(),R=0;f>R&&y>R;){var _=this.getInteriorRingN(R),D=o.getInteriorRingN(R),q=_.compareToSameClass(D,s);if(q!==0)return q;R++}return f>R?1:y>R?-1:0}},apply:function(){if(X(arguments[0],Pn)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(X(arguments[0],jn)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(X(arguments[0],je)){var r=arguments[0];r.filter(this)}else if(X(arguments[0],ge)){var s=arguments[0];s.filter(this),this.shell.apply(s);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(s)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=$.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new mt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Qe]},getClass:function(){return mt}}),mt.serialVersionUID=-0x307ffefd8dc97200,S(se,at),u(se.prototype,{getSortIndex:function(){return $.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?at.prototype.equalsExact.call(this,t,e):!1}return at.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return at.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return k.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new se(t,this.factory)},interfaces_:function(){return[ji]},getClass:function(){return se}}),se.serialVersionUID=-8048474874175356e3,S(Tt,rt),u(Tt.prototype,{getSortIndex:function(){return $.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return k.FALSE},isClosed:function(){return this.isEmpty()?!0:rt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();Mt.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!rt.prototype.isClosed.call(this))throw new d;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Tt.MINIMUM_VALID_SIZE)throw new d("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Tt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Tt}}),Tt.MINIMUM_VALID_SIZE=4,Tt.serialVersionUID=-0x3b229e262367a600,S(Ut,at),u(Ut.prototype,{getSortIndex:function(){return $.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?at.prototype.equalsExact.call(this,t,e):!1}return at.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new P,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],r=n.getBoundary(),s=0;s<r.getNumGeometries();s++)t.add(r.getGeometryN(s));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Ut(t,this.factory)},interfaces_:function(){return[Qe]},getClass:function(){return Ut}}),Ut.serialVersionUID=-0x7a5aa1369171980,u(de.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof at?this.editGeometryCollection(t,e):t instanceof mt?this.editPolygon(t,e):t instanceof wt?e.edit(t,this.factory):t instanceof rt?e.edit(t,this.factory):(T.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),r=new P,s=0;s<n.getNumGeometries();s++){var o=this.edit(n.getGeometryN(s),e);o===null||o.isEmpty()||r.add(o)}return n.getClass()===se?this.factory.createMultiPoint(r.toArray([])):n.getClass()===ie?this.factory.createMultiLineString(r.toArray([])):n.getClass()===Ut?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(n===null&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(r===null||r.isEmpty())return this.factory.createPolygon();for(var s=new P,o=0;o<n.getNumInteriorRing();o++){var c=this.edit(n.getInteriorRingN(o),e);c===null||c.isEmpty()||s.add(c)}return this.factory.createPolygon(r,s.toArray([]))},interfaces_:function(){return[]},getClass:function(){return de}}),de.GeometryEditorOperation=Qi,u(wo.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Qi]},getClass:function(){return wo}}),u(So.prototype,{edit:function(t,e){if(t instanceof Tt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof rt)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof wt){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Qi]},getClass:function(){return So}}),u(Lo.prototype,{edit:function(t,e){return t instanceof Tt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof rt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof wt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Qi]},getClass:function(){return Lo}}),de.NoOpGeometryOperation=wo,de.CoordinateOperation=So,de.CoordinateSequenceOperation=Lo,u(pe.prototype,{setOrdinate:function(t,e,n){switch(e){case ot.X:this.coordinates[t].x=n;break;case ot.Y:this.coordinates[t].y=n;break;case ot.Z:this.coordinates[t].z=n;break;default:throw new d}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case ot.X:return this.coordinates[t].x;case ot.Y:return this.coordinates[t].y;case ot.Z:return this.coordinates[t].z}return p.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new E(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new pe(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new pe(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new yt(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[ot,C]},getClass:function(){return pe}}),pe.serialVersionUID=-0xcb44a778db18e00,u(yn.prototype,{readResolve:function(){return yn.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new pe(t)}if(X(arguments[0],ot)){var e=arguments[0];return new pe(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),2>r?new pe(n):new pe(n,r)}},interfaces_:function(){return[Tn,C]},getClass:function(){return yn}}),yn.instance=function(){return yn.instanceObject},yn.serialVersionUID=-0x38e49fa6cf6f2e00,yn.instanceObject=new yn;var He,Ol=Object.defineProperty,Ml=pl({delete:vl,has:El,get:yl,set:Il,keys:Cl,values:wl,entries:Sl,forEach:Rl,clear:Nl}),_l=typeof Map<"u"&&Map.prototype.values?Map:Ml;tn.prototype=new Kn,tn.prototype.get=function(t){return this.map_.get(t)||null},tn.prototype.put=function(t,e){return this.map_.set(t,e),e},tn.prototype.values=function(){for(var t=new P,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},tn.prototype.entrySet=function(){var t=new kt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},tn.prototype.size=function(){return this.map_.size()},u(gt.prototype,{equals:function(t){if(!(t instanceof gt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ct(n).compareTo(new Ct(r))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===gt.FLOATING||this.modelType===gt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===gt.FLOATING?t="Floating":this.modelType===gt.FLOATING_SINGLE?t="Floating-Single":this.modelType===gt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(p.isNaN(t))return t;if(this.modelType===gt.FLOATING_SINGLE){var e=t;return e}return this.modelType===gt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof E){var n=arguments[0];if(this.modelType===gt.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===gt.FLOATING?t=16:this.modelType===gt.FLOATING_SINGLE?t=6:this.modelType===gt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[C,v]},getClass:function(){return gt}}),gt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},u(qe.prototype,{readResolve:function(){return qe.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[C]},getClass:function(){return qe}}),qe.serialVersionUID=-552860263173159e4,qe.nameToTypeMap=new tn,gt.Type=qe,gt.serialVersionUID=7777263578777804e3,gt.FIXED=new qe("FIXED"),gt.FLOATING=new qe("FLOATING"),gt.FLOATING_SINGLE=new qe("FLOATING SINGLE"),gt.maximumPreciseValue=9007199254740992,u(st.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new E(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new E(t.getMinX(),t.getMinY()),new E(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new E(t.getMinX(),t.getMinY()),new E(t.getMinX(),t.getMaxY()),new E(t.getMaxX(),t.getMaxY()),new E(t.getMaxX(),t.getMinY()),new E(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(X(arguments[0],ot)){var e=arguments[0];return new rt(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new ie(null,this);if(arguments.length===1){var t=arguments[0];return new ie(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,r=!1,s=t.iterator();s.hasNext();){var o=s.next(),c=o.getClass();e===null&&(e=c),c!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(st.toGeometryArray(t));var f=t.iterator().next(),y=t.size()>1;if(y){if(f instanceof mt)return this.createMultiPolygon(st.toPolygonArray(t));if(f instanceof rt)return this.createMultiLineString(st.toLineStringArray(t));if(f instanceof wt)return this.createMultiPoint(st.toPointArray(t));T.shouldNeverReachHere("Unhandled class: "+f.getClass().getName())}return f},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof E){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(X(arguments[0],ot)){var e=arguments[0];return new wt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new mt(null,null,this);if(arguments.length===1){if(X(arguments[0],ot)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Tt){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];return new mt(r,s,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new at(null,this);if(arguments.length===1){var t=arguments[0];return new at(t,this)}},createGeometry:function(t){var e=new de(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this.coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(X(arguments[0],ot)){var e=arguments[0];return new Tt(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new Ut(null,this);if(arguments.length===1){var t=arguments[0];return new Ut(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new se(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new se(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(X(arguments[0],ot)){var n=arguments[0];if(n===null)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),s=0;s<n.size();s++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Mt.copy(n,s,o,0,1),r[s]=this.createPoint(o)}return this.createMultiPoint(r)}}},interfaces_:function(){return[C]},getClass:function(){return st}}),st.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},st.getDefaultCoordinateSequenceFactory=function(){return yn.instance()},st.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},st.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},st.serialVersionUID=-6820524753094096e3;var Ae={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};u(To.prototype,{read:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var s=Ae.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(s=Ae.emptyTypeStr.exec(t),s[2]=void 0),s&&(n=s[1].toLowerCase(),r=s[2],Vr[n]&&(e=Vr[n].apply(this,[r]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!cn[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+cn[e].apply(this,[t])+")"}});var cn={coordinate:function(t){return t.x+" "+t.y},point:function(t){return cn.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+cn.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(cn.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(cn.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+cn.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+cn.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;r>n;++n)e.push("("+cn.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+cn.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Vr={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(Ae.spaces);return this.geometryFactory.createPoint(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Ae.trimParens,"$1"),r.push(Vr.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].trim().split(Ae.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].trim().split(Ae.spaces),r.push(new E(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Ae.parenComma),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Ae.trimParens,"$1"),r.push(Vr.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,n,r,s,o=t.trim().split(Ae.parenComma),c=[],f=0,y=o.length;y>f;++f)e=o[f].replace(Ae.trimParens,"$1"),n=Vr.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),f===0?s=r:c.push(r);return this.geometryFactory.createPolygon(s,c)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Ae.doubleParenComma),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Ae.trimParens,"$1"),r.push(Vr.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],r=0,s=e.length;s>r;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};u(Wt.prototype,{write:function(t){return this.parser.write(t)}}),u(Wt,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),u(vt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new yt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==vt.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=vt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===vt.COLLINEAR_INTERSECTION},toString:function(){return Wt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Wt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return vt}}),vt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>s?r:s;else{var c=Math.abs(t.x-e.x),f=Math.abs(t.y-e.y);o=r>s?c:f,o!==0||t.equals(e)||(o=Math.max(c,f))}return T.isTrue(!(o===0&&!t.equals(e)),"Bad distance calculation"),o},vt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=Math.sqrt(r*r+s*s);return T.isTrue(!(o===0&&!t.equals(e)),"Invalid distance calculation"),o},vt.DONT_INTERSECT=0,vt.DO_INTERSECT=1,vt.COLLINEAR=2,vt.NO_INTERSECTION=0,vt.POINT_INTERSECTION=1,vt.COLLINEAR_INTERSECTION=2,S(Bt,vt),u(Bt.prototype,{isInSegmentEnvelopes:function(t){var e=new O(this.inputLines[0][0],this.inputLines[0][1]),n=new O(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(arguments.length!==3)return vt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,O.intersects(e,n,t)&&Y.orientationIndex(e,n,t)===0&&Y.orientationIndex(n,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=vt.POINT_INTERSECTION,null):void(this.result=vt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,r,s){s.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),s.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},safeHCoordinateIntersection:function(t,e,n,r){var s=null;try{s=Ht.intersection(t,e,n,r)}catch(o){if(!(o instanceof G))throw o;s=Bt.nearestEndpoint(t,e,n,r)}finally{}return s},intersection:function(t,e,n,r){var s=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(s)||(s=new E(Bt.nearestEndpoint(t,e,n,r))),this.precisionModel!==null&&this.precisionModel.makePrecise(s),s},smallestInAbsValue:function(t,e,n,r){var s=t,o=Math.abs(s);return Math.abs(e)<o&&(s=e,o=Math.abs(e)),Math.abs(n)<o&&(s=n,o=Math.abs(n)),Math.abs(r)<o&&(s=r),s},checkDD:function(t,e,n,r,s){var o=Lt.intersection(t,e,n,r),c=this.isInSegmentEnvelopes(o);pt.out.println("DD in env = "+c+"  --------------------- "+o),s.distance(o)>1e-4&&pt.out.println("Distance = "+s.distance(o))},intersectionWithNormalization:function(t,e,n,r){var s=new E(t),o=new E(e),c=new E(n),f=new E(r),y=new E;this.normalizeToEnvCentre(s,o,c,f,y);var R=this.safeHCoordinateIntersection(s,o,c,f);return R.x+=y.x,R.y+=y.y,R},computeCollinearIntersection:function(t,e,n,r){var s=O.intersects(t,e,n),o=O.intersects(t,e,r),c=O.intersects(n,r,t),f=O.intersects(n,r,e);return s&&o?(this.intPt[0]=n,this.intPt[1]=r,vt.COLLINEAR_INTERSECTION):c&&f?(this.intPt[0]=t,this.intPt[1]=e,vt.COLLINEAR_INTERSECTION):s&&c?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||f?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):s&&f?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||c?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):o&&c?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||s||f?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):o&&f?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||s||c?vt.COLLINEAR_INTERSECTION:vt.POINT_INTERSECTION):vt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,r,s){var o=t.x<e.x?t.x:e.x,c=t.y<e.y?t.y:e.y,f=t.x>e.x?t.x:e.x,y=t.y>e.y?t.y:e.y,R=n.x<r.x?n.x:r.x,_=n.y<r.y?n.y:r.y,D=n.x>r.x?n.x:r.x,q=n.y>r.y?n.y:r.y,Z=o>R?o:R,K=D>f?f:D,Q=c>_?c:_,It=q>y?y:q,_t=(Z+K)/2,Fe=(Q+It)/2;s.x=_t,s.y=Fe,t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},computeIntersect:function(t,e,n,r){if(this._isProper=!1,!O.intersects(t,e,n,r))return vt.NO_INTERSECTION;var s=Y.orientationIndex(t,e,n),o=Y.orientationIndex(t,e,r);if(s>0&&o>0||0>s&&0>o)return vt.NO_INTERSECTION;var c=Y.orientationIndex(n,r,t),f=Y.orientationIndex(n,r,e);if(c>0&&f>0||0>c&&0>f)return vt.NO_INTERSECTION;var y=s===0&&o===0&&c===0&&f===0;return y?this.computeCollinearIntersection(t,e,n,r):(s===0||o===0||c===0||f===0?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:s===0?this.intPt[0]=new E(n):o===0?this.intPt[0]=new E(r):c===0?this.intPt[0]=new E(t):f===0&&(this.intPt[0]=new E(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),vt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Bt}}),Bt.nearestEndpoint=function(t,e,n,r){var s=t,o=Y.distancePointLine(t,n,r),c=Y.distancePointLine(e,n,r);return o>c&&(o=c,s=e),c=Y.distancePointLine(n,t,e),o>c&&(o=c,s=n),c=Y.distancePointLine(r,t,e),o>c&&(o=c,s=r),s},u(Qn.prototype,{interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.orientationIndex=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=n.x-e.x,c=n.y-e.y;return Qn.signOfDet2x2(r,s,o,c)},Qn.signOfDet2x2=function(t,e,n,r){var s=null,o=null,c=null;if(s=1,t===0||r===0)return e===0||n===0?0:e>0?n>0?-s:s:n>0?s:-s;if(e===0||n===0)return r>0?t>0?s:-s:t>0?-s:s;if(e>0?r>0?r>=e||(s=-s,o=t,t=n,n=o,o=e,e=r,r=o):-r>=e?(s=-s,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?r>=-e?(s=-s,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(s=-s,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0)||!(n>=t))return s}else{if(n>0||!(t>=n))return-s;s=-s,t=-t,n=-n}for(;;){if(c=Math.floor(n/t),n-=c*t,r-=c*e,0>r)return-s;if(r>e)return s;if(t>n+n){if(r+r>e)return s}else{if(e>r+r)return-s;n=t-n,r=e-r,s=-s}if(r===0)return n===0?0:-s;if(n===0||(c=Math.floor(t/n),t-=c*n,e-=c*r,0>e))return s;if(e>r)return-s;if(n>t+t){if(e+e>r)return-s}else{if(r>e+e)return s;t=n-t,e=r-e,s=-s}if(e===0)return t===0?0:s;if(t===0)return-s}},u(tr.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var s=t.x-this.p.x,o=t.y-this.p.y,c=e.x-this.p.x,f=e.y-this.p.y,y=Qn.signOfDet2x2(s,o,c,f);if(y===0)return this.isPointOnSegment=!0,null;o>f&&(y=-y),y>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==m.EXTERIOR},getLocation:function(){return this.isPointOnSegment?m.BOUNDARY:this.crossingCount%2===1?m.INTERIOR:m.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.locatePointInRing=function(){if(arguments[0]instanceof E&&X(arguments[1],ot)){for(var t=arguments[0],e=arguments[1],n=new tr(t),r=new E,s=new E,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,s),n.countSegment(r,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof E&&arguments[1]instanceof Array){for(var c=arguments[0],f=arguments[1],n=new tr(c),o=1;o<f.length;o++){var r=f[o],s=f[o-1];if(n.countSegment(r,s),n.isOnSegment())return n.getLocation()}return n.getLocation()}},u(Y.prototype,{interfaces_:function(){return[]},getClass:function(){return Y}}),Y.orientationIndex=function(t,e,n){return Lt.orientationIndex(t,e,n)},Y.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var s=t[r].x-n,o=t[r+1].y,c=t[r-1].y;e+=s*(c-o)}return e/2}if(X(arguments[0],ot)){var f=arguments[0],y=f.size();if(3>y)return 0;var R=new E,_=new E,D=new E;f.getCoordinate(0,_),f.getCoordinate(1,D);var n=_.x;D.x-=n;for(var e=0,r=1;y-1>r;r++)R.y=_.y,_.x=D.x,_.y=D.y,f.getCoordinate(r+1,D),D.x-=n,e+=_.x*(R.y-D.y);return e/2}},Y.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Y.distancePointLine(t,n,r);if(n.equals(r))return Y.distancePointLine(r,t,e);var s=!1;if(O.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(o===0)s=!0;else{var c=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),f=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),y=f/o,R=c/o;(0>R||R>1||0>y||y>1)&&(s=!0)}}else s=!0;return s?nt.min(Y.distancePointLine(t,n,r),Y.distancePointLine(e,n,r),Y.distancePointLine(n,t,e),Y.distancePointLine(r,t,e)):0},Y.isPointInRing=function(t,e){return Y.locatePointInRing(t,e)!==m.EXTERIOR},Y.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,r=new E;t.getCoordinate(0,r);for(var s=r.x,o=r.y,c=1;e>c;c++){t.getCoordinate(c,r);var f=r.x,y=r.y,R=f-s,_=y-o;n+=Math.sqrt(R*R+_*_),s=f,o=y}return n},Y.isCCW=function(t){var e=t.length-1;if(3>e)throw new d;for(var n=t[0],r=0,s=1;e>=s;s++){var o=t[s];o.y>n.y&&(n=o,r=s)}var c=r;do c-=1,0>c&&(c=e);while(t[c].equals2D(n)&&c!==r);var f=r;do f=(f+1)%e;while(t[f].equals2D(n)&&f!==r);var y=t[c],R=t[f];if(y.equals2D(n)||R.equals2D(n)||y.equals2D(R))return!1;var _=Y.computeOrientation(y,n,R);return _===0?y.x>R.x:_>0},Y.locatePointInRing=function(t,e){return tr.locatePointInRing(t,e)},Y.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)},Y.computeOrientation=function(t,e,n){return Y.orientationIndex(t,e,n)},Y.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new d;for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=Y.distancePointLine(t,e[r],e[r+1]);n>s&&(n=s)}return n}if(arguments.length===3){var o=arguments[0],c=arguments[1],f=arguments[2];if(c.x===f.x&&c.y===f.y)return o.distance(c);var y=(f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y),R=((o.x-c.x)*(f.x-c.x)+(o.y-c.y)*(f.y-c.y))/y;if(0>=R)return o.distance(c);if(R>=1)return o.distance(f);var _=((c.y-o.y)*(f.x-c.x)-(c.x-o.x)*(f.y-c.y))/y;return Math.abs(_)*Math.sqrt(y)}},Y.isOnLine=function(t,e){for(var n=new Bt,r=1;r<e.length;r++){var s=e[r-1],o=e[r];if(n.computeIntersection(t,s,o),n.hasIntersection())return!0}return!1},Y.CLOCKWISE=-1,Y.RIGHT=Y.CLOCKWISE,Y.COUNTERCLOCKWISE=1,Y.LEFT=Y.COUNTERCLOCKWISE,Y.COLLINEAR=0,Y.STRAIGHT=Y.COLLINEAR,u(tt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof tt){var t=arguments[0],e=Y.orientationIndex(this.p0,this.p1,t.p0),n=Y.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof E){var r=arguments[0];return Y.orientationIndex(this.p0,this.p1,r)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof tt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Bt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof E){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new E(t);var e=this.projectionFactor(t),n=new E;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof tt){var r=arguments[0],s=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(s>=1&&o>=1||0>=s&&0>=o)return null;var c=this.project(r.p0);0>s&&(c=this.p0),s>1&&(c=this.p1);var f=this.project(r.p1);return 0>o&&(f=this.p0),o>1&&(f=this.p1),new tt(c,f)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return Y.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return tt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(0>=r)return p.NaN;var s=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return s},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=p.MAX_VALUE,s=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var c=this.closestPoint(t.p1);s=c.distance(t.p1),r>s&&(r=s,n[0]=c,n[1]=t.p1);var f=t.closestPoint(this.p0);s=f.distance(this.p0),r>s&&(r=s,n[0]=this.p0,n[1]=f);var y=t.closestPoint(this.p1);return s=y.distance(this.p1),r>s&&(r=s,n[0]=this.p1,n[1]=y),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return r>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=Ht.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof G))throw n}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,c=Math.sqrt(s*s+o*o),f=0,y=0;if(e!==0){if(0>=c)throw new IllegalStateException("Cannot compute offset from zero-length line segment");f=e*s/c,y=e*o/c}var R=n-y,_=r+f,D=new E(R,_);return D},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||p.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof tt){var t=arguments[0];return Y.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof E){var e=arguments[0];return Y.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new E;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return e^r},interfaces_:function(){return[v,C]},getClass:function(){return tt}}),tt.midPoint=function(t,e){return new E((t.x+e.x)/2,(t.y+e.y)/2)},tt.serialVersionUID=0x2d2172135f411c00,u(ft.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])||ft.isTrue(this.matrix[m.INTERIOR][m.BOUNDARY])||ft.isTrue(this.matrix[m.BOUNDARY][m.INTERIOR])||ft.isTrue(this.matrix[m.BOUNDARY][m.BOUNDARY]);return t&&this.matrix[m.EXTERIOR][m.INTERIOR]===k.FALSE&&this.matrix[m.EXTERIOR][m.BOUNDARY]===k.FALSE},isCoveredBy:function(){var t=ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])||ft.isTrue(this.matrix[m.INTERIOR][m.BOUNDARY])||ft.isTrue(this.matrix[m.BOUNDARY][m.INTERIOR])||ft.isTrue(this.matrix[m.BOUNDARY][m.BOUNDARY]);return t&&this.matrix[m.INTERIOR][m.EXTERIOR]===k.FALSE&&this.matrix[m.BOUNDARY][m.EXTERIOR]===k.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.matrix[n][r]=k.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.matrix[s][o]=c}},isContains:function(){return ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&this.matrix[m.EXTERIOR][m.INTERIOR]===k.FALSE&&this.matrix[m.EXTERIOR][m.BOUNDARY]===k.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,k.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.matrix[s][o]<c&&(this.matrix[s][o]=c)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&this.matrix[m.INTERIOR][m.EXTERIOR]===k.FALSE&&this.matrix[m.BOUNDARY][m.EXTERIOR]===k.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):t===k.A&&e===k.A||t===k.L&&e===k.L||t===k.L&&e===k.A||t===k.P&&e===k.A||t===k.P&&e===k.L?this.matrix[m.INTERIOR][m.INTERIOR]===k.FALSE&&(ft.isTrue(this.matrix[m.INTERIOR][m.BOUNDARY])||ft.isTrue(this.matrix[m.BOUNDARY][m.INTERIOR])||ft.isTrue(this.matrix[m.BOUNDARY][m.BOUNDARY])):!1},isOverlaps:function(t,e){return t===k.P&&e===k.P||t===k.A&&e===k.A?ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&ft.isTrue(this.matrix[m.INTERIOR][m.EXTERIOR])&&ft.isTrue(this.matrix[m.EXTERIOR][m.INTERIOR]):t===k.L&&e===k.L?this.matrix[m.INTERIOR][m.INTERIOR]===1&&ft.isTrue(this.matrix[m.INTERIOR][m.EXTERIOR])&&ft.isTrue(this.matrix[m.EXTERIOR][m.INTERIOR]):!1},isEquals:function(t,e){return t!==e?!1:ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&this.matrix[m.INTERIOR][m.EXTERIOR]===k.FALSE&&this.matrix[m.BOUNDARY][m.EXTERIOR]===k.FALSE&&this.matrix[m.EXTERIOR][m.INTERIOR]===k.FALSE&&this.matrix[m.EXTERIOR][m.BOUNDARY]===k.FALSE},toString:function(){for(var t=new yt("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,k.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new d;for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!ft.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[m.INTERIOR][m.INTERIOR]===k.FALSE&&this.matrix[m.INTERIOR][m.BOUNDARY]===k.FALSE&&this.matrix[m.BOUNDARY][m.INTERIOR]===k.FALSE&&this.matrix[m.BOUNDARY][m.BOUNDARY]===k.FALSE},isCrosses:function(t,e){return t===k.P&&e===k.L||t===k.P&&e===k.A||t===k.L&&e===k.A?ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&ft.isTrue(this.matrix[m.INTERIOR][m.EXTERIOR]):t===k.L&&e===k.P||t===k.A&&e===k.P||t===k.A&&e===k.L?ft.isTrue(this.matrix[m.INTERIOR][m.INTERIOR])&&ft.isTrue(this.matrix[m.EXTERIOR][m.INTERIOR]):t===k.L&&e===k.L?this.matrix[m.INTERIOR][m.INTERIOR]===0:!1},interfaces_:function(){return[I]},getClass:function(){return ft}}),ft.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===k.SYM_DONTCARE||e===k.SYM_TRUE&&(t>=0||t===k.TRUE)||e===k.SYM_FALSE&&t===k.FALSE||e===k.SYM_P&&t===k.P||e===k.SYM_L&&t===k.L?!0:e===k.SYM_A&&t===k.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],r=arguments[1],s=new ft(n);return s.matches(r)}},ft.isTrue=function(t){return t>=0||t===k.TRUE};var bl=Object.freeze({Coordinate:E,CoordinateList:A,Envelope:O,LineSegment:tt,GeometryFactory:st,Geometry:$,Point:wt,LineString:rt,LinearRing:Tt,Polygon:mt,GeometryCollection:at,MultiPoint:se,MultiLineString:ie,MultiPolygon:Ut,Dimension:k,IntersectionMatrix:ft});u(en.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(r!==0){e+=r;var s=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*s;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*o}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=Y.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new E;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!Y.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,r){var s=r?1:-1;en.centroid3(t,e,n,this.triangleCent3);var o=en.area2(t,e,n);this.cg3.x+=s*o*this.triangleCent3.x,this.cg3.y+=s*o*this.triangleCent3.y,this.areasum2+=s*o},add:function(){if(arguments[0]instanceof mt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof $){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof wt)this.addPoint(n.getCoordinate());else if(n instanceof rt)this.addLineSegments(n.getCoordinates());else if(n instanceof mt){var r=n;this.add(r)}else if(n instanceof at)for(var s=n,e=0;e<s.getNumGeometries();e++)this.add(s.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return en}}),en.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},en.centroid3=function(t,e,n,r){return r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y,null},en.getCentroid=function(t){var e=new en(t);return e.getCentroid()},ts.prototype=new Error,ts.prototype.name="EmptyStackException",jt.prototype=new N,jt.prototype.add=function(t){return this.array_.push(t),!0},jt.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},jt.prototype.push=function(t){return this.array_.push(t),t},jt.prototype.pop=function(t){if(this.array_.length===0)throw new ts;return this.array_.pop()},jt.prototype.peek=function(){if(this.array_.length===0)throw new ts;return this.array_[this.array_.length-1]},jt.prototype.empty=function(){return this.array_.length===0},jt.prototype.isEmpty=function(){return this.empty()},jt.prototype.search=function(t){return this.array_.indexOf(t)},jt.prototype.size=function(){return this.array_.length},jt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},u(xr.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[Pn]},getClass:function(){return xr}}),xr.filterCoordinates=function(t){for(var e=new xr,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},u(nn.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return Ke.sort(t,1,t.length,new Er(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new A;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){T.equals(t[0],t[t.length-1]);for(var e=new P,n=null,r=0;r<=t.length-2;r++){var s=t[r],o=t[r+1];s.equals(o)||n!==null&&this.isBetween(n,s,o)||(e.add(s),n=s)}e.add(t[t.length-1]);var c=new Array(e.size()).fill(null);return e.toArray(c)},isBetween:function(t,e,n){return Y.computeOrientation(t,e,n)!==0?!1:t.x!==n.x&&(t.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=t.x)||t.y!==n.y&&(t.y<=e.y&&e.y<=n.y||n.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var n=new Kt,r=0;r<e.length;r++)n.add(e[r]);for(var r=0;r<t.length;r++)Y.isPointInRing(t[r],e)||n.add(t[r]);var s=j.toCoordinateArray(n);return s.length<3?this.padArray3(s):s},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=t.get(n);e[n]=r}return e},grahamScan:function(t){var e=null,n=new jt;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var r=3;r<t.length;r++){for(e=n.pop();!n.empty()&&Y.computeOrientation(n.peek(),e,t[r])>0;)e=n.pop();e=n.push(e),e=n.push(t[r])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return nn}}),nn.extractCoordinates=function(t){var e=new xr;return t.apply(e),e.getCoordinates()},u(Er.prototype,{compare:function(t,e){var n=t,r=e;return Er.polarCompare(this.origin,n,r)},interfaces_:function(){return[x]},getClass:function(){return Er}}),Er.polarCompare=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=n.x-t.x,c=n.y-t.y,f=Y.computeOrientation(t,e,n);if(f===Y.COUNTERCLOCKWISE)return 1;if(f===Y.CLOCKWISE)return-1;var y=r*r+s*s,R=o*o+c*c;return R>y?-1:y>R?1:0},nn.RadialComparator=Er,u(ee.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);r!==null&&r instanceof Tt&&!r.isEmpty()||(n=!1);for(var s=new P,o=0;o<t.getNumInteriorRing();o++){var c=this.transformLinearRing(t.getInteriorRingN(o),t);c===null||c.isEmpty()||(c instanceof Tt||(n=!1),s.add(c))}if(n)return this.factory.createPolygon(r,s.toArray([]));var f=new P;return r!==null&&f.add(r),f.addAll(s),this.factory.buildGeometry(f)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformLineString(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformPoint(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformPolygon(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transform(t.getGeometryN(r));s!==null&&(this.pruneEmptyGeometry&&s.isEmpty()||n.add(s))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(st.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof wt)return this.transformPoint(t,null);if(t instanceof se)return this.transformMultiPoint(t,null);if(t instanceof Tt)return this.transformLinearRing(t,null);if(t instanceof rt)return this.transformLineString(t,null);if(t instanceof ie)return this.transformMultiLineString(t,null);if(t instanceof mt)return this.transformPolygon(t,null);if(t instanceof Ut)return this.transformMultiPolygon(t,null);if(t instanceof at)return this.transformGeometryCollection(t,null);throw new d("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return ee}}),u(Ir.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;n>r;r++){var s=t.get(r),o=this.findSnapForVertex(s,e);o!==null&&(t.set(r,new E(o)),r===0&&this._isClosed&&t.set(t.size()-1,new E(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new A(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(e.length===0)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;n>r;r++){var s=e[r],o=this.findSegmentIndexToSnap(s,t);o>=0&&t.add(o+1,new E(s),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=p.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&n>o&&(n=o,r=s)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])},u(Qt.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),r=new Wr(e,n);return r.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),r=new Wr(t,n,!0),s=r.transform(this.srcGeom),o=s;return e&&X(o,Qe)&&(o=s.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new Kt,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=p.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);e>r&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.snap=function(t,e,n){var r=new Array(2).fill(null),s=new Qt(t);r[0]=s.snapTo(e,n);var o=new Qt(e);return r[1]=o.snapTo(r[0],n),r},Qt.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=Qt.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===gt.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(arguments.length===2){var s=arguments[0],o=arguments[1];return Math.min(Qt.computeOverlaySnapTolerance(s),Qt.computeOverlaySnapTolerance(o))}},Qt.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*Qt.SNAP_PRECISION_FACTOR;return r},Qt.snapToSelf=function(t,e,n){var r=new Qt(t);return r.snapToSelf(e,n)},Qt.SNAP_PRECISION_FACTOR=1e-9,S(Wr,ee),u(Wr.prototype,{snapLine:function(t,e){var n=new Ir(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)},interfaces_:function(){return[]},getClass:function(){return Wr}}),u(me.prototype,{getCommon:function(){return p.longBitsToDouble(this.commonBits)},add:function(t){var e=p.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=me.signExpBits(this.commonBits),this.isFirst=!1,null;var n=me.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=me.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=me.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=p.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,s=r.substring(r.length-64),o=s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]";return o}},interfaces_:function(){return[]},getClass:function(){return me}}),me.getBit=function(t,e){var n=1<<e;return t&n?1:0},me.signExpBits=function(t){return t>>52},me.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,s=t&r;return s},me.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(me.getBit(t,r)!==me.getBit(e,r))return n;n++}return 52},u($r.prototype,{addCommonBits:function(t){var e=new Zr(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new E(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Zr(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return $r}}),u(es.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new E(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[Pn]},getClass:function(){return es}}),u(Zr.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[jn]},getClass:function(){return Zr}}),$r.CommonCoordinateFilter=es,$r.Translater=Zr,u(er.prototype,{next:function(){if(this.atStart)return this.atStart=!1,er.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new M;var t=this.parent.getGeometryN(this.index++);return t instanceof at?(this.subcollectionIterator=new er(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[H]},getClass:function(){return er}}),er.isAtomic=function(t){return!(t instanceof at)},u(nr.prototype,{locateInternal:function(){if(arguments[0]instanceof E&&arguments[1]instanceof mt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return m.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===m.EXTERIOR)return m.EXTERIOR;if(r===m.BOUNDARY)return m.BOUNDARY;for(var s=0;s<e.getNumInteriorRing();s++){var o=e.getInteriorRingN(s),c=this.locateInPolygonRing(t,o);if(c===m.INTERIOR)return m.EXTERIOR;if(c===m.BOUNDARY)return m.BOUNDARY}return m.INTERIOR}if(arguments[0]instanceof E&&arguments[1]instanceof rt){var f=arguments[0],y=arguments[1];if(!y.getEnvelopeInternal().intersects(f))return m.EXTERIOR;var R=y.getCoordinates();return y.isClosed()||!f.equals(R[0])&&!f.equals(R[R.length-1])?Y.isOnLine(f,R)?m.INTERIOR:m.EXTERIOR:m.BOUNDARY}if(arguments[0]instanceof E&&arguments[1]instanceof wt){var _=arguments[0],D=arguments[1],q=D.getCoordinate();return q.equals2D(_)?m.INTERIOR:m.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Y.locatePointInRing(t,e.getCoordinates()):m.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==m.EXTERIOR},updateLocationInfo:function(t){t===m.INTERIOR&&(this.isIn=!0),t===m.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof wt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof rt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof mt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ie)for(var n=e,r=0;r<n.getNumGeometries();r++){var s=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Ut)for(var o=e,r=0;r<o.getNumGeometries();r++){var c=o.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,c))}else if(e instanceof at)for(var f=new er(e);f.hasNext();){var y=f.next();y!==e&&this.computeLocation(t,y)}},locate:function(t,e){return e.isEmpty()?m.EXTERIOR:e instanceof rt?this.locateInternal(t,e):e instanceof mt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?m.BOUNDARY:this.numBoundaries>0||this.isIn?m.INTERIOR:m.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return nr}}),u(Nr.prototype,{interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof E&&arguments[1]instanceof E){var s=arguments[0],o=arguments[1],c=o.x-s.x,f=o.y-s.y;if(c===0&&f===0)throw new d;return Nr.octant(c,f)}},u(Jr.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Jr}}),u(Po.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Nr.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Wt.toLineString(new pe(this.pts))},interfaces_:function(){return[Jr]},getClass:function(){return Po}}),u(ns.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return ns}}),u(rn.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[ns,C]},getClass:function(){return rn}}),u(Oo.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Oo}}),u(On.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return On}}),u(rs.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return rs}}),u(te.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){T.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[ns,C]},getClass:function(){return te}}),te.serialVersionUID=6493722185909574e3;var We={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return We.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?Ke.sort(n,e):Ke.sort(n);for(var r=t.iterator(),s=0,o=n.length;o>s;s++)r.next(),r.set(n[s])},singletonList:function(t){var e=new P;return e.add(t),e}};u(ne.prototype,{expandToQueue:function(t,e){var n=ne.isComposite(this.boundable1),r=ne.isComposite(this.boundable2);if(n&&r)return ne.area(this.boundable1)>ne.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new d},isLeaves:function(){return!(ne.isComposite(this.boundable1)||ne.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,r){for(var s=t.getChildBoundables(),o=s.iterator();o.hasNext();){var c=o.next(),f=new ne(c,e,this.itemDistance);f.getDistance()<r&&n.add(f)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[v]},getClass:function(){return ne}}),ne.area=function(t){return t.getBounds().getArea()},ne.isComposite=function(t){return t instanceof te},u(Pt.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof te?n+=this.size(s):s instanceof rn&&(n+=1)}return n}},removeItem:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof rn&&s.getItem()===e&&(n=s)}return n!==null?(t.getChildBoundables().remove(n),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new P:t}if(arguments.length===1){for(var e=arguments[0],n=new P,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof te){var o=this.itemsTree(s);o!==null&&n.add(o)}else s instanceof rn?n.add(s.getItem()):T.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){T.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new rn(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new P;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(T.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var c=o.next();c instanceof te?this.boundablesAtLevel(n,c,s):(T.isTrue(c instanceof rn),n===-1&&s.add(c))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new P;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,r)}else if(arguments.length===3){if(X(arguments[2],On)&&arguments[0]instanceof Object&&arguments[1]instanceof te)for(var s=arguments[0],o=arguments[1],c=arguments[2],f=o.getChildBoundables(),y=0;y<f.size();y++){var R=f.get(y);this.getIntersectsOp().intersects(R.getBounds(),s)&&(R instanceof te?this.query(s,R,c):R instanceof rn?c.visitItem(R.getItem()):T.shouldNeverReachHere())}else if(X(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof te)for(var _=arguments[0],D=arguments[1],q=arguments[2],f=D.getChildBoundables(),y=0;y<f.size();y++){var R=f.get(y);this.getIntersectsOp().intersects(R.getBounds(),_)&&(R instanceof te?this.query(_,R,q):R instanceof rn?q.add(R.getItem()):T.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove(t,this.root,e):!1}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],o=this.removeItem(r,s);if(o)return!0;for(var c=null,f=r.getChildBoundables().iterator();f.hasNext();){var y=f.next();if(this.getIntersectsOp().intersects(y.getBounds(),n)&&y instanceof te&&(o=this.remove(n,y,s))){c=y;break}}return c!==null&&c.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(c),o}},createHigherLevels:function(t,e){T.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof te){var s=this.depth(r);s>e&&(e=s)}}return e+1}},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=new P;n.add(this.createNode(e));var r=new P(t);We.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var o=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[C]},getClass:function(){return Pt}}),Pt.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Pt.IntersectsOp=Tl,Pt.serialVersionUID=-3886435814360241e3,Pt.DEFAULT_NODE_CAPACITY=10,u(is.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return is}}),S(St,Pt),u(St.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){T.isTrue(t.length>0);for(var n=new P,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},createNode:function(t){return new Kr(t)},size:function(){return arguments.length===0?Pt.prototype.size.call(this):Pt.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Pt.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Pt.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return St.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),s=t.iterator(),o=0;e>o;o++){r[o]=new P;for(var c=0;s.hasNext()&&n>c;){var f=s.next();r[o].add(f),c++}}return r},query:function(){if(arguments.length===1){var t=arguments[0];return Pt.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];Pt.prototype.query.call(this,e,n)}else if(arguments.length===3){if(X(arguments[2],On)&&arguments[0]instanceof Object&&arguments[1]instanceof te){var r=arguments[0],s=arguments[1],o=arguments[2];Pt.prototype.query.call(this,r,s,o)}else if(X(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof te){var c=arguments[0],f=arguments[1],y=arguments[2];Pt.prototype.query.call(this,c,f,y)}}},getComparator:function(){return St.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Pt.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Pt.prototype.remove.call(this,t,e)}return Pt.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Pt.prototype.depth.call(this):Pt.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new P(t);We.sort(r,St.xComparator);var s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)},nearestNeighbour:function(){if(arguments.length===1){if(X(arguments[0],is)){var t=arguments[0],e=new ne(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ne){var n=arguments[0];return this.nearestNeighbour(n,p.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof St&&X(arguments[1],is)){var r=arguments[0],s=arguments[1],e=new ne(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof ne&&typeof arguments[1]=="number"){var o=arguments[0],c=arguments[1],f=c,y=null,R=new Oo;for(R.add(o);!R.isEmpty()&&f>0;){var _=R.poll(),D=_.getDistance();if(D>=f)break;_.isLeaves()?(f=D,y=_):_.expandToQueue(R,f)}return[y.getBoundable(0).getItem(),y.getBoundable(1).getItem()]}}else if(arguments.length===3){var q=arguments[0],Z=arguments[1],K=arguments[2],Q=new rn(q,Z),e=new ne(this.getRoot(),Q,K);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[rs,C]},getClass:function(){return St}}),St.centreX=function(t){return St.avg(t.getMinX(),t.getMaxX())},St.avg=function(t,e){return(t+e)/2},St.centreY=function(t){return St.avg(t.getMinY(),t.getMaxY())},S(Kr,te),u(Kr.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();t===null?t=new O(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Kr}}),St.STRtreeNode=Kr,St.serialVersionUID=0x39920f7d5f261e0,St.xComparator={interfaces_:function(){return[x]},compare:function(t,e){return Pt.compareDoubles(St.centreX(t.getBounds()),St.centreX(e.getBounds()))}},St.yComparator={interfaces_:function(){return[x]},compare:function(t,e){return Pt.compareDoubles(St.centreY(t.getBounds()),St.centreY(e.getBounds()))}},St.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},St.DEFAULT_NODE_CAPACITY=10,u(re.prototype,{interfaces_:function(){return[]},getClass:function(){return re}}),re.relativeSign=function(t,e){return e>t?-1:t>e?1:0},re.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=re.relativeSign(e.x,n.x),s=re.relativeSign(e.y,n.y);switch(t){case 0:return re.compareValue(r,s);case 1:return re.compareValue(s,r);case 2:return re.compareValue(s,-r);case 3:return re.compareValue(-r,s);case 4:return re.compareValue(-r,-s);case 5:return re.compareValue(-s,-r);case 6:return re.compareValue(-s,r);case 7:return re.compareValue(r,-s)}return T.shouldNeverReachHere("invalid octant value"),0},re.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},u(Mo.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:re.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===t:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[v]},getClass:function(){return Mo}}),u(_o.prototype,{getSplitCoordinates:function(){var t=new A;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new P;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.add(new Ct(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex-t.segmentIndex+2;var r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);n.add(new E(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));s&&n.add(new E(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,r===1?(n[0]=t.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var s=n.next(),o=this.findCollapseIndex(r,s,e);o&&t.add(new Ct(e[0])),r=s}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);s||n--;var o=new Array(n).fill(null),c=0;o[c++]=new E(t.coord);for(var f=t.segmentIndex+1;f<=e.segmentIndex;f++)o[c++]=this.edge.getCoordinate(f);return s&&(o[c]=new E(e.coord)),new Be(o,this.edge.getData())},add:function(t,e){var n=new Mo(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return r!==null?(T.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new w("bad split edge start point at "+r);var s=t.get(t.size()-1),o=s.getCoordinates(),c=o[o.length-1];if(!c.equals2D(e[e.length-1]))throw new w("bad split edge end point at "+c)},interfaces_:function(){return[]},getClass:function(){return _o}}),u(Ba.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[H]},getClass:function(){return Ba}}),u(bo.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[Jr]},getClass:function(){return bo}}),u(Be.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Nr.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[3],o=new E(n.getIntersection(s));this.addIntersection(o,r)}},toString:function(){return Wt.toLineString(new pe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,r=n+1;if(r<this.pts.length){var s=this.pts[r];t.equals2D(s)&&(n=r)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[bo]},getClass:function(){return Be}}),Be.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new P;return Be.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[0],r=arguments[1],s=n.iterator();s.hasNext();){var o=s.next();o.getNodeList().addSplitEdges(r)}},u(jr.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(r,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return jr}}),u(Ao.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,r){var s=this.pts[e],o=this.pts[n];if(r.tempEnv1.init(s,o),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var c=Math.trunc((e+n)/2);c>e&&this.computeSelect(t,e,c,r),n>c&&this.computeSelect(t,c,n,r)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new O(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,r,s,o){var c=this.pts[t],f=this.pts[e],y=n.pts[r],R=n.pts[s];if(e-t===1&&s-r===1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(c,f),o.tempEnv2.init(y,R),!o.tempEnv1.intersects(o.tempEnv2))return null;var _=Math.trunc((t+e)/2),D=Math.trunc((r+s)/2);_>t&&(D>r&&this.computeOverlapsInternal(t,_,n,r,D,o),s>D&&this.computeOverlapsInternal(t,_,n,D,s,o)),e>_&&(D>r&&this.computeOverlapsInternal(_,e,n,r,D,o),s>D&&this.computeOverlapsInternal(_,e,n,D,s,o))},interfaces_:function(){return[]},getClass:function(){return Ao}}),u(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.isNorthern=function(t){return t===lt.NE||t===lt.NW},lt.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2},lt.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var r=e>t?t:e,s=t>e?t:e;return r===0&&s===3?3:r},lt.isInHalfPlane=function(t,e){return e===lt.SE?t===lt.SE||t===lt.SW:t===e||t===e+1},lt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;return t>=0?e>=0?lt.NE:lt.SE:e>=0?lt.NW:lt.SW}if(arguments[0]instanceof E&&arguments[1]instanceof E){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new d;return r.x>=n.x?r.y>=n.y?lt.NE:lt.SE:r.y>=n.y?lt.NW:lt.SW}},lt.NE=0,lt.NW=1,lt.SW=2,lt.SE=3,u(Pe.prototype,{interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.getChainStartIndices=function(t){var e=0,n=new P;n.add(new Ct(e));do{var r=Pe.findChainEnd(t,e);n.add(new Ct(r)),e=r}while(e<t.length-1);var s=Pe.toIntArray(n);return s},Pe.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=lt.quadrant(t[n],t[n+1]),s=e+1;s<t.length;){if(!t[s-1].equals2D(t[s])){var o=lt.quadrant(t[s-1],t[s]);if(o!==r)break}s++}return s-1},Pe.getChains=function(){if(arguments.length===1){var t=arguments[0];return Pe.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new P,s=Pe.getChainStartIndices(e),o=0;o<s.length-1;o++){var c=new Ao(e,s[o],s[o+1],n);r.add(c)}return r}},Pe.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},u(Qr.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Qr}}),u(ss.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Qr]},getClass:function(){return ss}}),S(Mn,ss),u(Mn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Be.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Pe.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new ti(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this.index.query(n.getEnvelope()),s=r.iterator();s.hasNext();){var o=s.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Mn}}),S(ti,jr),u(ti.prototype,{overlap:function(){if(arguments.length!==4)return jr.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],s=t.getContext(),o=n.getContext();this.si.processIntersections(s,e,o,r)},interfaces_:function(){return[]},getClass:function(){return ti}}),Mn.SegmentOverlapAction=ti,S(oe,w),u(oe.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},u(ei.prototype,{processIntersections:function(t,e,n,r){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ei}}),u(xn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,r){if(!this.findAllIntersections&&this.hasIntersection()||t===n&&e===r)return null;if(this.isCheckEndSegmentsOnly){var s=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!s)return null}var o=t.getCoordinates()[e],c=t.getCoordinates()[e+1],f=n.getCoordinates()[r],y=n.getCoordinates()[r+1];this.li.computeIntersection(o,c,f,y),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=c,this.intSegments[2]=f,this.intSegments[3]=y,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0?!0:e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[ei]},getClass:function(){return xn}}),xn.createAllIntersectionsFinder=function(t){var e=new xn(t);return e.setFindAllIntersections(!0),e},xn.createAnyIntersectionFinder=function(t){return new xn(t)},xn.createIntersectionCounter=function(t){var e=new xn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},u(ni.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new xn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Mn;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new oe(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Wt.toLineString(t[0],t[1])+" and "+Wt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return ni}}),ni.computeIntersections=function(t){var e=new ni(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},u(rr.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.toSegmentStrings=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Po(r.getCoordinates(),r))}return e},rr.checkValid=function(t){var e=new rr(t);e.checkValid()},u(Cr.prototype,{map:function(t){for(var e=new P,n=0;n<t.getNumGeometries();n++){var r=this.mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(st.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.map=function(t,e){var n=new Cr(e);return n.map(t)},u(U.prototype,{interfaces_:function(){return[]},getClass:function(){return U}}),U.opposite=function(t){return t===U.LEFT?U.RIGHT:t===U.RIGHT?U.LEFT:t},U.ON=0,U.LEFT=1,U.RIGHT=2,u(ae.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==m.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===m.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[U.ON]=this.location[U.ON],e[U.LEFT]=m.NONE,e[U.RIGHT]=m.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===m.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[U.LEFT];this.location[U.LEFT]=this.location[U.RIGHT],this.location[U.RIGHT]=t},toString:function(){var t=new yt;return this.location.length>1&&t.append(m.toLocationSymbol(this.location[U.LEFT])),t.append(m.toLocationSymbol(this.location[U.ON])),this.location.length>1&&t.append(m.toLocationSymbol(this.location[U.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[U.ON]=t,this.location[U.LEFT]=e,this.location[U.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:m.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===m.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(U.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(m.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ae}}),u(Ot.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new ae(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(U.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new yt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(U.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new ae(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.toLineLabel=function(t){for(var e=new Ot(m.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},u(wr.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Y.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(e===null)throw new oe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new oe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var r=e.getLabel();T.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var r=t.getCoordinates();if(e){var s=1;n&&(s=0);for(var o=s;o<r.length;o++)this.pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var o=s;o>=0;o--)this.pts.add(r[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!Y.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var s=r.next();if(s.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=e.getLocation(n,U.RIGHT);if(r===m.NONE)return null;if(this.label.getLocation(n)===m.NONE)return this.label.setLocation(n,r),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var r=t.createPolygon(this.getLinearRing(),e);return r},interfaces_:function(){return[]},getClass:function(){return wr}}),S(os,wr),u(os.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return os}}),S(ri,wr),u(ri.prototype,{buildMinimalRings:function(){var t=new P,e=this.startDe;do{if(e.getMinEdgeRing()===null){var n=new os(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return ri}}),u(_n.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){T.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return _n}}),S(sn,_n),u(sn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=m.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==m.BOUNDARY&&(n=r)}return n},setLabel:function(){if(arguments.length!==2)return _n.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new Ot(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof sn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Ot)for(var e=arguments[0],n=0;2>n;n++){var r=this.computeMergedLocation(e,n),s=this.label.getLocation(n);s===m.NONE&&this.label.setLocation(n,r)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=m.NONE;this.label!==null&&(e=this.label.getLocation(t));var n=null;switch(e){case m.BOUNDARY:n=m.INTERIOR;break;case m.INTERIOR:n=m.BOUNDARY;break;default:n=m.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return sn}}),u(Sr.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof E){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof sn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return e===null?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new P,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===m.BOUNDARY&&e.add(r)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return Sr}}),u(Ve.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Y.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=lt.quadrant(this.dx,this.dy),T.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[v]},getClass:function(){return Ve}}),S(ir,Ve),u(ir.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Ot(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new oe("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,n=0;2>n;n++)this.label.isArea(n)&&this.label.getLocation(n,U.LEFT)===m.INTERIOR&&this.label.getLocation(n,U.RIGHT)===m.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){Ve.prototype.print.call(this,t),t.print(" "+this.depth[U.LEFT]+"/"+this.depth[U.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,m.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,m.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===U.LEFT&&(r=-1);var s=U.opposite(t),o=n*r,c=e+o;this.setDepth(t,e),this.setDepth(s,c)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.depthFactor=function(t,e){return t===m.EXTERIOR&&e===m.INTERIOR?1:t===m.INTERIOR&&e===m.EXTERIOR?-1:0},u(sr.prototype,{createNode:function(t){return new sn(t,null)},interfaces_:function(){return[]},getClass:function(){return sr}}),u(ze.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof sn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){pt.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(t)===m.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,r){return t.equals(n)?Y.computeOrientation(t,e,r)===Y.COLLINEAR&&lt.quadrant(t,e)===lt.quadrant(n,r):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){pt.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1])||this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return r}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new ir(n,!0),s=new ir(n,!1);r.setSym(s),s.setSym(r),this.add(r),this.add(s)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return r}return null},interfaces_:function(){return[]},getClass:function(){return ze}}),ze.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},u(as.prototype,{sortShellsAndHoles:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):e.add(s)}},computePolygons:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next(),s=r.toPolygon(this.geometryFactory);e.add(s)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=this.findEdgeRingContaining(r,t);if(s===null)throw new oe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}},buildMinimalEdgeRings:function(t,e,n){for(var r=new P,s=t.iterator();s.hasNext();){var o=s.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var c=o.buildMinimalRings(),f=this.findShell(c);f!==null?(this.placePolygonHoles(f,c),e.add(f)):n.addAll(c)}else r.add(o)}return r},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new ri(r,this.geometryFactory);e.add(s),s.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,c=null,f=e.iterator();f.hasNext();){var y=f.next(),R=y.getLinearRing(),_=R.getEnvelopeInternal();o!==null&&(c=o.getLinearRing().getEnvelopeInternal());var D=!1;_.contains(r)&&Y.isPointInRing(s,R.getCoordinates())&&(D=!0),D&&(o===null||c.contains(_))&&(o=y)}return o},findShell:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,e++)}return T.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];ze.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),s=new P,o=this.buildMinimalEdgeRings(r,this.shellList,s);this.sortShellsAndHoles(o,this.shellList,s),this.placeFreeHoles(this.shellList,s)}},interfaces_:function(){return[]},getClass:function(){return as}}),u(Do.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var r=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!J.isResultOfOp(r,e)||s.isCovered()||(n.add(s),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),s=r.getEdge();if(r.isLineEdge()&&!s.isCoveredSet()){var o=this.op.isCoveredByA(r.getCoordinate());s.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(T.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(J.isResultOfOp(r,e)&&e===J.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return Do}}),u(Fo.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||n.getEdges().getDegree()!==0&&t!==J.INTERSECTION)){var r=n.getLabel();J.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Fo}}),u(us.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return us}}),u(ve.prototype,{locate:function(t){return ve.locate(t,this.geom)},interfaces_:function(){return[us]},getClass:function(){return ve}}),ve.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Y.isPointInRing(t,e.getCoordinates()):!1},ve.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!ve.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r);if(ve.isPointInRing(t,s))return!1}return!0},ve.containsPoint=function(t,e){if(e instanceof mt)return ve.containsPointInPolygon(t,e);if(e instanceof at)for(var n=new er(e);n.hasNext();){var r=n.next();if(r!==e&&ve.containsPoint(t,r))return!0}return!1},ve.locate=function(t,e){return e.isEmpty()?m.EXTERIOR:ve.containsPoint(t,e)?m.INTERIOR:m.EXTERIOR},u(or.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return e===0&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=m.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();s.isArea(t)&&s.getLocation(t,U.LEFT)!==m.NONE&&(e=s.getLocation(t,U.LEFT))}if(e===m.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();if(s.getLocation(t,U.ON)===m.NONE&&s.setLocation(t,U.ON,o),s.isArea(t)){var c=s.getLocation(t,U.LEFT),f=s.getLocation(t,U.RIGHT);if(f!==m.NONE){if(f!==o)throw new oe("side location conflict",r.getCoordinate());c===m.NONE&&T.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),o=c}else T.isTrue(s.getLocation(t,U.LEFT)===m.NONE,"found single null side"),s.setLocation(t,U.RIGHT,o),s.setLocation(t,U.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){pt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),s=r.getLocation(t,U.LEFT);T.isTrue(s!==m.NONE,"Found unlabelled area edge");for(var o=s,c=this.iterator();c.hasNext();){var f=c.next(),y=f.getLabel();T.isTrue(y.isArea(t),"Found non-area edge");var R=y.getLocation(t,U.LEFT),_=y.getLocation(t,U.RIGHT);if(R===_||_!==o)return!1;o=R}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new P(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===m.NONE&&(this.ptInAreaLocation[t]=ve.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new yt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),o=0;2>o;o++)s.isLine(o)&&s.getLocation(o)===m.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),o=0;2>o;o++)if(s.isAnyNull(o)){var c=m.NONE;if(e[o])c=m.EXTERIOR;else{var f=r.getCoordinate();c=this.getLocation(o,f,t)}s.setAllLocationsIfNull(o,c)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return or}}),S(ls,or),u(ls.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var s=this.resultAreaEdgeList.get(r),o=s.getSym();if(s.getLabel().isArea())switch(t===null&&s.isInResult()&&(t=s),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(t===null)throw new oe("no outgoing dirEdge found",this.getCoordinate());T.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(e===1)return n;var r=t.get(e-1),s=n.getQuadrant(),o=r.getQuadrant();return lt.isNorthern(s)&&lt.isNorthern(o)?n:!lt.isNorthern(s)&&!lt.isNorthern(o)?r:n.getDy()!==0?n:r.getDy()!==0?r:(T.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){pt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new P;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),s=r.getSym();e===null&&(e=s),t!==null&&s.setNext(t),t=r}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(U.LEFT)),r=t.getDepth(U.RIGHT),s=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,s);if(o!==r)throw new oe("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var c=arguments[0],f=arguments[1],y=arguments[2],R=y,_=c;f>_;_++){var D=this.edgeList.get(_);D.getLabel(),D.setEdgeDepths(U.RIGHT,R),R=D.getDepth(U.LEFT)}return R}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,r=this.SCANNING_FOR_INCOMING,s=this.resultAreaEdgeList.size()-1;s>=0;s--){var o=this.resultAreaEdgeList.get(s),c=o.getSym();switch(e===null&&o.getEdgeRing()===t&&(e=o),r){case this.SCANNING_FOR_INCOMING:if(c.getEdgeRing()!==t)continue;n=c,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(T.isTrue(e!==null,"found null for first outgoing dirEdge"),T.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(arguments.length===1){for(var r=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===r&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=m.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=m.INTERIOR;break}if(r.isInResult()){t=m.EXTERIOR;break}}}if(t===m.NONE)return null;for(var s=t,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(s===m.INTERIOR):(n.isInResult()&&(s=m.EXTERIOR),r.isInResult()&&(s=m.INTERIOR))}},computeLabelling:function(t){or.prototype.computeLabelling.call(this,t),this.label=new Ot(m.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge(),s=r.getLabel(),o=0;2>o;o++){var c=s.getLocation(o);c!==m.INTERIOR&&c!==m.BOUNDARY||this.label.setLocation(o,m.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return ls}}),S(Lr,sr),u(Lr.prototype,{createNode:function(t){return new sn(t,new ls)},interfaces_:function(){return[]},getClass:function(){return Lr}}),u(Go.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return Go}}),u(on.prototype,{isDelete:function(){return this.eventType===on.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===on.INSERT},isSameLabel:function(t){return this.label===null?!1:this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[v]},getClass:function(){return on}}),on.INSERT=1,on.DELETE=2,u(hs.prototype,{interfaces_:function(){return[]},getClass:function(){return hs}}),u(bn.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(bn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinate();if(t.isIntersection(s))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e===null?!1:this.isBoundaryPointInternal(t,e[0])?!0:!!this.isBoundaryPointInternal(t,e[1])},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];this.li.computeIntersection(s,o,c,f),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},S(cs,hs),u(cs.prototype,{prepareEvents:function(){We.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof bn&&X(arguments[0],N)&&X(arguments[1],N)){var r=arguments[0],s=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(s,s),this.computeIntersections(o)}else if(typeof arguments[2]=="boolean"&&X(arguments[0],N)&&arguments[1]instanceof bn){var c=arguments[0],f=arguments[1],y=arguments[2];y?this.addEdges(c,null):this.addEdges(c),this.computeIntersections(f)}}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),s=0;s<r.length-1;s++){var o=new Go(n,s),c=new on(e,n.getMinX(s),o);this.events.add(c),this.events.add(new on(n.getMaxX(s),c))}},processOverlaps:function(t,e,n,r){for(var s=n.getObject(),o=t;e>o;o++){var c=this.events.get(o);if(c.isInsert()){var f=c.getObject();n.isSameLabel(c)||(s.computeIntersections(f,r),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(arguments.length===2)for(var r=arguments[0],s=arguments[1],e=r.iterator();e.hasNext();){var n=e.next();this.addEdge(n,s)}},interfaces_:function(){return[]},getClass:function(){return cs}}),u(ar.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Wt.toLineString(new E(this.min,0),new E(this.max,0))},interfaces_:function(){return[]},getClass:function(){return ar}}),u(qo.prototype,{compare:function(t,e){var n=t,r=e,s=(n.min+n.max)/2,o=(r.min+r.max)/2;return o>s?-1:s>o?1:0},interfaces_:function(){return[x]},getClass:function(){return qo}}),ar.NodeComparator=qo,S(gs,ar),u(gs.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return gs}}),S(fs,ar),u(fs.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,n),void(this.node2!==null&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return fs}}),u(Bo.prototype,{buildTree:function(){We.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new P;;){if(this.buildLevel(t,n),n.size()===1)return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new gs(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){pt.out.println(Wt.toLineString(new E(t.min,this.level),new E(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),s=n+1<t.size()?t.get(n):null;if(s===null)e.add(r);else{var o=new fs(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return Bo}}),u($t.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Tt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof rt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[ge]},getClass:function(){return $t}}),$t.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry($t.getLines(t))}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry($t.getLines(e,n))}},$t.getLines=function(){if(arguments.length===1){var t=arguments[0];return $t.getLines(t,!1)}if(arguments.length===2){if(X(arguments[0],V)&&X(arguments[1],V)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var s=r.next();$t.getLines(s,n)}return n}if(arguments[0]instanceof $&&typeof arguments[1]=="boolean"){var o=arguments[0],c=arguments[1],f=new P;return o.apply(new $t(f,c)),f}if(arguments[0]instanceof $&&X(arguments[1],V)){var y=arguments[0],R=arguments[1];return y instanceof rt?R.add(y):y.apply(new $t(R)),R}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&X(arguments[0],V)&&X(arguments[1],V)){for(var _=arguments[0],D=arguments[1],q=arguments[2],r=_.iterator();r.hasNext();){var s=r.next();$t.getLines(s,D,q)}return D}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof $&&X(arguments[1],V)){var Z=arguments[0],K=arguments[1],Q=arguments[2];return Z.apply(new $t(K,Q)),K}}},u(ds.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[On]},getClass:function(){return ds}}),u(ii.prototype,{locate:function(t){var e=new tr(t),n=new ps(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[us]},getClass:function(){return ii}}),u(ps.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[On]},getClass:function(){return ps}}),u(ms.prototype,{init:function(t){for(var e=$t.getLines(t),n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinates();this.addLine(s)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new tt(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),s=Math.max(n.p0.y,n.p1.y);this.index.insert(r,s,n)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new ds;return this.index.query(t,e,n),n.getItems()}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.index.query(r,s,o)}},interfaces_:function(){return[]},getClass:function(){return ms}}),ii.SegmentVisitor=ps,ii.IntervalIndexedGeometry=ms,u(Vo.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[v]},getClass:function(){return Vo}}),u(zo.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(r);s||n--;var o=new Array(n).fill(null),c=0;o[c++]=new E(t.coord);for(var f=t.segmentIndex+1;f<=e.segmentIndex;f++)o[c++]=this.edge.pts[f];return s&&(o[c]=e.coord),new Ne(o,new Ot(this.edge.label))},add:function(t,e,n){var r=new Vo(t,e,n),s=this.nodeMap.get(r);return s!==null?s:(this.nodeMap.put(r,r),r)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return zo}}),u(si.prototype,{getChainStartIndices:function(t){var e=0,n=new P;n.add(new Ct(e));do{var r=this.findChainEnd(t,e);n.add(new Ct(r)),e=r}while(e<t.length-1);var s=si.toIntArray(n);return s},findChainEnd:function(t,e){for(var n=lt.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var s=lt.quadrant(t[r-1],t[r]);if(s!==n)break;r++}return r-1},interfaces_:function(){return[]},getClass:function(){return si}}),si.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},u(ko.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(arguments.length===6){var s=arguments[0],o=arguments[1],c=arguments[2],f=arguments[3],y=arguments[4],R=arguments[5],_=this.pts[s],D=this.pts[o],q=c.pts[f],Z=c.pts[y];if(o-s===1&&y-f===1)return R.addIntersections(this.e,s,c.e,f),null;if(this.env1.init(_,D),this.env2.init(q,Z),!this.env1.intersects(this.env2))return null;var K=Math.trunc((s+o)/2),Q=Math.trunc((f+y)/2);K>s&&(Q>f&&this.computeIntersectsForChain(s,K,c,f,Q,R),y>Q&&this.computeIntersectsForChain(s,K,c,Q,y,R)),o>K&&(Q>f&&this.computeIntersectsForChain(K,o,c,f,Q,R),y>Q&&this.computeIntersectsForChain(K,o,c,Q,y,R))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},interfaces_:function(){return[]},getClass:function(){return ko}}),u(Oe.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(arguments.length===0){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Oe.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this.depth[n][1]===Oe.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this.depth[r][s]===Oe.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},getDelta:function(t){return this.depth[t][U.RIGHT]-this.depth[t][U.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?m.EXTERIOR:m.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var r=t.getLocation(e,n);r!==m.EXTERIOR&&r!==m.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Oe.depthAtLocation(r):this.depth[e][n]+=Oe.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];c===m.INTERIOR&&this.depth[s][o]++}},interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.depthAtLocation=function(t){return t===m.EXTERIOR?0:t===m.INTERIOR?1:Oe.NULL_VALUE},Oe.NULL_VALUE=-1,S(Ne,_n),u(Ne.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Ne(t,Ot.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Ne))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,s=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--s])||(r=!1),!n&&!r)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Ne.updateIM(this.label,t)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new ko(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new O;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,r){var s=new E(t.getIntersection(r)),o=e,c=t.getEdgeDistance(n,r),f=o+1;if(f<this.pts.length){var y=this.pts[f];s.equals2D(y)&&(o=f,c=0)}this.eiList.add(s,o,c)},toString:function(){var t=new yt;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[]},getClass:function(){return Ne}}),Ne.updateIM=function(){if(arguments.length!==2)return _n.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,U.ON),t.getLocation(1,U.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,U.LEFT),t.getLocation(1,U.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,U.RIGHT),t.getLocation(1,U.RIGHT),2))},S(ue,ze),u(ue.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),r=n.getLabel(),s=1,o=m.NONE;o=r.getLocation(t,U.ON),o===m.BOUNDARY&&s++;var c=ue.determineBoundary(this.boundaryNodeRule,s);r.setLocation(t,c)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],o=new bn(n,!0,!1);o.setIsDoneIfProperInt(s);var c=this.createEdgeSetIntersector(),f=this.parentGeom instanceof Tt||this.parentGeom instanceof mt||this.parentGeom instanceof Ut,y=r||!f;return c.computeIntersections(this.edges,o,y),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var r=new bn(e,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this.edges,t.edges,r),r},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof wt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,m.INTERIOR)}else if(arguments[0]instanceof E){var n=arguments[0];this.insertPoint(this.argIndex,n,m.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),m.EXTERIOR,m.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,m.INTERIOR,m.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],m.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],m.BOUNDARY)},addLineString:function(t){var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Ne(e,new Ot(this.argIndex,m.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),T.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var s=r.next();e[n++]=s.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===m.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var r=j.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var s=e,o=n;Y.isCCW(r)&&(s=n,o=e);var c=new Ne(r,new Ot(this.argIndex,m.BOUNDARY,s,o));this.lineEdgeMap.put(t,c),this.insertEdge(c),this.insertPoint(this.argIndex,r[0],m.BOUNDARY)},insertPoint:function(t,e,n){var r=this.nodes.addNode(e),s=r.getLabel();s===null?r.label=new Ot(t,n):s.setLocation(t,n)},createEdgeSetIntersector:function(){return new cs},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.eiList.iterator();s.hasNext();){var o=s.next();this.addSelfIntersectionNode(t,o.coord,r)}},add:function(){if(arguments.length!==1)return ze.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Ut&&(this.useBoundaryDeterminationRule=!1),t instanceof mt)this.addPolygon(t);else if(t instanceof rt)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof ie)this.addCollection(t);else if(t instanceof Ut)this.addCollection(t);else{if(!(t instanceof at))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return X(this.parentGeom,Qe)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new ii(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return ze.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.determineBoundary=function(t,e){return t.isInBoundary(e)?m.BOUNDARY:m.INTERIOR},u(An.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return An}}),u(Dn.prototype,{compareTo:function(t){var e=t,n=Dn.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[v]},getClass:function(){return Dn}}),Dn.orientation=function(t){return j.increasingDirection(t)===1},Dn.compareOriented=function(t,e,n,r){for(var s=e?1:-1,o=r?1:-1,c=e?t.length:-1,f=r?n.length:-1,y=e?0:t.length-1,R=r?0:n.length-1;;){var _=t[y].compareTo(n[R]);if(_!==0)return _;y+=s,R+=o;var D=y===c,q=R===f;if(D&&!q)return-1;if(!D&&q)return 1;if(D&&q)return 0}},u(vs.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),s=0;s<r.length;s++)s>0&&t.print(","),t.print(r[s].x+" "+r[s].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Dn(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new Dn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return vs}}),S(J,An),u(J.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ot(t.getLabel()),r.flip());var s=e.getDepth();s.isNull()&&s.add(n),s.add(r),n.merge(r)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return this.isCovered(t,this.resultLineList)?!0:!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,r){var s=new P;return s.addAll(t),s.addAll(e),s.addAll(n),s.isEmpty()?J.createEmptyResult(r,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(s)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=this.ptLocator.locate(t,r);if(s!==m.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new P,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new P;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),rr.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new as(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new Do(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var s=new Fo(this,this.geomFact,this.ptLocator);this.resultPointList=s.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&J.isResultOfOp(r.getLocation(0,U.RIGHT),r.getLocation(1,U.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var s=0;2>s;s++)n.isNull(s)||!n.isArea()||r.isNull(s)||(r.getDelta(s)===0?n.toLine(s):(T.isTrue(!r.isNull(s,U.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(s,U.LEFT,r.getLocation(s,U.LEFT)),T.isTrue(!r.isNull(s,U.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(s,U.RIGHT,r.getLocation(s,U.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(t++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return J}}),J.overlayOp=function(t,e,n){var r=new J(t,e),s=r.getResultGeometry(n);return s},J.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return J.createEmptyResult(J.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Cr.map(t,{interfaces_:function(){return[MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.INTERSECTION)},J.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return J.createEmptyResult(J.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.SYMDIFFERENCE)},J.resultDimension=function(t,e,n){var r=e.getDimension(),s=n.getDimension(),o=-1;switch(t){case J.INTERSECTION:o=Math.min(r,s);break;case J.UNION:o=Math.max(r,s);break;case J.DIFFERENCE:o=r;break;case J.SYMDIFFERENCE:o=Math.max(r,s)}return o},J.createEmptyResult=function(t,e,n,r){var s=null;switch(J.resultDimension(t,e,n)){case-1:s=r.createGeometryCollection(new Array(0).fill(null));break;case 0:s=r.createPoint();break;case 1:s=r.createLineString();break;case 2:s=r.createPolygon()}return s},J.difference=function(t,e){return t.isEmpty()?J.createEmptyResult(J.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.DIFFERENCE))},J.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return J.isResultOfOp(n,r,e)}if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];switch(s===m.BOUNDARY&&(s=m.INTERIOR),o===m.BOUNDARY&&(o=m.INTERIOR),c){case J.INTERSECTION:return s===m.INTERIOR&&o===m.INTERIOR;case J.UNION:return s===m.INTERIOR||o===m.INTERIOR;case J.DIFFERENCE:return s===m.INTERIOR&&o!==m.INTERIOR;case J.SYMDIFFERENCE:return s===m.INTERIOR&&o!==m.INTERIOR||s!==m.INTERIOR&&o===m.INTERIOR}return!1}},J.INTERSECTION=1,J.UNION=2,J.DIFFERENCE=3,J.SYMDIFFERENCE=4,u(Ce.prototype,{selfSnap:function(t){var e=new Qt(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new $r,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=J.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||pt.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=Qt.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=Qt.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.overlayOp=function(t,e,n){var r=new Ce(t,e);return r.getResultGeometry(n)},Ce.union=function(t,e){return Ce.overlayOp(t,e,J.UNION)},Ce.intersection=function(t,e){return Ce.overlayOp(t,e,J.INTERSECTION)},Ce.symDifference=function(t,e){return Ce.overlayOp(t,e,J.SYMDIFFERENCE)},Ce.difference=function(t,e){return Ce.overlayOp(t,e,J.DIFFERENCE)},u(Vt.prototype,{getResultGeometry:function(t){var e=null,n=!1,r=null;try{e=J.overlayOp(this.geom[0],this.geom[1],t);var s=!0;s&&(n=!0)}catch(o){if(!(o instanceof w))throw o;r=o}finally{}if(!n)try{e=Ce.overlayOp(this.geom[0],this.geom[1],t)}catch(o){throw o instanceof w?r:o}finally{}return e},interfaces_:function(){return[]},getClass:function(){return Vt}}),Vt.overlayOp=function(t,e,n){var r=new Vt(t,e);return r.getResultGeometry(n)},Vt.union=function(t,e){return Vt.overlayOp(t,e,J.UNION)},Vt.intersection=function(t,e){return Vt.overlayOp(t,e,J.INTERSECTION)},Vt.symDifference=function(t,e){return Vt.overlayOp(t,e,J.SYMDIFFERENCE)},Vt.difference=function(t,e){return Vt.overlayOp(t,e,J.DIFFERENCE)},u(Me.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,r=this.horizontalBisector(t);if(r.getLength()===0)n=0,e=r.getCoordinate();else{var s=Vt.overlayOp(r,t,J.INTERSECTION),o=this.widestGeometry(s);n=o.getEnvelopeInternal().getWidth(),e=Me.centre(o.getEnvelopeInternal())}(this.interiorPoint===null||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof at){var e=arguments[0];if(e.isEmpty())return e;for(var n=e.getGeometryN(0),r=1;r<e.getNumGeometries();r++)e.getGeometryN(r).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(r));return n}if(arguments[0]instanceof $){var s=arguments[0];return s instanceof at?this.widestGeometry(s):s}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=Rr.getBisectorY(t);return this.factory.createLineString([new E(e.getMinX(),n),new E(e.getMaxX(),n)])},add:function(t){if(t instanceof mt)this.addPolygon(t);else if(t instanceof at)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Me}}),Me.centre=function(t){return new E(Me.avg(t.getMinX(),t.getMaxX()),Me.avg(t.getMinY(),t.getMaxY()))},Me.avg=function(t,e){return(t+e)/2},u(Rr.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=Me.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var r=e.getY(n);this.updateInterval(r)}},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.getBisectorY=function(t){var e=new Rr(t);return e.getBisectorY()},Me.SafeBisectorFinder=Rr,u(ys.prototype,{addEndpoints:function(){if(arguments[0]instanceof $){var t=arguments[0];if(t instanceof rt)this.addEndpoints(t.getCoordinates());else if(t instanceof at)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]),this.add(r[r.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof $){var t=arguments[0];if(t instanceof rt)this.addInterior(t.getCoordinates());else if(t instanceof at)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var r=arguments[0],n=1;n<r.length-1;n++)this.add(r[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new E(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return ys}}),u(xs.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof $){var t=arguments[0];if(t instanceof wt)this.add(t.getCoordinate());else if(t instanceof at)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof E){var r=arguments[0],s=r.distance(this.centroid);s<this.minDistance&&(this.interiorPoint=new E(r),this.minDistance=s)}},interfaces_:function(){return[]},getClass:function(){return xs}}),u(et.prototype,{interfaces_:function(){return[]},getClass:function(){return et}}),et.toDegrees=function(t){return 180*t/Math.PI},et.normalize=function(t){for(;t>Math.PI;)t-=et.PI_TIMES_2;for(;t<=-Math.PI;)t+=et.PI_TIMES_2;return t},et.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,s=n.y-e.y;return Math.atan2(s,r)}},et.isAcute=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=n.x-e.x,c=n.y-e.y,f=r*o+s*c;return f>0},et.isObtuse=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=n.x-e.x,c=n.y-e.y,f=r*o+s*c;return 0>f},et.interiorAngle=function(t,e,n){var r=et.angle(e,t),s=et.angle(e,n);return Math.abs(s-r)},et.normalizePositive=function(t){if(0>t){for(;0>t;)t+=et.PI_TIMES_2;t>=et.PI_TIMES_2&&(t=0)}else{for(;t>=et.PI_TIMES_2;)t-=et.PI_TIMES_2;0>t&&(t=0)}return t},et.angleBetween=function(t,e,n){var r=et.angle(e,t),s=et.angle(e,n);return et.diff(r,s)},et.diff=function(t,e){var n=null;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},et.toRadians=function(t){return t*Math.PI/180},et.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?et.COUNTERCLOCKWISE:0>n?et.CLOCKWISE:et.NONE},et.angleBetweenOriented=function(t,e,n){var r=et.angle(e,t),s=et.angle(e,n),o=s-r;return o<=-Math.PI?o+et.PI_TIMES_2:o>Math.PI?o-et.PI_TIMES_2:o},et.PI_TIMES_2=2*Math.PI,et.PI_OVER_2=Math.PI/2,et.PI_OVER_4=Math.PI/4,et.COUNTERCLOCKWISE=Y.COUNTERCLOCKWISE,et.CLOCKWISE=Y.CLOCKWISE,et.NONE=Y.COLLINEAR,u(Et.prototype,{area:function(){return Et.area(this.p0,this.p1,this.p2)},signedArea:function(){return Et.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new d;return Et.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Et.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Et.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Et.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Et.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Et.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Et.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Et}}),Et.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Et.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Et.det=function(t,e,n,r){return t*r-e*n},Et.interpolateZ=function(t,e,n,r){var s=e.x,o=e.y,c=n.x-s,f=r.x-s,y=n.y-o,R=r.y-o,_=c*R-f*y,D=t.x-s,q=t.y-o,Z=(R*D-f*q)/_,K=(-y*D+c*q)/_,Q=e.z+Z*(n.z-e.z)+K*(r.z-e.z);return Q},Et.longestSideLength=function(t,e,n){var r=t.distance(e),s=e.distance(n),o=n.distance(t),c=r;return s>c&&(c=s),o>c&&(c=o),c},Et.isAcute=function(t,e,n){return et.isAcute(t,e,n)&&et.isAcute(e,n,t)?!!et.isAcute(n,t,e):!1},Et.circumcentre=function(t,e,n){var r=n.x,s=n.y,o=t.x-r,c=t.y-s,f=e.x-r,y=e.y-s,R=2*Et.det(o,c,f,y),_=Et.det(c,o*o+c*c,y,f*f+y*y),D=Et.det(o,o*o+c*c,f,f*f+y*y),q=r-_/R,Z=s+D/R;return new E(q,Z)},Et.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,s=new Ht(t.x+n/2,t.y+r/2,1),o=new Ht(t.x-r+n/2,t.y+n+r/2,1);return new Ht(s,o)},Et.angleBisector=function(t,e,n){var r=e.distance(t),s=e.distance(n),o=r/(r+s),c=n.x-t.x,f=n.y-t.y,y=new E(t.x+o*c,t.y+o*f);return y},Et.area3D=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=e.z-t.z,c=n.x-t.x,f=n.y-t.y,y=n.z-t.z,R=s*y-o*f,_=o*c-r*y,D=r*f-s*c,q=R*R+_*_+D*D,Z=Math.sqrt(q)/2;return Z},Et.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,s=(t.y+e.y+n.y)/3;return new E(r,s)},Et.inCentre=function(t,e,n){var r=e.distance(n),s=t.distance(n),o=t.distance(e),c=r+s+o,f=(r*t.x+s*e.x+o*n.x)/c,y=(r*t.y+s*e.y+o*n.y)/c;return new E(f,y)},u(En.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var n=this.input.getCoordinates();return this.extremalPts=[new E(n[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),n=e;if(e[0].equals2D(e[e.length-1])&&(n=new Array(e.length-1).fill(null),j.copyDeep(e,0,n,0,e.length-1)),n.length<=2)return this.extremalPts=j.copyDeep(n),null;for(var r=En.lowestPoint(n),s=En.pointWitMinAngleWithX(n,r),o=0;o<n.length;o++){var c=En.pointWithMinAngleWithSegment(n,r,s);if(et.isObtuse(r,c,s))return this.extremalPts=[new E(r),new E(s)],null;if(et.isObtuse(c,r,s))r=c;else{if(!et.isObtuse(c,s,r))return this.extremalPts=[new E(r),new E(s),new E(c)],null;s=c}}T.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new E((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Et.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return En}}),En.pointWitMinAngleWithX=function(t,e){for(var n=p.MAX_VALUE,r=null,s=0;s<t.length;s++){var o=t[s];if(o!==e){var c=o.x-e.x,f=o.y-e.y;0>f&&(f=-f);var y=Math.sqrt(c*c+f*f),R=f/y;n>R&&(n=R,r=o)}}return r},En.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},En.pointWithMinAngleWithSegment=function(t,e,n){for(var r=p.MAX_VALUE,s=null,o=0;o<t.length;o++){var c=t[o];if(c!==e&&c!==n){var f=et.angleBetween(e,c,n);r>f&&(r=f,s=c)}}return s},u(Zt.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof mt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=p.MAX_VALUE;for(var e=1,n=new tt,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new nn(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var r=e.distancePerpendicular(t[n]),s=r,o=n,c=o;s>=r;)r=s,o=c,c=Zt.nextIndex(t,o),s=e.distancePerpendicular(t[c]);return r<this.minWidth&&(this.minPtIndex=o,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new tt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=p.MAX_VALUE,r=-p.MAX_VALUE,s=p.MAX_VALUE,o=-p.MAX_VALUE,c=0;c<this.convexHullPts.length;c++){var f=Zt.computeC(t,e,this.convexHullPts[c]);f>r&&(r=f),n>f&&(n=f);var y=Zt.computeC(-e,t,this.convexHullPts[c]);y>o&&(o=y),s>y&&(s=y)}var R=Zt.computeSegmentForLine(-t,-e,o),_=Zt.computeSegmentForLine(-t,-e,s),D=Zt.computeSegmentForLine(-e,t,r),q=Zt.computeSegmentForLine(-e,t,n),Z=D.lineIntersection(R),K=q.lineIntersection(R),Q=q.lineIntersection(_),It=D.lineIntersection(_),_t=this.inputGeom.getFactory().createLinearRing([Z,K,Q,It,Z]);return this.inputGeom.getFactory().createPolygon(_t,null)},interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Zt.computeC=function(t,e,n){return t*n.y-e*n.x},Zt.getMinimumDiameter=function(t){return new Zt(t).getDiameter()},Zt.getMinimumRectangle=function(t){return new Zt(t).getMinimumRectangle()},Zt.computeSegmentForLine=function(t,e,n){var r=null,s=null;return Math.abs(e)>Math.abs(t)?(r=new E(0,n/e),s=new E(1,n/e-t/e)):(r=new E(n/t,0),s=new E(n/t-e/t,1)),new tt(r,s)};var Al=Object.freeze({Centroid:en,CGAlgorithms:Y,ConvexHull:nn,InteriorPointArea:Me,InteriorPointLine:ys,InteriorPointPoint:xs,RobustLineIntersector:Bt,MinimumBoundingCircle:En,MinimumDiameter:Zt});u(Fn.prototype,{getResultGeometry:function(){return new oi(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.densifyPoints=function(t,e,n){for(var r=new tt,s=new A,o=0;o<t.length-1;o++){r.p0=t[o],r.p1=t[o+1],s.add(r.p0,!1);var c=r.getLength(),f=Math.trunc(c/e)+1;if(f>1)for(var y=c/f,R=1;f>R;R++){var _=R*y/c,D=r.pointAlong(_);n.makePrecise(D),s.add(D,!1)}}return s.add(t[t.length-1],!1),s.toCoordinateArray()},Fn.densify=function(t,e){var n=new Fn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S(oi,ee),u(oi.prototype,{transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof Ut?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=Fn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof rt&&r.length===1&&(r=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(r)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return oi}}),Fn.DensifyTransformer=oi;var Dl=Object.freeze({Densifier:Fn});u(an.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var r=n.oNext(),s=r.compareTo(t);if(s!==e||r===this)return n.insertAfter(t),null;n=r}while(n!==this);T.shouldNeverReachHere()},insertAfter:function(t){T.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,n=this;do e++,n=n.oNext();while(n!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),r=t.deltaX(),s=t.deltaY();if(e===r&&n===s)return 0;var o=lt.quadrant(e,n),c=lt.quadrant(r,s);return o>c?1:c>o?-1:Y.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return an}}),an.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},an.create=function(t,e){var n=new an(t),r=new an(e);return n.init(r),n},S(le,an),u(le.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return le}}),le.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},le.isMarked=function(t){return t.isMarked()},le.setMark=function(t,e){t.setMark(e)},le.markBoth=function(t){t.mark(),t.sym().mark()},le.mark=function(t){t.mark()},u(Tr.prototype,{insert:function(t,e,n){var r=this.create(t,e);n!==null?n.insert(r):this.vertexMap.put(t,r);var s=this.vertexMap.get(e);return s!==null?s.insert(r.sym()):this.vertexMap.put(e,r.sym()),r},create:function(t,e){var n=this.createEdge(t),r=this.createEdge(e);return an.init(n,r),n},createEdge:function(t){return new an(t)},addEdge:function(t,e){if(!Tr.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),r=null;if(n!==null&&(r=n.find(e)),r!==null)return r;var s=this.insert(t,e,n);return s},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return n===null?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return Tr}}),Tr.isValidEdge=function(t,e){var n=e.compareTo(t);return n!==0},S(Es,le),u(Es.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Es}}),S(Is,Tr),u(Is.prototype,{createEdge:function(t){return new Es(t)},interfaces_:function(){return[]},getClass:function(){return Is}}),u(ai.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new A,n=t;for(e.add(n.orig().copy(),!1);n.sym().degree()===2;){var r=n.next();if(r===t)break;e.add(r.orig().copy(),!1),n=r}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new A,n=t;for(this.ringStartEdge=null,le.markBoth(n),e.add(n.orig().copy(),!1);n.sym().degree()===2;){this.updateRingStartEdge(n);var r=n.next();if(r===t)return this.buildRing(this.ringStartEdge),null;e.add(r.orig().copy(),!1),n=r,le.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do le.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();le.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();le.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof $){var t=arguments[0];t.apply({interfaces_:function(){return[ge]},filter:function(y){y instanceof rt&&this.add(y)}})}else if(X(arguments[0],V))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}else if(arguments[0]instanceof rt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory());for(var o=s.getCoordinateSequence(),c=!1,n=1;n<o.size();n++){var f=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));f!==null&&(c||(f.setStart(),c=!0))}}},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.dissolve=function(t){var e=new ai;return e.add(t),e.getResult()};var Fl=Object.freeze({LineDissolver:ai});u(ke.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;4>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var n=0;4>n;n++)this.subnode[n]!==null&&(this.subnode[n].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[C]},getClass:function(){return ke}}),ke.getSubnodeIndex=function(t,e,n){var r=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r},ur.exponent=function(t){return Pl(64,t)-1023},ur.powerOf2=function(t){return Math.pow(2,t)},u(ui.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=ui.computeQuadLevel(t),this.env=new O,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=ur.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/r)*r,this.pt.y=Math.floor(n.getMinY()/r)*r,this.env.init(this.pt.x,this.pt.x+r,this.pt.y,this.pt.y+r)}},getEnvelope:function(){return this.env},getCentre:function(){return new E((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ui}}),ui.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),r=e>n?e:n,s=ur.exponent(r)+1;return s},S(In,ke),u(In.prototype,{find:function(t){var e=ke.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=ke.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,r=0,s=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,r=this.env.getMinY(),s=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),r=this.env.getMinY(),s=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,r=this.centrey,s=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),r=this.centrey,s=this.env.getMaxY()}var o=new O(e,n,r,s),c=new In(o,this.level-1);return c},insertNode:function(t){T.isTrue(this.env===null||this.env.contains(t.env));var e=ke.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return In}}),In.createNode=function(t){var e=new ui(t),n=new In(e.getEnvelope(),e.getLevel());return n},In.createExpanded=function(t,e){var n=new O(e);t!==null&&n.expandToInclude(t.env);var r=In.createNode(n);return t!==null&&r.insertNode(t),r},u(Gn.prototype,{interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.isZeroWidth=function(t,e){var n=e-t;if(n===0)return!0;var r=Math.max(Math.abs(t),Math.abs(e)),s=n/r,o=ur.exponent(s);return o<=Gn.MIN_BINARY_EXPONENT},Gn.MIN_BINARY_EXPONENT=-50,S(lr,ke),u(lr.prototype,{insert:function(t,e){var n=ke.getSubnodeIndex(t,lr.origin.x,lr.origin.y);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getEnvelope().contains(t)){var s=In.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getEnvelope().contains(e));var r=Gn.isZeroWidth(e.getMinX(),e.getMaxX()),s=Gn.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=r||s?t.find(e):t.getNode(e),o.add(n)},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.origin=new E(0,0),u(qn.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=qn.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new ds;return this.query(t,e),e.getItems()}if(arguments.length===2){var n=arguments[0],r=arguments[1];this.root.visit(n,r)}},queryAll:function(){var t=new P;return this.root.addAllItems(t),t},remove:function(t,e){var n=qn.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[rs,C]},getClass:function(){return qn}}),qn.ensureExtent=function(t,e){var n=t.getMinX(),r=t.getMaxX(),s=t.getMinY(),o=t.getMaxY();return n!==r&&s!==o?t:(n===r&&(n-=e/2,r=n+e/2),s===o&&(s-=e/2,o=s+e/2),new O(n,r,s,o))},qn.serialVersionUID=-7461163625812743e3;var Gl=Object.freeze({Quadtree:qn}),ql=Object.freeze({STRtree:St}),Bl=Object.freeze({quadtree:Gl,strtree:ql}),Vl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];u(Uo.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var n=e.type;if(!De[n])throw new Error("Unknown GeoJSON type: "+e.type);return Vl.indexOf(n)!==-1?De[n].apply(this,[e.coordinates]):n==="GeometryCollection"?De[n].apply(this,[e.geometries]):De[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!gn[e])throw new Error("Geometry is not supported");return gn[e].apply(this,[t])}});var De={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!De[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=De.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var n=[],r=0;r<e.length;++r){var s=e[r];n.push(new E(s[0],s[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new E(t[0],t[1]),new E(t[2],t[1]),new E(t[2],t[3]),new E(t[0],t[3]),new E(t[0],t[1])])},Point:function(t){var e=new E(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(De.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=De.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(De.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=De.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],s=1;s<t.length;++s){var o=t[s],c=De.coordinates.apply(this,[o]),f=this.geometryFactory.createLinearRing(c);r.push(f)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(De.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},gn={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=gn.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=gn.Point.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var s=n[r];e.push(gn.coordinate.apply(this,[s]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=gn.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=gn.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var s=t.holes[r],o=gn.LineString.apply(this,[s]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=gn.Polygon.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=r.getGeometryType();e.push(gn[s].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};u(Va.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===gt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),u(za.prototype,{write:function(t){return this.parser.write(t)}}),u(ka.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===gt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var r=0,s=t.geometries.length;s>r;r++)this.reducePrecision(t.geometries[r])}}),u(Ua.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new E(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new E(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new E(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,r=[],s=0;s<e.length;s++){var o=this.convertFromLinearRing(e[s]);s===0?n=o:r.push(o)}return this.geometryFactory.createPolygon(n,r)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(li);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(li);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(li)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(li));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(li))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var r=t.geometries[n];e.push(this.write(r))}return new ol.geom.GeometryCollection(e)}});var zl=Object.freeze({GeoJSONReader:Va,GeoJSONWriter:za,OL3Parser:Ua,WKTReader:ka,WKTWriter:Wt});u(hi.prototype,{rescale:function(){if(X(arguments[0],V))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var r=arguments[0];r.length===2&&(new E(r[0]),new E(r[1]));for(var e=0;e<r.length;e++)r[e].x=r[e].x/this.scaleFactor+this.offsetX,r[e].y=r[e].y/this.scaleFactor+this.offsetY;r.length===2&&r[0].equals2D(r[1])&&pt.out.println(r)}},scale:function(){if(X(arguments[0],V)){for(var t=arguments[0],e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Be(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var s=arguments[0],o=new Array(s.length).fill(null),n=0;n<s.length;n++)o[n]=new E(Math.round((s[n].x-this.offsetX)*this.scaleFactor),Math.round((s[n].y-this.offsetY)*this.scaleFactor),s[n].z);var c=j.removeRepeatedPoints(o);return c}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Qr]},getClass:function(){return hi}});var kl=Object.freeze({MCIndexNoder:Mn,ScaledNoder:hi,SegmentString:Jr});u(ci.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new Kt,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n),s=r.getCoordinate();if(e.contains(s))return this.nonSimpleLocation=s,!1;e.add(s)}return!0},isSimplePolygonal:function(t){for(var e=$t.getLines(t),n=e.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new Dt,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),s=(r.getMaximumSegmentIndex(),r.isClosed()),o=r.getCoordinate(0);this.addEndpoint(e,o,s);var c=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,c,s)}for(var n=e.values().iterator();n.hasNext();){var f=n.next();if(f.isClosed&&f.degree!==2)return this.nonSimpleLocation=f.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new ue(0,t),n=new Bt,r=e.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e):!0},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next();if(!o.isEndPoint(r))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var r=t.get(e);r===null&&(r=new Ns(e),t.put(e,r)),r.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,t.isEmpty()?!0:t instanceof rt?this.isSimpleLinearGeometry(t):t instanceof ie?this.isSimpleLinearGeometry(t):t instanceof se?this.isSimpleMultiPoint(t):X(t,Qe)?this.isSimplePolygonal(t):t instanceof at?this.isSimpleGeometryCollection(t):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return ci}}),u(Ns.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ns}}),ci.EndpointInfo=Ns,u(ht.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=ht.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=ht.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==ht.JOIN_ROUND&&(this.quadrantSegments=ht.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return ht}}),ht.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},ht.CAP_ROUND=1,ht.CAP_FLAT=2,ht.CAP_SQUARE=3,ht.JOIN_ROUND=1,ht.JOIN_MITRE=2,ht.JOIN_BEVEL=3,ht.DEFAULT_QUADRANT_SEGMENTS=8,ht.DEFAULT_MITRE_LIMIT=5,ht.DEFAULT_SIMPLIFY_FACTOR=.01,u(Xo.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();T.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=Y.computeOrientation(this.minCoord,n,e),s=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===Y.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===Y.CLOCKWISE)&&(s=!0),s&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(0>e||e+1>=r.length||r[e].y===r[e+1].y)return-1;var s=U.LEFT;return r[e].y<r[e+1].y&&(s=U.RIGHT),s},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(this.minCoord===null||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}T.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===U.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Xo}}),Cs.prototype.addLast=function(t){this.array_.push(t)},Cs.prototype.removeFirst=function(){return this.array_.shift()},Cs.prototype.isEmpty=function(){return this.array_.length===0},u(Yo.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(e===null)throw new oe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(U.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(U.RIGHT)>=1&&e.getDepth(U.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new kt,n=new Cs,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var s=n.removeFirst();e.add(s),this.computeNodeDepth(s);for(var o=s.getEdges().iterator();o.hasNext();){var c=o.next(),f=c.getSym();if(!f.isVisited()){var y=f.getNode();e.contains(y)||(n.addLast(y),e.add(y))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new O,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),s=0;s<r.length-1;s++)t.expandToInclude(r[s]);this.env=t}return this.env},addReachable:function(t){var e=new jt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(U.LEFT,t.getDepth(U.RIGHT)),e.setDepth(U.RIGHT,t.getDepth(U.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var s=r.getSym(),o=s.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[v]},getClass:function(){return Yo}}),u(Xt.prototype,{isDeletable:function(t,e,n,r){var s=this.inputLine[t],o=this.inputLine[e],c=this.inputLine[n];return this.isConcave(s,o,c)&&this.isShallow(s,o,c,r)?this.isShallowSampled(s,o,t,n,r):!1},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var s=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Xt.DELETE,s=!0,r=!0),t=s?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},isShallowConcavity:function(t,e,n,r){var s=Y.computeOrientation(t,e,n),o=s===this.angleOrientation;if(!o)return!1;var c=Y.distancePointLine(e,t,n);return r>c},isShallowSampled:function(t,e,n,r,s){var o=Math.trunc((r-n)/Xt.NUM_PTS_TO_CHECK);0>=o&&(o=1);for(var c=n;r>c;c+=o)if(!this.isShallow(t,e,this.inputLine[c],s))return!1;return!0},isConcave:function(e,n,r){var s=Y.computeOrientation(e,n,r),o=s===this.angleOrientation;return o},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=Y.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Xt.DELETE;)e++;return e},isShallow:function(t,e,n,r){var s=Y.distancePointLine(e,t,n);return r>s},collapseLine:function(){for(var t=new A,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Xt.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.simplify=function(t,e){var n=new Xt(t);return n.simplify(e)},Xt.INIT=0,Xt.DELETE=1,Xt.KEEP=1,Xt.NUM_PTS_TO_CHECK=10,u(gi.prototype,{getCoordinates:function(){var t=this.ptList.toArray(gi.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new E(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new st,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new E(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),u(Ue.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Y.computeOrientation(this.s0,this.s1,this.s2),r=n===Y.CLOCKWISE&&this.side===U.LEFT||n===Y.COUNTERCLOCKWISE&&this.side===U.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new tt(t,e),r=new tt;this.computeOffsetSegment(n,U.LEFT,this.distance,r);var s=new tt;this.computeOffsetSegment(n,U.RIGHT,this.distance,s);var o=e.x-t.x,c=e.y-t.y,f=Math.atan2(c,o);switch(this.bufParams.getEndCapStyle()){case ht.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(e,f+Math.PI/2,f-Math.PI/2,Y.CLOCKWISE,this.distance),this.segList.addPt(s.p1);break;case ht.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(s.p1);break;case ht.CAP_SQUARE:var y=new E;y.x=Math.abs(this.distance)*Math.cos(f),y.y=Math.abs(this.distance)*Math.sin(f);var R=new E(r.p1.x+y.x,r.p1.y+y.y),_=new E(s.p1.x+y.x,s.p1.y+y.y);this.segList.addPt(R),this.segList.addPt(_)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,r){var s=!0,o=null;try{o=Ht.intersection(e.p0,e.p1,n.p0,n.p1);var c=0>=r?1:o.distance(t)/Math.abs(r);c>this.bufParams.getMitreLimit()&&(s=!1)}catch(f){if(!(f instanceof G))throw f;o=new E(0,0),s=!1}finally{}s?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,r,s){var o=e.x-t.x,c=e.y-t.y,f=Math.atan2(c,o),y=n.x-t.x,R=n.y-t.y,_=Math.atan2(R,y);r===Y.CLOCKWISE?_>=f&&(f+=2*Math.PI):f>=_&&(f-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,f,_,r,s),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Ue.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===ht.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===ht.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new E(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new E(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new E(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new E(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,r){var s=this.seg0.p1,o=et.angle(s,this.seg0.p0),c=(et.angle(s,this.seg1.p1),et.angleBetweenOriented(this.seg0.p0,s,this.seg1.p1)),f=c/2,y=et.normalize(o+f),R=et.normalize(y+Math.PI),_=r*n,D=_*Math.abs(Math.sin(f)),q=n-D,Z=s.x+_*Math.cos(R),K=s.y+_*Math.sin(R),Q=new E(Z,K),It=new tt(s,Q),_t=It.pointAlongOffset(1,q),Fe=It.pointAlongOffset(1,-q);this.side===U.LEFT?(this.segList.addPt(_t),this.segList.addPt(Fe)):(this.segList.addPt(Fe),this.segList.addPt(_t))},computeOffsetSegment:function(t,e,n,r){var s=e===U.LEFT?1:-1,o=t.p1.x-t.p0.x,c=t.p1.y-t.p0.y,f=Math.sqrt(o*o+c*c),y=s*n*o/f,R=s*n*c/f;r.p0.x=t.p0.x-R,r.p0.y=t.p0.y+y,r.p1.x=t.p1.x-R,r.p1.y=t.p1.y+y},addFilletArc:function(t,e,n,r,s){var o=r===Y.CLOCKWISE?-1:1,c=Math.abs(e-n),f=Math.trunc(c/this.filletAngleQuantum+.5);if(1>f)return null;var y=null,R=null;y=0,R=c/f;for(var _=y,D=new E;c>_;){var q=e+o*_;D.x=t.x+s*Math.cos(q),D.y=t.y+s*Math.sin(q),this.segList.addPt(D),_+=R}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new E((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new E((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new E(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new gi,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===ht.JOIN_BEVEL||this.bufParams.getJoinStyle()===ht.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Y.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ue.MAX_CLOSING_SEG_LEN_FACTOR=80,u(fi.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var n=0>e,r=Math.abs(e),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);var o=s.getCoordinates();return n&&j.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var s=Xt.simplify(t,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],U.LEFT),n.addFirstSegment();for(var c=o-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{n.addSegments(t,!1);var f=Xt.simplify(t,r),y=f.length-1;n.initSideSegments(f[0],f[1],U.LEFT),n.addFirstSegment();for(var c=2;y>=c;c++)n.addNextSegment(f[c],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);e===U.RIGHT&&(r=-r);var s=Xt.simplify(t,r),o=s.length-1;n.initSideSegments(s[o-1],s[0],e);for(var c=1;o>=c;c++){var f=c!==1;n.addNextSegment(s[c],f)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),r=Xt.simplify(t,n),s=r.length-1;e.initSideSegments(r[0],r[1],U.LEFT);for(var o=2;s>=o;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[s-1],r[s]);var c=Xt.simplify(t,-n),f=c.length-1;e.initSideSegments(c[f],c[f-1],U.LEFT);for(var o=f-2;o>=0;o--)e.addNextSegment(c[o],!0);e.addLastSegment(),e.addLineEndCap(c[1],c[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case ht.CAP_ROUND:e.createCircle(t);break;case ht.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var s=0>e;this.computeSingleSidedBufferCurve(t,s,r)}else this.computeLineBufferCurve(t,r);var o=r.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return fi.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},computeOffsetCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){var s=Xt.simplify(t,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],U.LEFT),n.addFirstSegment();for(var c=o-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{var f=Xt.simplify(t,r),y=f.length-1;n.initSideSegments(f[0],f[1],U.LEFT),n.addFirstSegment();for(var c=2;y>=c;c++)n.addNextSegment(f[c],!0)}n.addLastSegment()},getSegGen:function(t){return new Ue(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new E(t[n]);return e},u(ws.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new P,n=this.subgraphs.iterator();n.hasNext();){var r=n.next(),s=r.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(arguments.length===3){if(X(arguments[2],N)&&arguments[0]instanceof E&&arguments[1]instanceof ir)for(var o=arguments[0],c=arguments[1],f=arguments[2],y=c.getEdge().getCoordinates(),n=0;n<y.length-1;n++){this.seg.p0=y[n],this.seg.p1=y[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var R=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(R<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||Y.computeOrientation(this.seg.p0,this.seg.p1,o)===Y.RIGHT)){var _=c.getDepth(U.LEFT);this.seg.p0.equals(y[n])||(_=c.getDepth(U.RIGHT));var D=new Ss(this.seg,_);f.add(D)}}else if(X(arguments[2],N)&&arguments[0]instanceof E&&X(arguments[1],N))for(var q=arguments[0],Z=arguments[1],K=arguments[2],n=Z.iterator();n.hasNext();){var Q=n.next();Q.isForward()&&this.findStabbedSegments(q,Q,K)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=We.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return ws}}),u(Ss.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return n!==0?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),n!==0?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[v]},getClass:function(){return Ss}}),ws.DepthSegment=Ss,u(Ho.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,m.EXTERIOR,m.INTERIOR)},addPolygon:function(t){var e=this.distance,n=U.LEFT;this.distance<0&&(e=-this.distance,n=U.RIGHT);var r=t.getExteriorRing(),s=j.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance)||this.distance<=0&&s.length<3)return null;this.addPolygonRing(s,e,n,m.EXTERIOR,m.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var c=t.getInteriorRingN(o),f=j.removeRepeatedPoints(c.getCoordinates());this.distance>0&&this.isErodedCompletely(c,-this.distance)||this.addPolygonRing(f,e,U.opposite(n),m.INTERIOR,m.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Et(t[0],t[1],t[2]),r=n.inCentre(),s=Y.distancePointLine(r,n.p0,n.p1);return s<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=j.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,m.EXTERIOR,m.INTERIOR)},addCurve:function(t,e,n){if(t===null||t.length<2)return null;var r=new Be(t,new Ot(0,m.BOUNDARY,e,n));this.curveList.add(r)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,r,s){if(e===0&&t.length<Tt.MINIMUM_VALID_SIZE)return null;var o=r,c=s;t.length>=Tt.MINIMUM_VALID_SIZE&&Y.isCCW(t)&&(o=s,c=r,n=U.opposite(n));var f=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(f,o,c)},add:function(t){if(t.isEmpty())return null;if(t instanceof mt)this.addPolygon(t);else if(t instanceof rt)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof ie)this.addCollection(t);else if(t instanceof Ut)this.addCollection(t);else{if(!(t instanceof at))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),s=Math.min(r.getHeight(),r.getWidth());return 0>e&&2*Math.abs(e)>s},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Ho}}),u(di.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(di.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.size()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];this.li.computeIntersection(s,o,c,f),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[ei]},getClass:function(){return di}}),di.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},u(Bn.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ot(t.getLabel()),r.flip()),n.merge(r);var s=Bn.depthDelta(r),o=e.getDepthDelta(),c=o+s;e.setDepthDelta(c)}else this.edgeList.add(t),t.setDepthDelta(Bn.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new P,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getRightmostCoordinate(),c=new ws(n),f=c.getDepth(o);s.computeDepth(f),s.findResultEdges(),n.add(s),e.add(s.getDirectedEdges(),s.getNodes())}},createSubgraphs:function(t){for(var e=new P,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new Yo;s.create(r),e.add(s)}}return We.sort(e,We.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new Mn,n=new Bt;return n.setPrecisionModel(t),e.setSegmentIntersector(new di(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new fi(n,this.bufParams),s=new Ho(t,e,r),o=s.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new ze(new Lr),this.graph.addEdges(this.edgeList.getEdges());var c=this.createSubgraphs(this.graph),f=new as(this.geomFact);this.buildSubgraphs(c,f);var y=f.getPolygons();if(y.size()<=0)return this.createEmptyResultGeometry();var R=this.geomFact.buildGeometry(y);return R},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings(),s=r.iterator();s.hasNext();){var o=s.next(),c=o.getCoordinates();if(c.length!==2||!c[0].equals2D(c[1])){var f=o.getData(),y=new Ne(o.getCoordinates(),new Ot(f));this.insertUniqueEdge(y)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.depthDelta=function(t){var e=t.getLocation(0,U.LEFT),n=t.getLocation(0,U.RIGHT);return e===m.INTERIOR&&n===m.EXTERIOR?1:e===m.EXTERIOR&&n===m.INTERIOR?-1:0},Bn.convertSegStrings=function(t){for(var e=new st,n=new P;t.hasNext();){var r=t.next(),s=e.createLineString(r.getCoordinates());n.add(s)}return e.buildGeometry(n)},u(pi.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(arguments.length===2){for(var r=arguments[0],s=arguments[1],t=s.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(r))throw new w("found endpt/interior pt intersection at index "+o+" :pt "+r)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(arguments.length===2)for(var s=arguments[0],o=arguments[1],c=s.getCoordinates(),f=o.getCoordinates(),y=0;y<c.length-1;y++)for(var R=0;R<f.length-1;R++)this.checkInteriorIntersections(s,y,o,R);else if(arguments.length===4){var _=arguments[0],D=arguments[1],q=arguments[2],Z=arguments[3];if(_===q&&D===Z)return null;var K=_.getCoordinates()[D],Q=_.getCoordinates()[D+1],It=q.getCoordinates()[Z],_t=q.getCoordinates()[Z+1];if(this.li.computeIntersection(K,Q,It,_t),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,K,Q)||this.hasInteriorIntersection(this.li,It,_t)))throw new w("found non-noded intersection at "+K+"-"+Q+" and "+It+"-"+_t)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0],r=n.getCoordinates(),t=0;t<r.length-2;t++)this.checkCollapse(r[t],r[t+1],r[t+2])},hasInteriorIntersection:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var s=t.getIntersection(r);if(!s.equals(e)&&!s.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new w("found non-noded collapse at "+pi.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return pi}}),pi.fact=new st,u(Pr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),s=Math.min(t.y,e.y),o=Math.max(t.y,e.y),c=this.maxx<n||this.minx>r||this.maxy<s||this.miny>o;if(c)return!1;var f=this.intersectsToleranceSquare(t,e);return T.isTrue(!(c&&f),"Found bad envelope test"),f},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new E(this.maxx,this.maxy),this.corner[1]=new E(this.minx,this.maxy),this.corner[2]=new E(this.minx,this.miny),this.corner[3]=new E(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=Pr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new O(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&r||t.equals(this.pt)?!0:!!e.equals(this.pt))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return this.intersects(n,r)?(t.addIntersection(this.getCoordinate(),e),!0):!1},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.SAFE_ENV_EXPANSION_FACTOR=.75,u(Vn.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return Vn}}),u(Ls.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],s=e.getSafeEnvelope(),o=new mi(e,n,r);return this.index.query(s,{interfaces_:function(){return[On]},visitItem:function(c){var f=c;f.select(s,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Ls}}),S(mi,Vn),u(mi.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return Vn.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return this.parentEdge!==null&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return mi}}),Ls.HotPixelSnapAction=mi,u(Wo.prototype,{processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];if(this.li.computeIntersection(s,o,c,f),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var y=0;y<this.li.getIntersectionNum();y++)this.interiorIntersections.add(this.li.getIntersection(y));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[ei]},getClass:function(){return Wo}}),u($o.prototype,{checkCorrectness:function(t){var e=Be.getNodedSubstrings(t),n=new pi(e);try{n.checkValid()}catch(r){if(!(r instanceof B))throw r;r.printStackTrace()}finally{}},getNodedSubstrings:function(){return Be.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new Wo(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(X(arguments[0],V))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Be)for(var r=arguments[0],s=r.getCoordinates(),o=0;o<s.length;o++){var c=new Pr(s[o],this.scaleFactor,this.li),f=this.pointSnapper.snap(c,r,o);f&&r.addIntersection(s[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Mn,this.pointSnapper=new Ls(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Pr(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},interfaces_:function(){return[Qr]},getClass:function(){return $o}}),u(Yt.prototype,{bufferFixedPrecision:function(t){var e=new hi(new $o(new gt(1)),t.getScale()),n=new Bn(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=Yt.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(s){if(!(s instanceof oe))throw s;this.saveException=s}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],n=Yt.precisionScaleFactor(this.argGeom,this.distance,e),r=new gt(n);this.bufferFixedPrecision(r)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===gt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Bn(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof w))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Yt(t),r=n.getResultGeometry(e);return r}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof $&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1],c=arguments[2],f=new Yt(s);f.setQuadrantSegments(c);var r=f.getResultGeometry(o);return r}if(arguments[2]instanceof ht&&arguments[0]instanceof $&&typeof arguments[1]=="number"){var y=arguments[0],R=arguments[1],_=arguments[2],f=new Yt(y,_),r=f.getResultGeometry(R);return r}}else if(arguments.length===4){var D=arguments[0],q=arguments[1],Z=arguments[2],K=arguments[3],f=new Yt(D);f.setQuadrantSegments(Z),f.setEndCapStyle(K);var r=f.getResultGeometry(q);return r}},Yt.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),s=nt.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=e>0?e:0,c=s+2*o,f=Math.trunc(Math.log(c)/Math.log(10)+1),y=n-f,R=Math.pow(10,y);return R},Yt.CAP_ROUND=ht.CAP_ROUND,Yt.CAP_BUTT=ht.CAP_FLAT,Yt.CAP_FLAT=ht.CAP_FLAT,Yt.CAP_SQUARE=ht.CAP_SQUARE,Yt.MAX_PRECISION_DIGITS=12;var Ul=Object.freeze({BufferOp:Yt,BufferParameters:ht});u(hr.prototype,{filter:function(t){t instanceof mt&&this.comps.add(t)},interfaces_:function(){return[je]},getClass:function(){return hr}}),hr.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return hr.getPolygons(t,new P)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof mt?n.add(e):e instanceof at&&e.apply(new hr(n)),n}},u(he.prototype,{isInsideArea:function(){return this.segIndex===he.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return he}}),he.INSIDE_AREA=-1,u(cr.prototype,{filter:function(t){t instanceof wt&&this.pts.add(t)},interfaces_:function(){return[je]},getClass:function(){return cr}}),cr.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof wt?We.singletonList(t):cr.getPoints(t,new P)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof wt?n.add(e):e instanceof at&&e.apply(new cr(n)),n}},u(vi.prototype,{filter:function(t){(t instanceof wt||t instanceof rt||t instanceof mt)&&this.locations.add(new he(t,0,t.getCoordinate()))},interfaces_:function(){return[je]},getClass:function(){return vi}}),vi.getLocations=function(t){var e=new P;return t.apply(new vi(e)),e},u(_e.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=1-e,s=hr.getPolygons(this.geom[e]);if(s.size()>0){var o=vi.getLocations(this.geom[r]);if(this.computeContainmentDistance(o,s,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[r]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&X(arguments[0],N)&&X(arguments[1],N)){for(var c=arguments[0],f=arguments[1],y=arguments[2],R=0;R<c.size();R++)for(var _=c.get(R),D=0;D<f.size();D++)if(this.computeContainmentDistance(_,f.get(D),y),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof he&&arguments[1]instanceof mt){var q=arguments[0],Z=arguments[1],K=arguments[2],Q=q.getCoordinate();if(m.EXTERIOR!==this.ptLocator.locate(Q,Z))return this.minDistance=0,K[0]=q,K[1]=new he(Z,Q),null}}},computeMinDistanceLinesPoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var c=e.get(o);if(this.computeMinDistance(s,c,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=$t.getLines(this.geom[0]),n=$t.getLines(this.geom[1]),r=cr.getPoints(this.geom[0]),s=cr.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,s,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,s,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof rt&&arguments[1]instanceof wt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var r=t.getCoordinates(),s=e.getCoordinate(),o=0;o<r.length-1;o++){var c=Y.distancePointLine(s,r[o],r[o+1]);if(c<this.minDistance){this.minDistance=c;var f=new tt(r[o],r[o+1]),y=f.closestPoint(s);n[0]=new he(t,o,y),n[1]=new he(e,0,s)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof rt&&arguments[1]instanceof rt){var R=arguments[0],_=arguments[1],D=arguments[2];if(R.getEnvelopeInternal().distance(_.getEnvelopeInternal())>this.minDistance)return null;for(var r=R.getCoordinates(),q=_.getCoordinates(),o=0;o<r.length-1;o++)for(var Z=0;Z<q.length-1;Z++){var c=Y.distanceLineLine(r[o],r[o+1],q[Z],q[Z+1]);if(c<this.minDistance){this.minDistance=c;var K=new tt(r[o],r[o+1]),Q=new tt(q[Z],q[Z+1]),It=K.closestPoints(Q);D[0]=new he(R,o,It[0]),D[1]=new he(_,Z,It[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var c=e.get(o),f=s.getCoordinate().distance(c.getCoordinate());if(f<this.minDistance&&(this.minDistance=f,n[0]=new he(s,0,s.getCoordinate()),n[1]=new he(c,0,c.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new d;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var c=e.get(o);if(this.computeMinDistance(s,c,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.distance=function(t,e){var n=new _e(t,e);return n.distance()},_e.isWithinDistance=function(t,e,n){var r=new _e(t,e,n);return r.distance()<=n},_e.nearestPoints=function(t,e){var n=new _e(t,e);return n.nearestPoints()};var Xl=Object.freeze({DistanceOp:_e});u(Zo.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,n=new A,r=this.directedEdges.iterator();r.hasNext();){var s=r.next();s.getEdgeDirection()?t++:e++,n.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&j.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return Zo}}),u(we.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return we}}),we.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},we.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},we.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},S(ye,we),u(ye.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Y.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[v]},getClass:function(){return ye}}),ye.toEdges=function(t){for(var e=new P,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},S(yi,ye),u(yi.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(T.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return yi}}),S(Xe,we),u(Xe.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof un){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Xe}}),u(Jo.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(We.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Xe){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof ye){var r=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===r)return e}return-1}if(Number.isInteger(arguments[0])){var s=arguments[0],o=s%this.outEdges.size();return 0>o&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Jo}}),S(un,we),u(un.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return un}}),un.getEdgesBetween=function(t,e){var n=ye.toEdges(t.getOutEdges().getEdges()),r=new kt(n),s=ye.toEdges(e.getOutEdges().getEdges());return r.retainAll(s),r},S(Rs,Xe),u(Rs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Rs}}),u(Ko.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Ko}}),u(Or.prototype,{findNodesOfDegree:function(t){for(var e=new P,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===t&&e.add(r)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Xe){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof ye){var e=arguments[0],n=e.getSym();n!==null&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof un){for(var r=arguments[0],s=r.getOutEdges().getEdges(),o=s.iterator();o.hasNext();){var c=o.next(),n=c.getSym();n!==null&&this.remove(n),this.dirEdges.remove(c);var f=c.getEdge();f!==null&&this.edges.remove(f)}this.nodeMap.remove(r.getCoordinate()),r.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Xe){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof ye){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof un){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Xe){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof ye){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Or}}),S(Ts,Or),u(Ts.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),o=this.getNode(r),c=new yi(s,o,e[1],!0),f=new yi(o,s,e[e.length-2],!1),y=new Rs(t);y.setDirectedEdges(c,f),this.add(y)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new un(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return Ts}}),u(jo.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(T.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(this.mergedLineStrings!==null)return null;we.setMarked(this.graph.nodeIterator(),!1),we.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new P,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new P;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new Zo(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(n!==null&&n!==t);return e},add:function(){if(arguments[0]instanceof $){var t=arguments[0];t.apply({interfaces_:function(){return[ge]},filter:function(o){o instanceof rt&&this.add(o)}})}else if(X(arguments[0],V)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}}else if(arguments[0]instanceof rt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory()),this.graph.addEdge(s)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return jo}});var Yl=Object.freeze({LineMerger:jo}),Hl=Object.freeze({OverlayOp:J});S(xi,ye),u(xi.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return xi}}),S(Ps,Xe),u(Ps.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Ps}}),u(be.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new A,e=this.deList.iterator();e.hasNext();){var n=e.next(),r=n.getEdge();be.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Tt){var t=arguments[0];this.holes===null&&(this.holes=new P),this.holes.add(t)}else if(arguments[0]instanceof be){var e=arguments[0];e.setShell(this);var n=e.getRing();this.holes===null&&(this.holes=new P),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=Y.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Wt.toLineString(new pe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&pt.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof B))throw t;pt.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(n!==null&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return be}}),be.findDirEdgesInRing=function(t){var e=t,n=new P;do n.add(e),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},be.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)},be.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,c=null,f=e.iterator();f.hasNext();){var y=f.next(),R=y.getRing(),_=R.getEnvelopeInternal();if(!_.equals(r)&&_.contains(r)){s=j.ptNotInList(n.getCoordinates(),R.getCoordinates());var D=!1;Y.isPointInRing(s,R.getCoordinates())&&(D=!0),D&&(o===null||c.contains(_))&&(o=y,c=o.getRing().getEnvelopeInternal())}}return o},u(Qo.prototype,{compare:function(t,e){var n=t,r=e;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())},interfaces_:function(){return[x]},getClass:function(){return Qo}}),be.EnvelopeComparator=Qo,S(Ft,Or),u(Ft.prototype,{findEdgeRing:function(t){var e=new be(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Ft.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),o=this.getNode(r),c=new xi(s,o,e[1],!0),f=new xi(o,s,e[e.length-2],!1),y=new Ps(t);y.setDirectedEdges(c,f),this.add(y)},deleteCutEdges:function(){this.computeNextCWEdges(),Ft.findLabeledEdgeRings(this.dirEdges);for(var t=new P,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);var s=n.getEdge();t.add(s.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Ft.label(this.dirEdges,-1);var t=Ft.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new P,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var s=this.findEdgeRing(r);e.add(s)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new un(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),s=Ft.findIntersectionNodes(n,r);if(s!==null)for(var o=s.iterator();o.hasNext();){var c=o.next();Ft.computeNextCCWEdges(c,r)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new kt,n=new jt,r=t.iterator();r.hasNext();)n.push(r.next());for(;!n.isEmpty();){var s=n.pop();Ft.deleteAllEdges(s);for(var o=s.getOutEdges().getEdges(),r=o.iterator();r.hasNext();){var c=r.next();c.setMarked(!0);var f=c.getSym();f!==null&&f.setMarked(!0);var y=c.getEdge();e.add(y.getLine());var R=c.getToNode();Ft.getDegreeNonDeleted(R)===1&&n.push(R)}}return e},interfaces_:function(){return[]},getClass:function(){return Ft}}),Ft.findLabeledEdgeRings=function(t){for(var e=new P,n=1,r=t.iterator();r.hasNext();){var s=r.next();if(!(s.isMarked()||s.getLabel()>=0)){e.add(s);var o=be.findDirEdgesInRing(s);Ft.label(o,n),n++}}return e},Ft.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,r=e.iterator();r.hasNext();){var s=r.next();s.isMarked()||n++}return n},Ft.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var s=r.getSym();s!==null&&s.setMarked(!0)}},Ft.label=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.setLabel(e)}},Ft.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,r=null,s=e.getEdges().iterator();s.hasNext();){var o=s.next();if(!o.isMarked()){if(n===null&&(n=o),r!==null){var c=r.getSym();c.setNext(o)}r=o}}if(r!==null){var c=r.getSym();c.setNext(n)}},Ft.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),r=null,s=null,o=n.getEdges(),c=o.size()-1;c>=0;c--){var f=o.get(c),y=f.getSym(),R=null;f.getLabel()===e&&(R=f);var _=null;y.getLabel()===e&&(_=y),R===null&&_===null||(_!==null&&(s=_),R!==null&&(s!==null&&(s.setNext(R),s=null),r===null&&(r=R)))}s!==null&&(T.isTrue(r!==null),s.setNext(r))},Ft.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),r=0,s=n.iterator();s.hasNext();){var o=s.next();o.getLabel()===e&&r++}return r},Ft.findIntersectionNodes=function(t,e){var n=t,r=null;do{var s=n.getFromNode();Ft.getDegree(s,e)>1&&(r===null&&(r=new P),r.add(s)),n=n.getNext(),T.isTrue(n!==null,"found null DE in ring"),T.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return r},u(ce.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new st),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(st.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isValid()?e.add(s):n.add(s.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new P,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new P;this.invalidRingLines=new P,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),ce.assignHolesToShells(this.holeList,this.shellList),We.sort(this.shellList,new be.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(ce.findDisjointShells(this.shellList),n=!1),this.polyList=ce.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(X(arguments[0],V))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof rt){var r=arguments[0];this.geomFactory=r.getFactory(),this.graph===null&&(this.graph=new Ft(this.geomFactory)),this.graph.addEdge(r)}else if(arguments[0]instanceof $){var s=arguments[0];s.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new P,this.shellList=new P;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return ce}}),ce.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getOuterHole();r===null||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}},ce.extractPolygons=function(t,e){for(var n=new P,r=t.iterator();r.hasNext();){var s=r.next();(e||s.isIncluded())&&n.add(s.getPolygon())}return n},ce.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();ce.assignHoleToShell(r,e)}},ce.assignHoleToShell=function(t,e){var n=be.findEdgeRingContaining(t,e);n!==null&&n.addHole(t)},ce.findDisjointShells=function(t){ce.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(e=!0))}}while(e)},u(Os.prototype,{filter:function(t){t instanceof rt&&this.p.add(t)},interfaces_:function(){return[ge]},getClass:function(){return Os}}),ce.LineStringAdder=Os;var Wl=Object.freeze({Polygonizer:ce});u(Ms.prototype,{createEdgeEndForNext:function(t,e,n,r){var s=n.segmentIndex+1;if(s>=t.getNumPoints()&&r===null)return null;var o=t.getCoordinate(s);r!==null&&r.segmentIndex===n.segmentIndex&&(o=r.coord);var c=new Ve(t,n.coord,o,new Ot(t.getLabel()));e.add(c)},createEdgeEndForPrev:function(t,e,n,r){var s=n.segmentIndex;if(n.dist===0){if(s===0)return null;s--}var o=t.getCoordinate(s);r!==null&&r.segmentIndex>=s&&(o=r.coord);var c=new Ot(t.getLabel());c.flip();var f=new Ve(t,n.coord,o,c);e.add(f)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new P,n=t;n.hasNext();){var r=n.next();this.computeEdgeEnds(r,e)}return e}if(arguments.length===2){var s=arguments[0],o=arguments[1],c=s.getEdgeIntersectionList();c.addEndpoints();var f=c.iterator(),y=null,R=null;if(!f.hasNext())return null;var _=f.next();do y=R,R=_,_=null,f.hasNext()&&(_=f.next()),R!==null&&(this.createEdgeEndForPrev(s,o,R,y),this.createEdgeEndForNext(s,o,R,_));while(R!==null)}},interfaces_:function(){return[]},getClass:function(){return Ms}}),S(Ei,Ve),u(Ei.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,r=!1,s=this.iterator();s.hasNext();){var o=s.next(),c=o.getLabel().getLocation(t);c===m.BOUNDARY&&n++,c===m.INTERIOR&&(r=!0)}var c=m.NONE;r&&(c=m.INTERIOR),n>0&&(c=ue.determineBoundary(e,n)),this.label.setLocation(t,c)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var s=r.getLabel().getLocation(t,e);if(s===m.INTERIOR)return this.label.setLocation(t,e,m.INTERIOR),null;s===m.EXTERIOR&&this.label.setLocation(t,e,m.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,U.LEFT),this.computeLabelSide(t,U.RIGHT)},updateIM:function(t){Ne.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(e=!0)}e?this.label=new Ot(m.NONE,m.NONE,m.NONE):this.label=new Ot(m.NONE);for(var s=0;2>s;s++)this.computeLabelOn(s,t),e&&this.computeLabelSides(s)},interfaces_:function(){return[]},getClass:function(){return Ei}}),S(_s,or),u(_s.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new Ei(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return _s}}),S(bs,sn),u(bs.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return bs}}),S(Ii,sr),u(Ii.prototype,{createNode:function(t){return new bs(t,new _s)},interfaces_:function(){return[]},getClass:function(){return Ii}}),u(As.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();n===2&&r===2?s&&e.setAtLeast("212101212"):n===2&&r===1?(s&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):n===1&&r===2?(s&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):n===1&&r===1&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var r=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,m.EXTERIOR)},computeIM:function(){var t=new ft;if(t.set(m.EXTERIOR,m.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Ms,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var s=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),c=this.nodes.find(o.coord);c.getLabel().isNull(t)&&(r===m.BOUNDARY?c.setLabelBoundary(t):c.setLabel(t,m.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),c=this.nodes.addNode(o.coord);r===m.BOUNDARY?c.setLabelBoundary(t):c.getLabel().isNull(t)&&c.setLabel(t,m.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();T.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var r=this.nodes.iterator();r.hasNext();){var s=r.next();s.updateIM(t),s.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(m.INTERIOR,m.EXTERIOR,e.getDimension()),t.set(m.BOUNDARY,m.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(m.EXTERIOR,m.INTERIOR,n.getDimension()),t.set(m.EXTERIOR,m.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return As}}),u(Ni.prototype,{isContainedInBoundary:function(t){if(t instanceof mt)return!1;if(t instanceof wt)return this.isPointContainedInBoundary(t);if(t instanceof rt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new E,r=new E,s=0;s<e.size()-1;s++)if(e.getCoordinate(s,n),e.getCoordinate(s+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof E){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return this.rectEnv.contains(t.getEnvelopeInternal())?!this.isContainedInBoundary(t):!1},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ni.contains=function(t,e){var n=new Ni(t);return n.contains(e)},u(ta.prototype,{intersects:function(t,e){var n=new O(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var r=t;t=e,e=r}var s=!1;return e.y>t.y&&(s=!0),s?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return ta}}),u(zn.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof at)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return zn}}),u(Mr.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Ds(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Fs(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new Gs(this.rectangle);return r.applyTo(t),!!r.intersects()},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.intersects=function(t,e){var n=new Mr(t);return n.intersects(e)},S(Ds,zn),u(Ds.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ds}}),S(Fs,zn),u(Fs.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof mt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new E,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&ve.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Fs}}),S(Gs,zn),u(Gs.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=$t.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Gs}}),S(ct,An),u(ct.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return ct}}),ct.covers=function(t,e){return t.getEnvelopeInternal().covers(e.getEnvelopeInternal())?t.isRectangle()?!0:ct.relate(t,e).isCovers():!1},ct.intersects=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?t.isRectangle()?Mr.intersects(t,e):e.isRectangle()?Mr.intersects(e,t):ct.relate(t,e).isIntersects():!1},ct.touches=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?ct.relate(t,e).isTouches(t.getDimension(),e.getDimension()):!1},ct.within=function(t,e){return e.contains(t)},ct.coveredBy=function(t,e){return ct.covers(e,t)},ct.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new ct(t,e),r=n.getIntersectionMatrix();return r}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof $&&arguments[1]instanceof $){var s=arguments[0],o=arguments[1],c=arguments[2];return ct.relateWithCheck(s,o).matches(c)}if(X(arguments[2],qt)&&arguments[0]instanceof $&&arguments[1]instanceof $){var f=arguments[0],y=arguments[1],R=arguments[2],n=new ct(f,y,R),r=n.getIntersectionMatrix();return r}}},ct.overlaps=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?ct.relate(t,e).isOverlaps(t.getDimension(),e.getDimension()):!1},ct.disjoint=function(t,e){return!t.intersects(e)},ct.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ct.relate(t,e)},ct.crosses=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?ct.relate(t,e).isCrosses(t.getDimension(),e.getDimension()):!1},ct.contains=function(t,e){return t.getEnvelopeInternal().contains(e.getEnvelopeInternal())?t.isRectangle()?Ni.contains(t,e):ct.relate(t,e).isContains():!1};var $l=Object.freeze({RelateOp:ct});u(xe.prototype,{extractElements:function(t,e){if(t===null)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},combine:function(){for(var t=new P,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.combine=function(){if(arguments.length===1){var t=arguments[0],e=new xe(t);return e.combine()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new xe(xe.createList(n,r));return e.combine()}if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2],e=new xe(xe.createList(s,o,c));return e.combine()}},xe.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},xe.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new P;return n.add(t),n.add(e),n}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2],n=new P;return n.add(r),n.add(s),n.add(o),n}},u(Ci.prototype,{union:function(){for(var t=new nr,e=new Kt,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),s=r.getCoordinate(),o=t.locate(s,this.otherGeom);o===m.EXTERIOR&&e.add(s)}if(e.size()===0)return this.otherGeom;var c=null,f=j.toCoordinateArray(e);return c=f.length===1?this.geomFact.createPoint(f[0]):this.geomFact.createMultiPointFromCoords(f),xe.combine(c,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.union=function(t,e){var n=new Ci(t,e);return n.union()},u(kn.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[je]},getClass:function(){return kn}}),kn.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return kn.extract(t,e,new P)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];return n.getSortIndex()===r?s.add(n):n instanceof at&&n.apply(new kn(r,s)),s}},u(Se.prototype,{reduceToGeometries:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next(),s=null;X(r,N)?s=this.unionTree(r):r instanceof $&&(s=r),e.add(s)}return e},extractByEnvelope:function(t,e,n){for(var r=new P,s=0;s<e.getNumGeometries();s++){var o=e.getGeometryN(s);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this.geomFactory.buildGeometry(r)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var s=xe.combine(t,e);return s}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new St(Se.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var r=t.itemsTree(),s=this.unionTree(r);return s},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];if(1>=r-n){var o=Se.getGeometry(e,n);return this.unionSafe(o,null)}if(r-n===2)return this.unionSafe(Se.getGeometry(e,n),Se.getGeometry(e,n+1));var s=Math.trunc((r+n)/2),o=this.binaryUnion(e,n,s),c=this.binaryUnion(e,s,r);return this.unionSafe(o,c)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=e===null?r.copy():e.union(r)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Se.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var r=new P,s=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),c=this.unionActual(s,o);r.add(c);var f=xe.combine(r);return f},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(arguments.length===2){var s=arguments[0],o=arguments[1],e=s.getFactory(),n=e.createGeometryCollection([s,o]),r=n.buffer(0);return r}},interfaces_:function(){return[]},getClass:function(){return Se}}),Se.restrictToPolygons=function(t){if(X(t,Qe))return t;var e=hr.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(st.toPolygonArray(e))},Se.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Se.union=function(t){var e=new Se(t);return e.union()},Se.STRTREE_NODE_CAPACITY=4,u(Un.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Vt.overlayOp(t,e,J.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(X(arguments[0],V))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof $){var r=arguments[0];this.geomFact===null&&(this.geomFact=r.getFactory()),kn.extract(r,$.SORTINDEX_POLYGON,this.polygons),kn.extract(r,$.SORTINDEX_LINESTRING,this.lines),kn.extract(r,$.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var s=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(s)}var o=null;this.polygons.size()>0&&(o=Se.union(this.polygons));var c=this.unionWithNull(r,o),f=null;return f=e===null?c:c===null?e:Ci.union(e,c),f===null?this.geomFact.createGeometryCollection():f},interfaces_:function(){return[]},getClass:function(){return Un}}),Un.union=function(){if(arguments.length===1){if(X(arguments[0],V)){var t=arguments[0],e=new Un(t);return e.union()}if(arguments[0]instanceof $){var n=arguments[0],e=new Un(n);return e.union()}}else if(arguments.length===2){var r=arguments[0],s=arguments[1],e=new Un(r,s);return e.union()}};var Zl=Object.freeze({UnaryUnionOp:Un});u(wi.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),r=n[0],s=wi.findDifferentPoint(n,r),o=e.findEdgeInSameDirection(r,s),c=e.findEdgeEnd(o),f=null;c.getLabel().getLocation(0,U.RIGHT)===m.INTERIOR?f=c:c.getSym().getLabel().getLocation(0,U.RIGHT)===m.INTERIOR&&(f=c.getSym()),T.isTrue(f!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(f)},visitShellInteriors:function(t,e){if(t instanceof mt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Ut)for(var r=t,s=0;s<r.getNumGeometries();s++){var n=r.getGeometryN(s);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,U.RIGHT)===m.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do T.isTrue(n!==null,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getEdgeRing()===null){var s=new ri(r,this.geometryFactory);s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),s=r.get(0);if(s.getLabel().getLocation(0,U.RIGHT)===m.INTERIOR){for(var o=0;o<r.size();o++)if(s=r.get(o),!s.isVisited())return this.disconnectedRingcoord=s.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new P;this.geomGraph.computeSplitEdges(t);var e=new ze(new Lr);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},u(Ye.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;2>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},u(ln.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof ln){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n>=this.min&&r<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return ln}}),u(Si.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Si.computeLevel(t),this.interval=new ln,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=ur.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.computeLevel=function(t){var e=t.getWidth(),n=ur.exponent(e)+1;return n},S(Nn,Ye),u(Nn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Ye.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){T.isTrue(this.interval===null||this.interval.contains(t.interval));var e=Ye.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Ye.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var r=new ln(e,n),s=new Nn(r,this.level-1);return s},interfaces_:function(){return[]},getClass:function(){return Nn}}),Nn.createNode=function(t){var e=new Si(t),n=new Nn(e.getInterval(),e.getLevel());return n},Nn.createExpanded=function(t,e){var n=new ln(e);t!==null&&n.expandToInclude(t.interval);var r=Nn.createNode(n);return t!==null&&r.insert(t),r},S(_r,Ye),u(_r.prototype,{insert:function(t,e){var n=Ye.getSubnodeIndex(t,_r.origin);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getInterval().contains(t)){var s=Nn.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getInterval().contains(e));var r=Gn.isZeroWidth(e.getMin(),e.getMax()),s=null;s=r?t.find(e):t.getNode(e),s.add(n)},interfaces_:function(){return[]},getClass:function(){return _r}}),_r.origin=0,u(br.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=br.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new ln(t,t))}if(arguments[0]instanceof ln){var e=arguments[0],n=new P;return this.query(e,n),n}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.root.addAllItemsFromOverlapping(r,s)}},iterator:function(){var t=new P;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=br.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return br}}),br.ensureExtent=function(t,e){var n=t.getMin(),r=t.getMax();return n!==r?t:(n===r&&(n-=e/2,r=n+e/2),new ln(n,r))},u(ea.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return ea}}),u(qs.prototype,{testLineSegment:function(t,e){var n=null,r=null,s=null,o=null,c=null,f=e.p0,y=e.p1;r=f.x-t.x,s=f.y-t.y,o=y.x-t.x,c=y.y-t.y,(s>0&&0>=c||c>0&&0>=s)&&(n=Qn.signOfDet2x2(r,s,o,c)/(c-s),n>0&&this.crossings++)},buildIndex:function(){this.tree=new br;for(var t=j.removeRepeatedPoints(this.ring.getCoordinates()),e=Pe.getChains(t),n=0;n<e.size();n++){var r=e.get(n),s=r.getEnvelope();this.interval.min=s.getMinY(),this.interval.max=s.getMaxY(),this.tree.insert(this.interval,r)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new O(p.NEGATIVE_INFINITY,p.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new Li(this,t),s=n.iterator();s.hasNext();){var o=s.next();this.testMonotoneChain(e,r,o)}return this.crossings%2===1},interfaces_:function(){return[ea]},getClass:function(){return qs}}),S(Li,Vn),u(Li.prototype,{select:function(){if(arguments.length!==1)return Vn.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Li}}),qs.MCSelecter=Li,u(na.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next(),s=this.nodes.addNode(r.getCoordinate());s.setLabel(e,r.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new Ms,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var r=n.next(),s=r.getLabel().getLocation(e),o=r.getEdgeIntersectionList().iterator();o.hasNext();){var c=o.next(),f=this.nodes.addNode(c.coord);s===m.BOUNDARY?f.setLabelBoundary(e):f.getLabel().isNull(e)&&f.setLabel(e,m.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return na}}),u(ra.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return ra}}),u(ia.prototype,{buildIndex:function(){this.index=new St;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),s=0;s<r.size();s++){var o=r.get(s),c=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var f=Le.findPtNotNode(n,o,this.graph);if(f!==null){var y=Y.isPointInRing(f,c);if(y)return this.nestedPt=f,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return ia}}),u(ut.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return ut.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return ut}}),ut.ERROR=0,ut.REPEATED_POINT=1,ut.HOLE_OUTSIDE_SHELL=2,ut.NESTED_HOLES=3,ut.DISCONNECTED_INTERIOR=4,ut.SELF_INTERSECTION=5,ut.RING_SELF_INTERSECTION=6,ut.NESTED_SHELLS=7,ut.DUPLICATE_RINGS=8,ut.TOO_FEW_POINTS=9,ut.INVALID_COORDINATE=10,ut.RING_NOT_CLOSED=11,ut.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],u(Le.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Le.isValid(t[e]))return this.validErr=new ut(ut.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof mt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var n=new ia(e),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r);n.add(s)}var o=n.isNonNested();o||(this.validErr=new ut(ut.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new ra(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new ut(ut.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new ut(ut.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,n){var r=t.getCoordinates(),s=e.getCoordinates(),o=Le.findPtNotNode(r,e,n);if(o!==null){var c=Y.isPointInRing(o,s);if(!c)return o}var f=Le.findPtNotNode(s,t,n);if(f!==null){var y=Y.isPointInRing(f,r);return y?f:null}return T.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new wi(t);e.isInteriorsConnected()||(this.validErr=new ut(ut.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new Kt,n=!0,r=t.iterator();r.hasNext();){var s=r.next();if(n)n=!1;else{if(e.contains(s.coord))return this.validErr=new ut(ut.RING_SELF_INTERSECTION,s.coord),null;e.add(s.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),r=new qs(n),s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),c=Le.findPtNotNode(o.getCoordinates(),n,e);if(c===null)return null;var f=!r.isInside(c);if(f)return this.validErr=new ut(ut.HOLE_OUTSIDE_SHELL,c),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new ut(ut.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof wt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof se){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Tt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),this.validErr!==null||(this.checkClosedRing(n),this.validErr!==null))return null;var r=new ue(0,n);if(this.checkTooFewPoints(r),this.validErr!==null)return null;var s=new Bt;r.computeSelfNodes(s,!0,!0),this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof rt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),this.validErr!==null)return null;var r=new ue(0,o);this.checkTooFewPoints(r)}else if(arguments[0]instanceof mt){var c=arguments[0];if(this.checkInvalidCoordinates(c),this.validErr!==null||(this.checkClosedRings(c),this.validErr!==null))return null;var r=new ue(0,c);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null)||(this.checkHolesInShell(c,r),this.validErr!==null)||(this.checkHolesNotNested(c,r),this.validErr!==null))return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof Ut){for(var f=arguments[0],y=0;y<f.getNumGeometries();y++){var R=f.getGeometryN(y);if(this.checkInvalidCoordinates(R),this.validErr!==null||(this.checkClosedRings(R),this.validErr!==null))return null}var r=new ue(0,f);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null))return null;for(var y=0;y<f.getNumGeometries();y++){var R=f.getGeometryN(y);if(this.checkHolesInShell(R,r),this.validErr!==null)return null}for(var y=0;y<f.getNumGeometries();y++){var R=f.getGeometryN(y);if(this.checkHolesNotNested(R,r),this.validErr!==null)return null}if(this.checkShellsNotNested(f,r),this.validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof at)for(var _=arguments[0],y=0;y<_.getNumGeometries();y++){var D=_.getGeometryN(y);if(this.checkValid(D),this.validErr!==null)return null}else if(arguments[0]instanceof $){var q=arguments[0];if(this.validErr=null,q.isEmpty())return null;if(q instanceof wt)this.checkValid(q);else if(q instanceof se)this.checkValid(q);else if(q instanceof Tt)this.checkValid(q);else if(q instanceof rt)this.checkValid(q);else if(q instanceof mt)this.checkValid(q);else if(q instanceof Ut)this.checkValid(q);else{if(!(q instanceof at))throw new UnsupportedOperationException(q.getClass().getName());this.checkValid(q)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var r=t.getCoordinates(),s=e.getExteriorRing(),o=s.getCoordinates(),c=Le.findPtNotNode(r,s,n);if(c===null)return null;var f=Y.isPointInRing(c,o);if(!f)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new ut(ut.NESTED_SHELLS,c),null;for(var y=null,R=0;R<e.getNumInteriorRing();R++){var _=e.getInteriorRingN(R);if(y=this.checkShellInsideHole(t,_,n),y===null)return null}this.validErr=new ut(ut.NESTED_SHELLS,y)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new ut(ut.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n),s=r.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var c=t.getGeometryN(o);if(this.checkShellNotNested(s,c,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return Le}}),Le.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e),s=r.getEdgeIntersectionList(),o=0;o<t.length;o++){var c=t[o];if(!s.isIntersection(c))return c}return null},Le.isValid=function(){if(arguments[0]instanceof $){var t=arguments[0],e=new Le(t);return e.isValid()}if(arguments[0]instanceof E){var n=arguments[0];return p.isNaN(n.x)||p.isInfinite(n.x)||p.isNaN(n.y)?!1:!p.isInfinite(n.y)}};var Jl=Object.freeze({IsValidOp:Le}),Kl=Object.freeze({BoundaryOp:vn,IsSimpleOp:ci,buffer:Ul,distance:Xl,linemerge:Yl,overlay:Hl,polygonize:Wl,relate:$l,union:Zl,valid:Jl});S(Bs,de.CoordinateOperation),u(Bs.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var n=new Array(t.length).fill(null),r=0;r<t.length;r++){var s=new E(t[r]);this.targetPM.makePrecise(s),n[r]=s}var o=new A(n,!1),c=o.toCoordinateArray(),f=0;e instanceof rt&&(f=2),e instanceof Tt&&(f=4);var y=n;return this.removeCollapsed&&(y=null),c.length<f?y:c},interfaces_:function(){return[]},getClass:function(){return Bs}}),u(gr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),r=n;return this.changePrecisionModel||(r=t.getFactory().createGeometry(n)),r},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new de(n)}else e=new de;var r=this.removeCollapsed;t.getDimension()>=2&&(r=!0);var s=e.edit(t,new Bs(this.targetPM,r));return s},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new de.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new st(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:X(e,Qe)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new de;var n=this.createFactory(t,e),r=new de(n);return r},interfaces_:function(){return[]},getClass:function(){return gr}}),gr.reduce=function(t,e){var n=new gr(e);return n.reduce(t)},gr.reducePointwise=function(t,e){var n=new gr(e);return n.setPointwise(!0),n.reduce(t)};var jl=Object.freeze({GeometryPrecisionReducer:gr});u(Ri.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,s=t+1;e>s;s++){var o=this.seg.distance(this.pts[s]);o>n&&(n=o,r=s)}if(n<=this.distanceTolerance)for(var s=t+1;e>s;s++)this.usePt[s]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new A,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new E(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.simplify=function(t,e){var n=new Ri(t);return n.setDistanceTolerance(e),n.simplify()},u(Ar.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Ti(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.simplify=function(t,e){var n=new Ar(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S(Ti,ee),u(Ti.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof Ut?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=null;return r=n.length===0?new Array(0).fill(null):Ri.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)},transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof mt,r=ee.prototype.transformLinearRing.call(this,t,e);return!n||r instanceof Tt?r:null},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ar.DPTransformer=Ti,S(Pi,tt),u(Pi.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Pi}}),u(Cn.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Cn.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Cn.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new Pi(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Cn.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,r=0;r<t.size();r++)n=t.get(r),e[r]=n.p0;return e[e.length-1]=n.p1,e},u(Dr.prototype,{remove:function(t){this.index.remove(new O(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Cn)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var r=e[n];this.add(r)}else if(arguments[0]instanceof tt){var s=arguments[0];this.index.insert(new O(s.p0,s.p1),s)}},query:function(t){var e=new O(t.p0,t.p1),n=new sa(t);this.index.query(e,n);var r=n.getItems();return r},interfaces_:function(){return[]},getClass:function(){return Dr}}),u(sa.prototype,{visitItem:function(t){var e=t;O.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[On]},getClass:function(){return sa}}),u(Oi.prototype,{flatten:function(t,e){var n=this.linePts[t],r=this.linePts[e],s=new tt(n,r);return this.remove(this.line,t,e),this.outputIndex.add(s),s},hasBadIntersection:function(t,e,n){return this.hasBadOutputIntersection(n)?!0:!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var r=new Array(2).fill(null);if(t+1===e){var s=this.line.getSegment(t);return this.line.addToResult(s),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var c=n+1;c<this.line.getMinimumSize()&&(o=!1)}var f=new Array(1).fill(null),y=this.findFurthestPoint(this.linePts,t,e,f);f[0]>this.distanceTolerance&&(o=!1);var R=new tt;if(R.p0=this.linePts[t],R.p1=this.linePts[e],r[0]=t,r[1]=e,this.hasBadIntersection(this.line,r,R)&&(o=!1),o){var s=this.flatten(t,e);return this.line.addToResult(s),null}this.simplifySection(t,y,n),this.simplifySection(y,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,t))return!0}return!1},findFurthestPoint:function(t,e,n,r){var s=new tt;s.p0=t[e],s.p1=t[n];for(var o=-1,c=e,f=e+1;n>f;f++){var y=t[f],R=s.distance(y);R>o&&(o=R,c=f)}return r[0]=o,c},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var r=e;n>r;r++){var s=t.getSegment(r);this.inputIndex.remove(s)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var r=this.inputIndex.query(n),s=r.iterator();s.hasNext();){var o=s.next();if(this.hasInteriorIntersection(o,n)){if(Oi.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return Oi}}),Oi.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var r=n.getIndex();return r>=e[0]&&r<e[1]},u(oa.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new Oi(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return oa}}),u(fr.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new tn,this.inputGeom.apply(new Vs(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new Mi(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new d;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.simplify=function(t,e){var n=new fr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S(Mi,ee),u(Mi.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof rt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return ee.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return Mi}}),u(Vs.prototype,{filter:function(t){if(t instanceof rt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,r=new Cn(e,n);this.tps.linestringMap.put(e,r)}},interfaces_:function(){return[ge]},getClass:function(){return Vs}}),fr.LineStringTransformer=Mi,fr.LineStringMapBuilderFilter=Vs;var Ql=Object.freeze({DouglasPeuckerSimplifier:Ar,TopologyPreservingSimplifier:fr});u(Fr.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Fr.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.getConstrainedLength(n),o=s/this.segLen;r.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=Fr.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.pointAlongReverse=function(t,e){var n=new E;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},u(aa.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return aa}}),u(_i.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),r=n.getLength(),s=r/2,o=new Fr(n),c=_i.projectedSplitPoint(t,e),f=2*c.distance(e)*.8,y=f;return y>s&&(y=s),o.setMinimumLength(y),o.splitAt(c),o.getSplitPoint()},interfaces_:function(){return[aa]},getClass:function(){return _i}}),_i.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),r=n.project(e);return r},u(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Nt.isInCircleDDNormalized=function(t,e,n,r){var s=b.valueOf(t.x).selfSubtract(r.x),o=b.valueOf(t.y).selfSubtract(r.y),c=b.valueOf(e.x).selfSubtract(r.x),f=b.valueOf(e.y).selfSubtract(r.y),y=b.valueOf(n.x).selfSubtract(r.x),R=b.valueOf(n.y).selfSubtract(r.y),_=s.multiply(f).selfSubtract(c.multiply(o)),D=c.multiply(R).selfSubtract(y.multiply(f)),q=y.multiply(o).selfSubtract(s.multiply(R)),Z=s.multiply(s).selfAdd(o.multiply(o)),K=c.multiply(c).selfAdd(f.multiply(f)),Q=y.multiply(y).selfAdd(R.multiply(R)),It=Z.selfMultiply(D).selfAdd(K.selfMultiply(q)).selfAdd(Q.selfMultiply(_)),_t=It.doubleValue()>0;return _t},Nt.checkRobustInCircle=function(t,e,n,r){var s=Nt.isInCircleNonRobust(t,e,n,r),o=Nt.isInCircleDDSlow(t,e,n,r),c=Nt.isInCircleCC(t,e,n,r),f=Et.circumcentre(t,e,n);pt.out.println("p radius diff a = "+Math.abs(r.distance(f)-t.distance(f))/t.distance(f)),s===o&&s===c||(pt.out.println("inCircle robustness failure (double result = "+s+", DD result = "+o+", CC result = "+c+")"),pt.out.println(Wt.toLineString(new pe([t,e,n,r]))),pt.out.println("Circumcentre = "+Wt.toPoint(f)+" radius = "+t.distance(f)),pt.out.println("p radius diff a = "+Math.abs(r.distance(f)/t.distance(f)-1)),pt.out.println("p radius diff b = "+Math.abs(r.distance(f)/e.distance(f)-1)),pt.out.println("p radius diff c = "+Math.abs(r.distance(f)/n.distance(f)-1)),pt.out.println())},Nt.isInCircleDDFast=function(t,e,n,r){var s=b.sqr(t.x).selfAdd(b.sqr(t.y)).selfMultiply(Nt.triAreaDDFast(e,n,r)),o=b.sqr(e.x).selfAdd(b.sqr(e.y)).selfMultiply(Nt.triAreaDDFast(t,n,r)),c=b.sqr(n.x).selfAdd(b.sqr(n.y)).selfMultiply(Nt.triAreaDDFast(t,e,r)),f=b.sqr(r.x).selfAdd(b.sqr(r.y)).selfMultiply(Nt.triAreaDDFast(t,e,n)),y=s.selfSubtract(o).selfAdd(c).selfSubtract(f),R=y.doubleValue()>0;return R},Nt.isInCircleCC=function(t,e,n,r){var s=Et.circumcentre(t,e,n),o=t.distance(s),c=r.distance(s)-o;return 0>=c},Nt.isInCircleNormalized=function(t,e,n,r){var s=t.x-r.x,o=t.y-r.y,c=e.x-r.x,f=e.y-r.y,y=n.x-r.x,R=n.y-r.y,_=s*f-c*o,D=c*R-y*f,q=y*o-s*R,Z=s*s+o*o,K=c*c+f*f,Q=y*y+R*R,It=Z*D+K*q+Q*_;return It>0},Nt.isInCircleDDSlow=function(t,e,n,r){var s=b.valueOf(r.x),o=b.valueOf(r.y),c=b.valueOf(t.x),f=b.valueOf(t.y),y=b.valueOf(e.x),R=b.valueOf(e.y),_=b.valueOf(n.x),D=b.valueOf(n.y),q=c.multiply(c).add(f.multiply(f)).multiply(Nt.triAreaDDSlow(y,R,_,D,s,o)),Z=y.multiply(y).add(R.multiply(R)).multiply(Nt.triAreaDDSlow(c,f,_,D,s,o)),K=_.multiply(_).add(D.multiply(D)).multiply(Nt.triAreaDDSlow(c,f,y,R,s,o)),Q=s.multiply(s).add(o.multiply(o)).multiply(Nt.triAreaDDSlow(c,f,y,R,_,D)),It=q.subtract(Z).add(K).subtract(Q),_t=It.doubleValue()>0;return _t},Nt.isInCircleNonRobust=function(t,e,n,r){var s=(t.x*t.x+t.y*t.y)*Nt.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*Nt.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*Nt.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*Nt.triArea(t,e,n)>0;return s},Nt.isInCircleRobust=function(t,e,n,r){return Nt.isInCircleNormalized(t,e,n,r)},Nt.triAreaDDSlow=function(t,e,n,r,s,o){return n.subtract(t).multiply(o.subtract(e)).subtract(r.subtract(e).multiply(s.subtract(t)))},Nt.triAreaDDFast=function(t,e,n){var r=b.valueOf(e.x).selfSubtract(t.x).selfMultiply(b.valueOf(n.y).selfSubtract(t.y)),s=b.valueOf(e.y).selfSubtract(t.y).selfMultiply(b.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(s)},u(dt.prototype,{circleCenter:function(t,e){var n=new dt(this.getX(),this.getY()),r=this.bisector(n,t),s=this.bisector(t,e),o=new Ht(r,s),c=null;try{c=new dt(o.getX(),o.getY())}catch(f){if(!(f instanceof G))throw f;pt.err.println("a: "+n+"  b: "+t+"  c: "+e),pt.err.println(f)}finally{}return c},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),r=e.getY()-t.getY(),s=new Ht(t.getX()+n/2,t.getY()+r/2,1),o=new Ht(t.getX()-r+n/2,t.getY()+n+r/2,1);return new Ht(s,o)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Nt.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var r=t.getX(),s=t.getY(),o=e.getX()-r,c=n.getX()-r,f=e.getY()-s,y=n.getY()-s,R=o*y-c*f,_=this.getX()-r,D=this.getY()-s,q=(y*_-c*D)/R,Z=(-f*_+o*D)/R,K=t.getZ()+q*(e.getZ()-t.getZ())+Z*(n.getZ()-t.getZ());return K},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,r=(this.p.z+t.getZ())/2;return new dt(e,n,r)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new dt(t*this.p.x,t*this.p.y)},cross:function(){return new dt(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new dt(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,r=e.sub(t),s=n.sub(t),o=r.crossProduct(s);return o>0?dt.LEFT:0>o?dt.RIGHT:r.getX()*s.getX()<0||r.getY()*s.getY()<0?dt.BEHIND:r.magn()<s.magn()?dt.BEYOND:t.equals(n)?dt.ORIGIN:e.equals(n)?dt.DESTINATION:dt.BETWEEN},sum:function(t){return new dt(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),r=this.distance(n,t),s=this.distance(this,t),o=this.distance(t,e);return s>o&&(s=o),o=this.distance(e,this),s>o&&(s=o),r/s},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=e.distance(n),s=t.distance(e),o=n.z-e.z,c=e.z+o*(s/r);return c}if(arguments.length===4){var f=arguments[0],y=arguments[1],R=arguments[2],_=arguments[3],D=y.x,q=y.y,Z=R.x-D,K=_.x-D,Q=R.y-q,It=_.y-q,_t=Z*It-K*Q,Fe=f.x-D,mr=f.y-q,Ks=(It*Fe-K*mr)/_t,js=(-Q*Fe+Z*mr)/_t,Qs=y.z+Ks*(R.z-y.z)+js*(_.z-y.z);return Qs}},dt.LEFT=0,dt.RIGHT=1,dt.BEYOND=2,dt.BEHIND=3,dt.BETWEEN=4,dt.ORIGIN=5,dt.DESTINATION=6,S(Xn,dt),u(Xn.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Xn}}),u(Rt.prototype,{equalsNonOriented:function(t){return this.equalsOriented(t)?!0:!!this.equalsOriented(t.sym())},toLineSegment:function(){return new tt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Wt.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return Rt}}),Rt.makeEdge=function(t,e){var n=new Rt,r=new Rt,s=new Rt,o=new Rt;n._rot=r,r._rot=s,s._rot=o,o._rot=n,n.setNext(n),r.setNext(o),s.setNext(s),o.setNext(r);var c=n;return c.setOrig(t),c.setDest(e),c},Rt.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Rt.splice(t,e),Rt.splice(t.sym(),n),Rt.splice(t,e.lNext()),Rt.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Rt.splice=function(t,e){var n=t.oNext().rot(),r=e.oNext().rot(),s=e.oNext(),o=t.oNext(),c=r.oNext(),f=n.oNext();t.setNext(s),e.setNext(o),n.setNext(c),r.setNext(f)},Rt.connect=function(t,e){var n=Rt.makeEdge(t.dest(),e.orig());return Rt.splice(n,t.lNext()),Rt.splice(n.sym(),e),n},u(bi.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);Rt.splice(n,e);var r=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);for(;;){var s=e.oPrev();if(s.dest().rightOf(e)&&t.isInCircle(e.orig(),s.dest(),e.dest()))Rt.swap(e),e=e.oPrev();else{if(e.oNext()===r)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return bi}}),u(ua.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ua}}),u(zs.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[ua]},getClass:function(){return zs}}),S(Gr,w),u(Gr.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Gr}}),Gr.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},u(qr.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return qr}}),u(Ee.prototype,{getTriangleVertices:function(t){var e=new Xs;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return t.equals(this.frameVertex[0])||t.equals(this.frameVertex[1])?!0:!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=Rt.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new P,r=t;do{var s=t.rot().orig().getCoordinate();n.add(s),t=t.oPrev()}while(t!==r);var o=new A;o.addAll(n,!1),o.closeRing(),o.size()<4&&(pt.out.println(o),o.add(o.get(o.size()-1),!0));var c=o.toCoordinateArray(),f=e.createPolygon(e.createLinearRing(c),null),y=r.orig();return f.setUserData(y.getCoordinate()),f},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Rt.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Rt.splice(e.sym(),n),Rt.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Ee.getTriangleEdges(t,e);var n=new Array(3).fill(null);Ee.getTriangleEdges(t.sym(),n);var r=t.lNext().dest();if(this.isFrameVertex(r))return!0;var s=t.sym().lNext().dest();return!!this.isFrameVertex(s)},makeEdge:function(t,e){var n=Rt.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new jt;n.push(this.startingEdge);for(var r=new kt;!n.empty();){var s=n.pop();if(!r.contains(s)){var o=this.fetchTriangleToVisit(s,n,e,r);o!==null&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new O(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),r=0;r=e>n?10*e:10*n,this.frameVertex[0]=new dt((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this.frameVertex[1]=new dt(t.getMinX()-r,t.getMinY()-r),this.frameVertex[2]=new dt(t.getMaxX()+r,t.getMinY()-r),this.frameEnv=new O(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Ys;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new kt,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),s=r.orig();!t&&this.isFrameVertex(s)||e.add(s);var o=r.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,r){var s=t,o=0,c=!1;do{this.triEdges[o]=s,this.isFrameEdge(s)&&(c=!0);var f=s.sym();r.contains(f)||e.push(f),r.add(s),o++,s=s.lNext()}while(s!==t);return c&&!n?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var o=s.next();n[r++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new P,n=new kt,r=this.quadEdges.iterator();r.hasNext();){var s=r.next(),o=s.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(s));var c=s.sym(),f=c.orig();n.contains(f)||(n.add(f),!t&&this.isFrameVertex(f)||e.add(c))}return e},getTriangleEdges:function(t){var e=new Us;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new P,n=new jt;n.push(this.startingEdge);for(var r=new kt;!n.empty();){var s=n.pop();if(!r.contains(s)){var o=s.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(s.oNext()),n.push(s.sym().oNext()),r.add(s),r.add(s.sym())}}return e},delete:function(t){Rt.splice(t,t.oPrev()),Rt.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),r=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(r),t.delete(),e.delete(),n.delete(),r.delete()},locateFromEdge:function(t,e){for(var n=0,r=this.quadEdges.size(),s=e;;){if(n++,n>r)throw new Gr(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new ks,!0);for(var e=new P,n=this.getVertexUniqueEdges(!1),r=n.iterator();r.hasNext();){var s=r.next();e.add(this.getVoronoiCellPolygon(s,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(st.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var o=s.next();n[r++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);Rt.splice(n,e);var r=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);return r},locate:function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof E){var e=arguments[0];return this.locator.locate(new dt(e))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.locator.locate(new dt(n));if(s===null)return null;var o=s;s.dest().getCoordinate().equals2D(n)&&(o=s.sym());var c=o;do{if(c.dest().getCoordinate().equals2D(r))return c;c=c.oNext()}while(c!==o);return null}},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new d},u(ks.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),s=Et.circumcentre(e,n,r),o=new dt(s),c=0;3>c;c++)t[c].rot().setOrig(o)},interfaces_:function(){return[qr]},getClass:function(){return ks}}),u(Us.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[qr]},getClass:function(){return Us}}),u(Xs.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[qr]},getClass:function(){return Xs}}),u(Ys.prototype,{checkTriangleSize:function(t){t.length>=2?Wt.toLineString(t[0],t[1]):t.length>=1&&Wt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var r=this.coordList.toCoordinateArray();if(r.length!==4)return null;this.triCoords.add(r)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[qr]},getClass:function(){return Ys}}),Ee.TriangleCircumcentreVisitor=ks,Ee.TriangleEdgesListVisitor=Us,Ee.TriangleVertexListVisitor=Xs,Ee.TriangleCoordinatesVisitor=Ys,Ee.EDGE_COINCIDENCE_TOL_FACTOR=1e3,u(dr.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return dr}}),u(Ai.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ai}}),u(Hs.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Hs}}),u(pr.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.root===null)return this.root=new Hs(e,n),this.root;if(this.tolerance>0){var r=this.findBestMatchNode(e);if(r!==null)return r.increment(),r}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var n=arguments[0],r=new P;return this.query(n,r),r}if(arguments.length===2){if(arguments[0]instanceof O&&X(arguments[1],N))(function(){var c=t[0],f=t[1];e.queryNode(e.root,c,!0,{interfaces_:function(){return[Ai]},visit:function(y){f.add(y)}})})();else if(arguments[0]instanceof O&&X(arguments[1],Ai)){var s=arguments[0],o=arguments[1];this.queryNode(this.root,s,!0,o)}}},queryNode:function(t,e,n,r){if(t===null)return null;var s=null,o=null,c=null;n?(s=e.getMinX(),o=e.getMaxX(),c=t.getX()):(s=e.getMinY(),o=e.getMaxY(),c=t.getY());var f=c>s,y=o>=c;f&&this.queryNode(t.getLeft(),e,!n,r),e.contains(t.getCoordinate())&&r.visit(t),y&&this.queryNode(t.getRight(),e,!n,r)},findBestMatchNode:function(t){var e=new Ws(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var n=this.root,r=this.root,s=!0,o=!0;n!==null;){if(n!==null){var c=t.distance(n.getCoordinate())<=this.tolerance;if(c)return n.increment(),n}o=s?t.x<n.getX():t.y<n.getY(),r=n,n=o?n.getLeft():n.getRight(),s=!s}this.numberOfNodes=this.numberOfNodes+1;var f=new Hs(t,e);return o?r.setLeft(f):r.setRight(f),f},interfaces_:function(){return[]},getClass:function(){return pr}}),pr.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return pr.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new A,s=e.iterator();s.hasNext();)for(var o=s.next(),c=n?o.getCount():1,f=0;c>f;f++)r.add(o.getCoordinate(),!0);return r.toCoordinateArray()}},u(Ws.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var r=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(r=!0),r&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new O(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Ai]},getClass:function(){return Ws}}),pr.BestMatchVisitor=Ws,u(Yn.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Yn.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}for(var s=this.segVertices.iterator();s.hasNext();){var r=s.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new st,e=this.getPointArray(),n=new nn(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new E((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(r),o=new O(r);o.expandBy(s);for(var c=this.kdt.query(o),f=null,y=p.MAX_VALUE,R=c.iterator();R.hasNext();){var _=R.next(),D=_.getCoordinate();if(!D.equals2D(e)&&!D.equals2D(n)){var q=r.distance(D);if(s>q){var Z=q;(f===null||y>Z)&&(f=D,y=Z)}}}return f},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new P,n=0,r=new P,s=t.iterator();s.hasNext();){var o=s.next(),c=this.findNonGabrielPoint(o);if(c!==null){this.splitPt=this.splitFinder.findSplitPoint(o,c);var f=this.createVertex(this.splitPt,o),y=(this.insertSite(f),new dr(o.getStartX(),o.getStartY(),o.getStartZ(),f.getX(),f.getY(),f.getZ(),o.getData())),R=new dr(f.getX(),f.getY(),f.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(y),e.add(R),r.add(o),n+=1}}return t.removeAll(r),t.addAll(e),n},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new Xn(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(n,r):new Xn(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Yn.computeVertexEnvelope(this.initialVertices),e=Yn.computeVertexEnvelope(this.segVertices),n=new O(t);n.expandToInclude(e);var r=.2*n.getWidth(),s=.2*n.getHeight(),o=Math.max(r,s);this.computeAreaEnv=new O(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Ee(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new zs(this.subdiv)),this.incDel=new bi(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Xn){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof E){var r=arguments[0];this.insertSite(this.createVertex(r))}},interfaces_:function(){return[]},getClass:function(){return Yn}}),Yn.computeVertexEnvelope=function(t){for(var e=new O,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r.getCoordinate())}return e},Yn.MAX_SPLIT_ITER=99,u(Jt.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords),e=Jt.toVertices(this.siteCoords);this.subdiv=new Ee(t,this.tolerance);var n=new bi(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof $){var t=arguments[0];this.siteCoords=Jt.extractUniqueCoordinates(t)}else if(X(arguments[0],V)){var e=arguments[0];this.siteCoords=Jt.unique(j.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.extractUniqueCoordinates=function(t){if(t===null)return new A;var e=t.getCoordinates();return Jt.unique(e)},Jt.envelope=function(t){for(var e=new O,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r)}return e},Jt.unique=function(t){var e=j.copyDeep(t);Ke.sort(e);var n=new A(e,!1);return n},Jt.toVertices=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dt(r))}return e},u(Br.prototype,{createSiteVertices:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();this.constraintVertexMap.containsKey(r)||e.add(new Xn(r))}return e},create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords),e=new P;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Br.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),r=new Yn(n,this.tolerance);r.setConstraints(e,new P(this.constraintVertexMap.values())),r.formInitialDelaunay(),r.enforceConstraints(),this.subdiv=r.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Jt.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var r=new Xn(e[n]);this.constraintVertexMap.put(e[n],r)}},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=$t.getLines(t),n=new P,r=e.iterator();r.hasNext();){var s=r.next();Br.createConstraintSegments(s,n)}return n}if(arguments.length===2)for(var o=arguments[0],c=arguments[1],f=o.getCoordinates(),r=1;r<f.length;r++)c.add(new dr(f[r-1],f[r]))},u(Di.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Jt.toVertices(this.siteCoords);this.subdiv=new Ee(t,this.tolerance);var r=new bi(this.subdiv);r.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Di.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof $){var t=arguments[0];this.siteCoords=Jt.extractUniqueCoordinates(t)}else if(X(arguments[0],V)){var e=arguments[0];this.siteCoords=Jt.unique(j.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),r=new P,s=0;s<t.getNumGeometries();s++){var o=t.getGeometryN(s),c=null;e.contains(o.getEnvelopeInternal())?c=o:e.intersects(o.getEnvelopeInternal())&&(c=n.intersection(o),c.setUserData(o.getUserData())),c===null||c.isEmpty()||r.add(c)}return t.getFactory().createGeometryCollection(st.toGeometryArray(r))};var th=Object.freeze({ConformingDelaunayTriangulationBuilder:Br,DelaunayTriangulationBuilder:Jt,VoronoiDiagramBuilder:Di});u($s.prototype,{interfaces_:function(){return[]},getClass:function(){return $s}}),$s.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return J.createEmptyResult(J.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.UNION)},u($.prototype,{equalsTopo:function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?ct.relate(this,t).isEquals(this.getDimension(),t.getDimension()):!1},union:function(){if(arguments.length===0)return Un.union(this);if(arguments.length===1){var t=arguments[0];return $s.union(this,t)}},isValid:function(){return Le.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return J.createEmptyResult(J.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Cr.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.INTERSECTION)},covers:function(t){return ct.covers(this,t)},coveredBy:function(t){return ct.coveredBy(this,t)},touches:function(t){return ct.touches(this,t)},intersects:function(t){return ct.intersects(this,t)},within:function(t){return ct.within(this,t)},overlaps:function(t){return ct.overlaps(this,t)},disjoint:function(t){return ct.disjoint(this,t)},crosses:function(t){return ct.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return Yt.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return Yt.bufferOp(this,e,n)}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];return Yt.bufferOp(this,r,s,o)}},convexHull:function(){return new nn(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return ct.relate.apply(ct,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=en.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var n=new xs(this);t=n.getInteriorPoint()}else if(e===1){var n=new ys(this);t=n.getInteriorPoint()}else{var n=new Me(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return J.createEmptyResult(J.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new Wt;return t.write(this)},toString:function(){this.toText()},contains:function(t){return ct.contains(this,t)},difference:function(t){return this.isEmpty()?J.createEmptyResult(J.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.DIFFERENCE))},isSimple:function(){var t=new ci(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return n>e?!1:_e.isWithinDistance(this,t,e)},distance:function(t){return _e.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var eh="1.1.2 (248dab8)";h.version=eh,h.algorithm=Al,h.densify=Dl,h.dissolve=Fl,h.geom=bl,h.index=Bl,h.io=zl,h.noding=kl,h.operation=Kl,h.precision=jl,h.simplify=Ql,h.triangulate=th})})(eg,vr);var iu=vr,ku=function(a,l){var h=new iu.io.GeoJSONReader,u=h.read(JSON.stringify(a.geometry)),g=h.read(JSON.stringify(l.geometry)),d=u.union(g),p=new iu.io.GeoJSONWriter;return d=p.write(d),{type:"Feature",geometry:d,properties:a.properties}},ng=Ra,rg=ku,ca=Te;function ig(a,l,h){if(typeof l!="number")throw new Error("maxEdge parameter is required");if(typeof h!="string")throw new Error("units parameter is required");var u=ng(a),g=u.features.filter(d);u.features=g;function d(p){var v=p.geometry.coordinates[0][0],I=p.geometry.coordinates[0][1],x=p.geometry.coordinates[0][2],C=ca(v,I,h),w=ca(I,x,h),S=ca(v,x,h);return C<=l&&w<=l&&S<=l}return sg(u)}function sg(a){for(var l=JSON.parse(JSON.stringify(a.features[0])),h=a.features,u=0,g=h.length;u<g;u++){var d=h[u];d.geometry&&(l=rg(l,d))}return l}var og=ig,su=vr,ag=function(a,l){var h=JSON.parse(JSON.stringify(a)),u=JSON.parse(JSON.stringify(l));h.type!=="Feature"&&(h={type:"Feature",properties:{},geometry:h}),u.type!=="Feature"&&(u={type:"Feature",properties:{},geometry:u});var g=new su.io.GeoJSONReader,d=g.read(JSON.stringify(h.geometry)),p=g.read(JSON.stringify(u.geometry)),v=d.difference(p);if(!v.isEmpty()){var I=new su.io.GeoJSONWriter,x=I.write(v);return h.geometry=v,{type:"Feature",properties:h.properties,geometry:x}}},ug=Yr,lg=function(l,h,u,g){return l.features.forEach(function(d){var p=h.features.filter(function(v){return ug(v,d)}).map(function(v){return v.properties[u]});d.properties||(d.properties={}),d.properties[g]=p}),l},hg=Ge.coordEach,cg=function(l){return l=JSON.parse(JSON.stringify(l)),hg(l,function(h){h.reverse()}),l},Ea={},gg={get exports(){return Ea},set exports(a){Ea=a}};(function(a){(function(){function l(v,I){var x=v.x-I.x,C=v.y-I.y;return x*x+C*C}function h(v,I,x){var C=I.x,w=I.y,S=x.x-C,F=x.y-w;if(S!==0||F!==0){var T=((v.x-C)*S+(v.y-w)*F)/(S*S+F*F);T>1?(C=x.x,w=x.y):T>0&&(C+=S*T,w+=F*T)}return S=v.x-C,F=v.y-w,S*S+F*F}function u(v,I){for(var x=v[0],C=[x],w,S=1,F=v.length;S<F;S++)w=v[S],l(w,x)>I&&(C.push(w),x=w);return x!==w&&C.push(w),C}function g(v,I,x,C,w){for(var S=C,F,T=I+1;T<x;T++){var E=h(v[T],v[I],v[x]);E>S&&(F=T,S=E)}S>C&&(F-I>1&&g(v,I,F,C,w),w.push(v[F]),x-F>1&&g(v,F,x,C,w))}function d(v,I){var x=v.length-1,C=[v[0]];return g(v,0,x,I,C),C.push(v[x]),C}function p(v,I,x){if(v.length<=2)return v;var C=I!==void 0?I*I:1;return v=x?v:u(v,C),v=d(v,C),v}a.exports=p,a.exports.default=p})()})(gg);var Ia=Ea,ou=["LineString","MultiLineString","Polygon","MultiPolygon"],fg=function(a,l,h){return a.type==="Feature"?au(ga(a,l,h),a.properties):a.type==="FeatureCollection"?{type:"FeatureCollection",features:a.features.map(function(u){var g=ga(u,l,h);return ou.indexOf(g.type)>-1?au(g,u.properties):g})}:a.type==="GeometryCollection"?{type:"GeometryCollection",geometries:a.geometries.map(function(u){return ou.indexOf(u.type)>-1?ga({type:"Feature",geometry:u},l,h):u})}:a};function ga(a,l,h){return a.geometry.type==="LineString"?{type:"LineString",coordinates:uu(a.geometry.coordinates,l,h)}:a.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:a.geometry.coordinates.map(function(u){return uu(u,l,h)})}:a.geometry.type==="Polygon"?{type:"Polygon",coordinates:lu(a.geometry.coordinates,l,h)}:a.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:a.geometry.coordinates.map(function(u){return lu(u,l,h)})}:a}function dg(a){return a.length<3?!1:!(a.length===3&&a[2][0]===a[0][0]&&a[2][1]===a[0][1])}function au(a,l){return{type:"Feature",geometry:a,properties:l}}function uu(a,l,h){return Ia(a.map(function(u){return{x:u[0],y:u[1]}}),l,h).map(function(u){return[u.x,u.y]})}function lu(a,l,h){return a.map(function(u){var g=u.map(function(p){return{x:p[0],y:p[1]}});if(g.length<4)throw new Error("Invalid polygon");for(var d=Ia(g,l,h).map(function(p){return[p.x,p.y]});!dg(d);)l-=l*.01,d=Ia(g,l,h).map(function(p){return[p.x,p.y]});return(d[d.length-1][0]!==d[0][0]||d[d.length-1][1]!==d[0][1])&&d.push(d[0]),d})}var fo=function(a){this.points=a.points||[],this.duration=a.duration||1e4,this.sharpness=a.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=a.stepLength||60,this.length=this.points.length,this.delay=0;for(var l=0;l<this.length;l++)this.points[l].z=this.points[l].z||0;for(var l=0;l<this.length-1;l++){var h=this.points[l],u=this.points[l+1];this.centers.push({x:(h.x+u.x)/2,y:(h.y+u.y)/2,z:(h.z+u.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var l=0;l<this.centers.length-1;l++){var h=this.centers[l],u=this.centers[l+1],g=this.points[l+1].x-(this.centers[l].x+this.centers[l+1].x)/2,d=this.points[l+1].y-(this.centers[l].y+this.centers[l+1].y)/2,p=this.points[l+1].z-(this.centers[l].y+this.centers[l+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l].x+g),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l].y+d),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l].z+p)},{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l+1].x+g),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l+1].y+d),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l+1].z+p)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};fo.prototype.cacheSteps=function(a){var l=[],h=this.pos(0);l.push(0);for(var u=0;u<this.duration;u+=10){var g=this.pos(u),d=Math.sqrt((g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y)+(g.z-h.z)*(g.z-h.z));d>a&&(l.push(u),h=g)}return l};fo.prototype.vector=function(a){var l=this.pos(a+10),h=this.pos(a-10);return{angle:180*Math.atan2(l.y-h.y,l.x-h.x)/3.14,speed:Math.sqrt((h.x-l.x)*(h.x-l.x)+(h.y-l.y)*(h.y-l.y)+(h.z-l.z)*(h.z-l.z))}};fo.prototype.pos=function(a){function l(p,v,I,x,C){var w=function(T){var E=T*T,z=E*T;return[z,3*E*(1-T),3*T*(1-T)*(1-T),(1-T)*(1-T)*(1-T)]},S=w(p),F={x:C.x*S[0]+x.x*S[1]+I.x*S[2]+v.x*S[3],y:C.y*S[0]+x.y*S[1]+I.y*S[2]+v.y*S[3],z:C.z*S[0]+x.z*S[1]+I.z*S[2]+v.z*S[3]};return F}var h=a-this.delay;h<0&&(h=0),h>this.duration&&(h=this.duration-1);var u=h/this.duration;if(u>=1)return this.points[this.length-1];var g=Math.floor((this.points.length-1)*u),d=(this.length-1)*u-g;return l(d,this.points[g],this.controls[g][1],this.controls[g+1][0],this.points[g+1])};var pg=fo,mg=it.lineString,vg=pg,yg=function(a,l,h){var u=mg([]);u.properties=a.properties;for(var g=new vg({points:a.geometry.coordinates.map(function(v){return{x:v[0],y:v[1]}}),duration:l,sharpness:h}),d=0;d<g.duration;d+=10){var p=g.pos(d);Math.floor(d/100)%2===0&&u.geometry.coordinates.push([p.x,p.y])}return u},xg=Yr,Eg=function(a,l,h,u){return a=JSON.parse(JSON.stringify(a)),l=JSON.parse(JSON.stringify(l)),a.features.forEach(function(g){g.properties||(g.properties={}),l.features.forEach(function(d){if(g.properties[u]===void 0){var p=xg(g,d);p&&(g.properties[u]=d.properties[h])}})}),a},Ig=it.featureCollection,Ng=function(a,l){var h=Ig(Cg(a.features,l));return h};function Cg(a,l){for(var h=a.slice(0),u=a.length,g=u-l,d,p;u-- >g;)p=Math.floor((u+1)*Math.random()),d=h[p],h[p]=h[u],h[u]=d;return h.slice(g)}var wg=it.polygon,Uu=function(a){var l=[a[0],a[1]],h=[a[0],a[3]],u=[a[2],a[3]],g=[a[2],a[1]];return wg([[l,g,u,h,l]])},Sg=co,Lg=Uu,Rg=function(a){return Lg(Sg(a))},hu=Jn.getCoord,po=function(a,l){var h=Math.PI/180,u=180/Math.PI,g=hu(a),d=hu(l),p=h*g[0],v=h*d[0],I=h*g[1],x=h*d[1],C=Math.sin(v-p)*Math.cos(x),w=Math.cos(I)*Math.sin(x)-Math.sin(I)*Math.cos(x)*Math.cos(v-p),S=u*Math.atan2(C,w);return S},Tg=Jn.getCoord,Xu=it,Pg=Xu.point,Og=Xu.distanceToRadians,mo=function(a,l,h,u){var g=Math.PI/180,d=180/Math.PI,p=Tg(a),v=g*p[0],I=g*p[1],x=g*h,C=Og(l,u),w=Math.asin(Math.sin(I)*Math.cos(C)+Math.cos(I)*Math.sin(C)*Math.cos(x)),S=v+Math.atan2(Math.sin(x)*Math.sin(C)*Math.cos(I),Math.cos(C)-Math.sin(I)*Math.sin(w));return Pg([d*S,d*w])},Mg=po,_g=mo,bg=Te,Ag=function(a,l){var h=bg(a,l,"miles"),u=Mg(a,l),g=_g(a,h/2,u,"miles");return g},Dg=Gg,Fg={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Gg(a){if(!a||!a.type)return null;var l=Fg[a.type];if(!l)return null;if(l==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:a}]};if(l==="feature")return{type:"FeatureCollection",features:[a]};if(l==="featurecollection")return a}var Yu=it,qg=Yu.featureCollection,cu=vr,gu=Dg,Bg=function(a,l,h){var u=Yu.distanceToDegrees(l,h),g=gu(a),d=gu(qg(g.features.map(function(p){return Vg(p,u)})));if(d.features.length>1)return d;if(d.features.length===1)return d.features[0]};function Vg(a,l){var h=new cu.io.GeoJSONReader,u=h.read(a.geometry),g=u.buffer(l),d=new cu.io.GeoJSONWriter;return g=d.write(g),{type:"Feature",geometry:g,properties:{}}}var zg=co,kg=it.point,Hu=function(a){var l=zg(a),h=(l[0]+l[2])/2,u=(l[1]+l[3])/2;return kg([h,u])},Ug=Ge.coordEach,Xg=it.point,Yg=function(a){var l=0,h=0,u=0;return Ug(a,function(g){l+=g[0],h+=g[1],u++},!0),Xg([l/u,h/u])},Hg=Ge,Wg=function(a){var l={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},h=Object.keys(l).reduce(function(g,d){return g[d.replace("Multi","")]=d,g},{});function u(g,d,p){p?l[d].coordinates=l[d].coordinates.concat(g.geometry.coordinates):l[d].coordinates.push(g.geometry.coordinates),l[d].properties.push(g.properties)}return Hg.featureEach(a,function(g){g.geometry&&(l[g.geometry.type]?u(g,g.geometry.type,!0):h[g.geometry.type]&&u(g,h[g.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(l).filter(function(g){return l[g].coordinates.length}).sort().map(function(g){return{type:"Feature",properties:{collectedProperties:l[g].properties},geometry:{type:g,coordinates:l[g].coordinates}}})}},$g=it.featureCollection,Zg=Ge.coordEach,Jg=it.point,Wu=function(a){var l=[];return Zg(a,function(h){l.push(Jg(h))}),$g(l)},uo={},Kg={get exports(){return uo},set exports(a){uo=a}};Kg.exports=vo;uo.default=vo;function vo(a,l,h){h=h||2;var u=l&&l.length,g=u?l[0]*h:a.length,d=$u(a,0,g,h,!0),p=[];if(!d||d.next===d.prev)return p;var v,I,x,C,w,S,F;if(u&&(d=nf(a,l,d,h)),a.length>80*h){v=x=a[0],I=C=a[1];for(var T=h;T<g;T+=h)w=a[T],S=a[T+1],w<v&&(v=w),S<I&&(I=S),w>x&&(x=w),S>C&&(C=S);F=Math.max(x-v,C-I),F=F!==0?32767/F:0}return zi(d,p,h,v,I,F,0),p}function $u(a,l,h,u,g){var d,p;if(g===wa(a,l,h,u)>0)for(d=l;d<h;d+=u)p=fu(d,a[d],a[d+1],p);else for(d=h-u;d>=l;d-=u)p=fu(d,a[d],a[d+1],p);return p&&yo(p,p.next)&&(Ui(p),p=p.next),p}function yr(a,l){if(!a)return a;l||(l=a);var h=a,u;do if(u=!1,!h.steiner&&(yo(h,h.next)||At(h.prev,h,h.next)===0)){if(Ui(h),h=l=h.prev,h===h.next)break;u=!0}else h=h.next;while(u||h!==l);return l}function zi(a,l,h,u,g,d,p){if(a){!p&&d&&uf(a,u,g,d);for(var v=a,I,x;a.prev!==a.next;){if(I=a.prev,x=a.next,d?Qg(a,u,g,d):jg(a)){l.push(I.i/h|0),l.push(a.i/h|0),l.push(x.i/h|0),Ui(a),a=x.next,v=x.next;continue}if(a=x,a===v){p?p===1?(a=tf(yr(a),l,h),zi(a,l,h,u,g,d,2)):p===2&&ef(a,l,h,u,g,d):zi(yr(a),l,h,u,g,d,1);break}}}}function jg(a){var l=a.prev,h=a,u=a.next;if(At(l,h,u)>=0)return!1;for(var g=l.x,d=h.x,p=u.x,v=l.y,I=h.y,x=u.y,C=g<d?g<p?g:p:d<p?d:p,w=v<I?v<x?v:x:I<x?I:x,S=g>d?g>p?g:p:d>p?d:p,F=v>I?v>x?v:x:I>x?I:x,T=u.next;T!==l;){if(T.x>=C&&T.x<=S&&T.y>=w&&T.y<=F&&Ur(g,v,d,I,p,x,T.x,T.y)&&At(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function Qg(a,l,h,u){var g=a.prev,d=a,p=a.next;if(At(g,d,p)>=0)return!1;for(var v=g.x,I=d.x,x=p.x,C=g.y,w=d.y,S=p.y,F=v<I?v<x?v:x:I<x?I:x,T=C<w?C<S?C:S:w<S?w:S,E=v>I?v>x?v:x:I>x?I:x,z=C>w?C>S?C:S:w>S?w:S,H=Na(F,T,l,h,u),V=Na(E,z,l,h,u),L=a.prevZ,N=a.nextZ;L&&L.z>=H&&N&&N.z<=V;){if(L.x>=F&&L.x<=E&&L.y>=T&&L.y<=z&&L!==g&&L!==p&&Ur(v,C,I,w,x,S,L.x,L.y)&&At(L.prev,L,L.next)>=0||(L=L.prevZ,N.x>=F&&N.x<=E&&N.y>=T&&N.y<=z&&N!==g&&N!==p&&Ur(v,C,I,w,x,S,N.x,N.y)&&At(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;L&&L.z>=H;){if(L.x>=F&&L.x<=E&&L.y>=T&&L.y<=z&&L!==g&&L!==p&&Ur(v,C,I,w,x,S,L.x,L.y)&&At(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;N&&N.z<=V;){if(N.x>=F&&N.x<=E&&N.y>=T&&N.y<=z&&N!==g&&N!==p&&Ur(v,C,I,w,x,S,N.x,N.y)&&At(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function tf(a,l,h){var u=a;do{var g=u.prev,d=u.next.next;!yo(g,d)&&Zu(g,u,u.next,d)&&ki(g,d)&&ki(d,g)&&(l.push(g.i/h|0),l.push(u.i/h|0),l.push(d.i/h|0),Ui(u),Ui(u.next),u=a=d),u=u.next}while(u!==a);return yr(u)}function ef(a,l,h,u,g,d){var p=a;do{for(var v=p.next.next;v!==p.prev;){if(p.i!==v.i&&cf(p,v)){var I=Ju(p,v);p=yr(p,p.next),I=yr(I,I.next),zi(p,l,h,u,g,d,0),zi(I,l,h,u,g,d,0);return}v=v.next}p=p.next}while(p!==a)}function nf(a,l,h,u){var g=[],d,p,v,I,x;for(d=0,p=l.length;d<p;d++)v=l[d]*u,I=d<p-1?l[d+1]*u:a.length,x=$u(a,v,I,u,!1),x===x.next&&(x.steiner=!0),g.push(hf(x));for(g.sort(rf),d=0;d<g.length;d++)h=sf(g[d],h);return h}function rf(a,l){return a.x-l.x}function sf(a,l){var h=of(a,l);if(!h)return l;var u=Ju(h,a);return yr(u,u.next),yr(h,h.next)}function of(a,l){var h=l,u=a.x,g=a.y,d=-1/0,p;do{if(g<=h.y&&g>=h.next.y&&h.next.y!==h.y){var v=h.x+(g-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(v<=u&&v>d&&(d=v,p=h.x<h.next.x?h:h.next,v===u))return p}h=h.next}while(h!==l);if(!p)return null;var I=p,x=p.x,C=p.y,w=1/0,S;h=p;do u>=h.x&&h.x>=x&&u!==h.x&&Ur(g<C?u:d,g,x,C,g<C?d:u,g,h.x,h.y)&&(S=Math.abs(g-h.y)/(u-h.x),ki(h,a)&&(S<w||S===w&&(h.x>p.x||h.x===p.x&&af(p,h)))&&(p=h,w=S)),h=h.next;while(h!==I);return p}function af(a,l){return At(a.prev,a,l.prev)<0&&At(l.next,a,a.next)<0}function uf(a,l,h,u){var g=a;do g.z===0&&(g.z=Na(g.x,g.y,l,h,u)),g.prevZ=g.prev,g.nextZ=g.next,g=g.next;while(g!==a);g.prevZ.nextZ=null,g.prevZ=null,lf(g)}function lf(a){var l,h,u,g,d,p,v,I,x=1;do{for(h=a,a=null,d=null,p=0;h;){for(p++,u=h,v=0,l=0;l<x&&(v++,u=u.nextZ,!!u);l++);for(I=x;v>0||I>0&&u;)v!==0&&(I===0||!u||h.z<=u.z)?(g=h,h=h.nextZ,v--):(g=u,u=u.nextZ,I--),d?d.nextZ=g:a=g,g.prevZ=d,d=g;h=u}d.nextZ=null,x*=2}while(p>1);return a}function Na(a,l,h,u,g){return a=(a-h)*g|0,l=(l-u)*g|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,a|l<<1}function hf(a){var l=a,h=a;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==a);return h}function Ur(a,l,h,u,g,d,p,v){return(g-p)*(l-v)>=(a-p)*(d-v)&&(a-p)*(u-v)>=(h-p)*(l-v)&&(h-p)*(d-v)>=(g-p)*(u-v)}function cf(a,l){return a.next.i!==l.i&&a.prev.i!==l.i&&!gf(a,l)&&(ki(a,l)&&ki(l,a)&&ff(a,l)&&(At(a.prev,a,l.prev)||At(a,l.prev,l))||yo(a,l)&&At(a.prev,a,a.next)>0&&At(l.prev,l,l.next)>0)}function At(a,l,h){return(l.y-a.y)*(h.x-l.x)-(l.x-a.x)*(h.y-l.y)}function yo(a,l){return a.x===l.x&&a.y===l.y}function Zu(a,l,h,u){var g=no(At(a,l,h)),d=no(At(a,l,u)),p=no(At(h,u,a)),v=no(At(h,u,l));return!!(g!==d&&p!==v||g===0&&eo(a,h,l)||d===0&&eo(a,u,l)||p===0&&eo(h,a,u)||v===0&&eo(h,l,u))}function eo(a,l,h){return l.x<=Math.max(a.x,h.x)&&l.x>=Math.min(a.x,h.x)&&l.y<=Math.max(a.y,h.y)&&l.y>=Math.min(a.y,h.y)}function no(a){return a>0?1:a<0?-1:0}function gf(a,l){var h=a;do{if(h.i!==a.i&&h.next.i!==a.i&&h.i!==l.i&&h.next.i!==l.i&&Zu(h,h.next,a,l))return!0;h=h.next}while(h!==a);return!1}function ki(a,l){return At(a.prev,a,a.next)<0?At(a,l,a.next)>=0&&At(a,a.prev,l)>=0:At(a,l,a.prev)<0||At(a,a.next,l)<0}function ff(a,l){var h=a,u=!1,g=(a.x+l.x)/2,d=(a.y+l.y)/2;do h.y>d!=h.next.y>d&&h.next.y!==h.y&&g<(h.next.x-h.x)*(d-h.y)/(h.next.y-h.y)+h.x&&(u=!u),h=h.next;while(h!==a);return u}function Ju(a,l){var h=new Ca(a.i,a.x,a.y),u=new Ca(l.i,l.x,l.y),g=a.next,d=l.prev;return a.next=l,l.prev=a,h.next=g,g.prev=h,u.next=h,h.prev=u,d.next=u,u.prev=d,u}function fu(a,l,h,u){var g=new Ca(a,l,h);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function Ui(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Ca(a,l,h){this.i=a,this.x=l,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}vo.deviation=function(a,l,h,u){var g=l&&l.length,d=g?l[0]*h:a.length,p=Math.abs(wa(a,0,d,h));if(g)for(var v=0,I=l.length;v<I;v++){var x=l[v]*h,C=v<I-1?l[v+1]*h:a.length;p-=Math.abs(wa(a,x,C,h))}var w=0;for(v=0;v<u.length;v+=3){var S=u[v]*h,F=u[v+1]*h,T=u[v+2]*h;w+=Math.abs((a[S]-a[T])*(a[F+1]-a[S+1])-(a[S]-a[F])*(a[T+1]-a[S+1]))}return p===0&&w===0?0:Math.abs((w-p)/p)};function wa(a,l,h,u){for(var g=0,d=l,p=h-u;d<h;d+=u)g+=(a[p]-a[d])*(a[d+1]+a[p+1]),p=d;return g}vo.flatten=function(a){for(var l=a[0][0].length,h={vertices:[],holes:[],dimensions:l},u=0,g=0;g<a.length;g++){for(var d=0;d<a[g].length;d++)for(var p=0;p<l;p++)h.vertices.push(a[g][d][p]);g>0&&(u+=a[g-1].length,h.holes.push(u))}return h};var df=it.polygon,pf=uo,mf=function(a){if(!a.geometry||a.geometry.type!=="Polygon"&&a.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var l={type:"FeatureCollection",features:[]};return a.geometry.type==="Polygon"?l.features=du(a.geometry.coordinates):a.geometry.coordinates.forEach(function(h){l.features=l.features.concat(du(h))}),l};function du(a){var l=vf(a),h=2,u=pf(l.vertices,l.holes,h),g=[],d=[];u.forEach(function(I,x){var C=u[x];d.push([l.vertices[C*h],l.vertices[C*h+1]])});for(var p=0;p<d.length;p+=3){var v=d.slice(p,p+3);v.push(d[p]),g.push(df([v]))}return g}function vf(a){for(var l=a[0][0].length,h={vertices:[],holes:[],dimensions:l},u=0,g=0;g<a.length;g++){for(var d=0;d<a[g].length;d++)for(var p=0;p<l;p++)h.vertices.push(a[g][d][p]);g>0&&(u+=a[g-1].length,h.holes.push(u))}return h}var pu=vr,yf=function(l,h){var u,g;l.type==="Feature"?u=l.geometry:u=l,h.type==="Feature"?g=h.geometry:g=h;var d=new pu.io.GeoJSONReader,p=d.read(JSON.stringify(u)),v=d.read(JSON.stringify(g)),I=p.intersection(v);if(!I.isEmpty()){var x=new pu.io.GeoJSONWriter,C=x.write(I);return{type:"Feature",properties:{},geometry:C}}},xf=Te,Ef=function(a,l){for(var h,u=1/0,g=0;g<l.features.length;g++){var d=xf(a,l.features[g],"miles");d<u&&(h=l.features[g],u=d)}return h},Xr={},If={get exports(){return Xr},set exports(a){Xr=a}};If.exports=function(){throw new Error("call .point() or .polygon() instead")};function ba(a){return a?Cf(a):[ju(),Qu()]}Xr.position=ba;Xr.point=function(a,l){var h=[];for(i=0;i<a;i++)h.push(tl(l?mu(ba(l)):mu()));return el(h)};Xr.polygon=function(a,l,h,u){typeof l!="number"&&(l=10),typeof h!="number"&&(h=10);var g=[];for(i=0;i<a;i++){var d=[],p=Array.apply(null,new Array(l+1)).map(Math.random);p.forEach(v),p.forEach(I),d[d.length-1]=d[0],d=d.map(Nf(ba(u))),g.push(tl(wf([d])))}function v(x,C,w){w[C]=C>0?x+w[C-1]:x}function I(x,C){x=x*2*Math.PI/p[p.length-1];var w=Math.random();d.push([w*h*Math.sin(x),w*h*Math.cos(x)])}return el(g)};function Nf(a){return function(l,h){return[l[0]+a[0],l[1]+a[1]]}}function Ku(){return Math.random()-.5}function ju(){return Ku()*360}function Qu(){return Ku()*180}function mu(a){return{type:"Point",coordinates:a||[ju(),Qu()]}}function Cf(a){return[Math.random()*(a[2]-a[0])+a[0],Math.random()*(a[3]-a[1])+a[1]]}function wf(a){return{type:"Polygon",coordinates:a}}function tl(a){return{type:"Feature",geometry:a,properties:{}}}function el(a){return{type:"FeatureCollection",features:a}}var vu=Xr,Sf=function(a,l,h){switch(h=h||{},l=l||1,a){case"point":case"points":case void 0:return vu.point(l,h.bbox);case"polygon":case"polygons":return vu.polygon(l,h.num_vertices,h.max_radial_length,h.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},Lf=it.point,Rf=function(a){var l,h={type:"FeatureCollection",features:[]};return a.type==="Feature"?l=a.geometry:l=a,l.coordinates.forEach(function(u){l.coordinates.forEach(function(g){for(var d=0;d<u.length-1;d++)for(var p=0;p<g.length-1;p++)if(!(u===g&&(Math.abs(d-p)===1||Math.abs(d-p)===u.length-2))){var v=Tf(u[d][0],u[d][1],u[d+1][0],u[d+1][1],g[p][0],g[p][1],g[p+1][0],g[p+1][1]);v&&h.features.push(Lf([v[0],v[1]]))}})}),h};function Tf(a,l,h,u,g,d,p,v){var I,x,C,w,S,F={x:null,y:null,onLine1:!1,onLine2:!1};return I=(v-d)*(h-a)-(p-g)*(u-l),I===0?F.x!==null&&F.y!==null?F:!1:(x=l-d,C=a-g,w=(p-g)*x-(v-d)*C,S=(h-a)*x-(u-l)*C,x=w/I,C=S/I,F.x=a+x*(h-a),F.y=l+x*(u-l),x>=0&&x<=1&&(F.onLine1=!0),C>=0&&C<=1&&(F.onLine2=!0),F.onLine1&&F.onLine2?[F.x,F.y]:!1)}var yu=it.featureCollection,Pf=Hu,Of=Te,Mf=Yr,_f=Wu;function bf(a){a.type!=="FeatureCollection"&&(a.type!=="Feature"&&(a={type:"Feature",geometry:a,properties:{}}),a=yu([a]));for(var l=Pf(a),h=!1,u=0;!h&&u<a.features.length;){var g=a.features[u].geometry,d,p,v,I,x,C,w,S=!1;if(g.type==="Point")l.geometry.coordinates[0]===g.coordinates[0]&&l.geometry.coordinates[1]===g.coordinates[1]&&(h=!0);else if(g.type==="MultiPoint"){var F=!1;for(w=0;!F&&w<g.coordinates.length;)l.geometry.coordinates[0]===g.coordinates[w][0]&&l.geometry.coordinates[1]===g.coordinates[w][1]&&(h=!0,F=!0),w++}else if(g.type==="LineString")for(w=0;!S&&w<g.coordinates.length-1;)d=l.geometry.coordinates[0],p=l.geometry.coordinates[1],v=g.coordinates[w][0],I=g.coordinates[w][1],x=g.coordinates[w+1][0],C=g.coordinates[w+1][1],xu(d,p,v,I,x,C)&&(S=!0,h=!0),w++;else if(g.type==="MultiLineString")for(var T=0;T<g.coordinates.length;){S=!1,w=0;for(var E=g.coordinates[T];!S&&w<E.length-1;)d=l.geometry.coordinates[0],p=l.geometry.coordinates[1],v=E[w][0],I=E[w][1],x=E[w+1][0],C=E[w+1][1],xu(d,p,v,I,x,C)&&(S=!0,h=!0),w++;T++}else if(g.type==="Polygon"||g.type==="MultiPolygon"){var z={type:"Feature",geometry:g,properties:{}};Mf(l,z)&&(h=!0)}u++}if(h)return l;var H=yu([]);for(u=0;u<a.features.length;u++)H.features=H.features.concat(_f(a.features[u]).features);var V,L=1/0;for(u=0;u<H.features.length;u++){var N=Of(l,H.features[u],"miles");N<L&&(L=N,V=H.features[u])}return V}function xu(a,l,h,u,g,d){var p=Math.sqrt((g-h)*(g-h)+(d-u)*(d-u)),v=Math.sqrt((a-h)*(a-h)+(l-u)*(l-u)),I=Math.sqrt((g-a)*(g-a)+(d-l)*(d-l));if(p===v+I)return!0}var Af=bf,Aa={},xo={};xo.RADIUS=6378137;xo.FLATTENING=1/298.257223563;xo.POLAR_RADIUS=63567523142e-4;var Eu=xo;Aa.geometry=nl;Aa.ring=Sa;function nl(a){var l=0,h;switch(a.type){case"Polygon":return Iu(a.coordinates);case"MultiPolygon":for(h=0;h<a.coordinates.length;h++)l+=Iu(a.coordinates[h]);return l;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(h=0;h<a.geometries.length;h++)l+=nl(a.geometries[h]);return l}}function Iu(a){var l=0;if(a&&a.length>0){l+=Math.abs(Sa(a[0]));for(var h=1;h<a.length;h++)l-=Math.abs(Sa(a[h]))}return l}function Sa(a){var l,h,u,g,d,p,v=0,I=a.length;if(I>2){for(i=0;i<I;i++)i===I-2?(g=I-2,d=I-1,p=0):i===I-1?(g=I-1,d=0,p=1):(g=i,d=i+1,p=i+2),l=a[g],h=a[d],u=a[p],v+=(fa(u[0])-fa(l[0]))*Math.sin(fa(h[1]));v=v*Eu.RADIUS*Eu.RADIUS/2}return v}function fa(a){return a*Math.PI/180}var da=Aa.geometry;function Df(a){if(a.type==="FeatureCollection"){for(var l=0,h=0;l<a.features.length;l++)a.features[l].geometry&&(h+=da(a.features[l].geometry));return h}else return a.type==="Feature"?da(a.geometry):da(a)}var Ff=Df,Gf=Te,Nu=it.point,qf=po,Bf=mo,Vf=function(a,l,h){var u;if(a.type==="Feature")u=a.geometry.coordinates;else if(a.type==="LineString")u=a.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var g=0,d=0;d<u.length&&!(l>=g&&d===u.length-1);d++)if(g>=l){var p=l-g;if(p){var v=qf(u[d],u[d-1])-180,I=Bf(u[d],p,v,h);return I}else return Nu(u[d])}else g+=Gf(u[d],u[d+1],h);return Nu(u[u.length-1])},zf=Te,Cu=it.point,kf=function a(l,h){if(l.type==="FeatureCollection")return l.features.reduce(function(v,I){return v+a(I,h)},0);var u=l.type==="Feature"?l.geometry:l,g,d;if(u.type==="LineString")return pa(u.coordinates,h);if(u.type==="Polygon"||u.type==="MultiLineString"){for(g=0,d=0;d<u.coordinates.length;d++)g+=pa(u.coordinates[d],h);return g}else if(l.type==="MultiPolygon"){for(g=0,d=0;d<u.coordinates.length;d++)for(var p=0;p<u.coordinates[d].length;p++)g+=pa(u.coordinates[d][p],h);return g}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function pa(a,l){for(var h=0,u=Cu(a[0]),g=Cu(a[0]),d,p=1;p<a.length;p++)g.geometry.coordinates=a[p],h+=zf(u,g,l),d=u,u=g,g=d;return h}var ma=Te,ro=it.point,Uf=po,wu=mo,rl=function(a,l){var h;if(a.type==="Feature")h=a.geometry.coordinates;else if(a.type==="LineString")h=a.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return Xf(l,h)};function Xf(a,l){for(var h="miles",u=ro([1/0,1/0],{dist:1/0}),g=0;g<l.length-1;g++){var d=ro(l[g]),p=ro(l[g+1]);d.properties.dist=ma(a,d,h),p.properties.dist=ma(a,p,h);var v=Math.max(d.properties.dist,p.properties.dist),I=Uf(d,p),x=wu(a,v,I+90,h),C=wu(a,v,I-90,h),w=Yf(x.geometry.coordinates[0],x.geometry.coordinates[1],C.geometry.coordinates[0],C.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1]),S;w&&(S=ro(w),S.properties.dist=ma(a,S,h)),d.properties.dist<u.properties.dist&&(u=d,u.properties.index=g),p.properties.dist<u.properties.dist&&(u=p,u.properties.index=g),S&&S.properties.dist<u.properties.dist&&(u=S,u.properties.index=g)}return u}function Yf(a,l,h,u,g,d,p,v){var I,x,C,w,S,F={x:null,y:null,onLine1:!1,onLine2:!1};return I=(v-d)*(h-a)-(p-g)*(u-l),I===0?F.x!==null&&F.y!==null?F:!1:(x=l-d,C=a-g,w=(p-g)*x-(v-d)*C,S=(h-a)*x-(u-l)*C,x=w/I,C=S/I,F.x=a+x*(h-a),F.y=l+x*(u-l),x>0&&x<1&&(F.onLine1=!0),C>0&&C<1&&(F.onLine2=!0),F.onLine1&&F.onLine2?[F.x,F.y]:!1)}var Hf=it.lineString,Su=rl,Wf=function(l,h,u){var g;if(u.type==="Feature")g=u.geometry.coordinates;else if(u.type==="LineString")g=u.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var d=Su(u,l),p=Su(u,h),v;d.properties.index<=p.properties.index?v=[d,p]:v=[p,d];for(var I=Hf([v[0].geometry.coordinates],{}),x=v[0].properties.index+1;x<v[1].properties.index+1;x++)I.geometry.coordinates.push(g[x]);return I.geometry.coordinates.push(v[1].geometry.coordinates),I},Gi=it.point,$f=it.featureCollection,Lu=Te,Zf=function(l,h,u){for(var g=$f([]),d=h/Lu(Gi([l[0],l[1]]),Gi([l[2],l[1]]),u),p=d*(l[2]-l[0]),v=h/Lu(Gi([l[0],l[1]]),Gi([l[0],l[3]]),u),I=v*(l[3]-l[1]),x=l[0];x<=l[2];){for(var C=l[1];C<=l[3];)g.features.push(Gi([x,C])),C+=I;x+=p}return g},Jf=it.featureCollection,io=it.point,Kf=it.polygon,Ru=Te,jf=function(l,h,u){for(var g=Jf([]),d=h/Ru(io([l[0],l[1]]),io([l[2],l[1]]),u),p=d*(l[2]-l[0]),v=h/Ru(io([l[0],l[1]]),io([l[0],l[3]]),u),I=v*(l[3]-l[1]),x=l[0];x<=l[2];){for(var C=l[1];C<=l[3];){var w=Kf([[[x,C],[x,C+I],[x+p,C+I],[x+p,C],[x,C]]]);g.features.push(w),C+=I}x+=p}return g},Qf=it.featureCollection,Wn=it.polygon,Tu=Te,td=function(a,l,h){for(var u=Qf([]),g=l/Tu([a[0],a[1]],[a[2],a[1]],h),d=g*(a[2]-a[0]),p=l/Tu([a[0],a[1]],[a[0],a[3]],h),v=p*(a[3]-a[1]),I=0,x=a[0];x<=a[2];){for(var C=0,w=a[1];w<=a[3];)I%2===0&&C%2===0?u.features.push(Wn([[[x,w],[x,w+v],[x+d,w],[x,w]]]),Wn([[[x,w+v],[x+d,w+v],[x+d,w],[x,w+v]]])):I%2===0&&C%2===1?u.features.push(Wn([[[x,w],[x+d,w+v],[x+d,w],[x,w]]]),Wn([[[x,w],[x,w+v],[x+d,w+v],[x,w]]])):C%2===0&&I%2===1?u.features.push(Wn([[[x,w],[x,w+v],[x+d,w+v],[x,w]]]),Wn([[[x,w],[x+d,w+v],[x+d,w],[x,w]]])):C%2===1&&I%2===1&&u.features.push(Wn([[[x,w],[x,w+v],[x+d,w],[x,w]]]),Wn([[[x,w+v],[x+d,w+v],[x+d,w],[x,w+v]]])),w+=v,C++;I++,x+=d}return u},so=it.point,il=it.polygon,Pu=Te,ed=it.featureCollection,lo=[],ho=[];for(var va=0;va<6;va++){var Ou=2*Math.PI/6*va;lo.push(Math.cos(Ou)),ho.push(Math.sin(Ou))}var nd=function(l,h,u,g){var d=h/Pu(so([l[0],l[1]]),so([l[2],l[1]]),u),p=d*(l[2]-l[0]),v=h/Pu(so([l[0],l[1]]),so([l[0],l[3]]),u),I=v*(l[3]-l[1]),x=p/2,C=x*2,w=Math.sqrt(3)/2*I,S=l[2]-l[0],F=l[3]-l[1],T=3/4*C,E=w,z=S/(C-x/2),H=Math.ceil(z);Math.round(z)===H&&H++;var V=(H*T-x/2-S)/2-x/2,L=Math.ceil(F/w),N=(F-L*w)/2,M=L*w-F>w/2;M&&(N-=w/4);for(var W=ed([]),P=0;P<H;P++)for(var A=0;A<=L;A++){var O=P%2===1;if(!(A===0&&O)&&!(A===0&&M)){var B=P*T+l[0]-V,G=A*E+l[1]+N;O&&(G-=w/2),g?W.features.push.apply(W.features,id([B,G],p/2,I/2)):W.features.push(rd([B,G],p/2,I/2))}}return W};function rd(a,l,h){for(var u=[],g=0;g<6;g++){var d=a[0]+l*lo[g],p=a[1]+h*ho[g];u.push([d,p])}return u.push(u[0]),il([u])}function id(a,l,h){for(var u=[],g=0;g<6;g++){var d=[];d.push(a),d.push([a[0]+l*lo[g],a[1]+h*ho[g]]),d.push([a[0]+l*lo[(g+1)%6],a[1]+h*ho[(g+1)%6]]),d.push(a),u.push(il([d]))}return u}xh.exports={isolines:Jh,convex:Kc,within:tg,concave:og,difference:ag,collect:lg,flip:cg,simplify:fg,bezier:yg,tag:Eg,sample:Ng,envelope:Rg,square:bu,midpoint:Ag,buffer:Bg,center:Hu,centroid:Yg,combine:Wg,distance:Te,explode:Wu,bbox:co,tesselate:mf,bboxPolygon:Uu,inside:Yr,intersect:yf,nearest:Ef,planepoint:_u,random:Sf,tin:Ra,union:ku,bearing:po,destination:mo,kinks:Rf,pointOnSurface:Af,area:Ff,along:Vf,lineDistance:kf,lineSlice:Wf,pointOnLine:rl,pointGrid:Zf,squareGrid:jf,triangleGrid:td,hexGrid:nd};var Rn=it;Ze.point=Rn.point;Ze.polygon=Rn.polygon;Ze.lineString=Rn.lineString;Ze.multiPoint=Rn.multiPoint;Ze.multiPolygon=Rn.multiPolygon;Ze.multiLineString=Rn.multiLineString;Ze.feature=Rn.feature;Ze.featureCollection=Rn.featureCollection;Ze.geometryCollection=Rn.geometryCollection;function sd(a){let l,h,u,g,d,p,v,I,x,C,w,S,F,T,E,z,H,V,L,N,M,W;return{c(){l=fn("div"),h=fn("div"),u=fn("h1"),g=wn("All European countries are "),d=fn("strong"),p=wn("over"),v=wn(" the PM2.5 annual mean concentration recommendation of the World Health Organization"),I=Xa(),x=fn("div"),C=wn("Data Source: "),w=fn("a"),S=wn("data.worldbank.org"),F=fn("br"),T=wn(`
            Layout: `),E=fn("a"),z=wn("D3JS"),H=wn(", "),V=fn("a"),L=wn("geo2rect"),N=Xa(),M=fn("div"),W=sh("svg"),this.h()},l(P){l=dn(P,"DIV",{id:!0,class:!0});var A=pn(l);h=dn(A,"DIV",{id:!0,class:!0});var O=pn(h);u=dn(O,"H1",{class:!0});var B=pn(u);g=Sn(B,"All European countries are "),d=dn(B,"STRONG",{});var G=pn(d);p=Sn(G,"over"),G.forEach($e),v=Sn(B," the PM2.5 annual mean concentration recommendation of the World Health Organization"),B.forEach($e),I=Ya(O),x=dn(O,"DIV",{id:!0,class:!0});var m=pn(x);C=Sn(m,"Data Source: "),w=dn(m,"A",{href:!0});var X=pn(w);S=Sn(X,"data.worldbank.org"),X.forEach($e),F=dn(m,"BR",{}),T=Sn(m,`
            Layout: `),E=dn(m,"A",{href:!0});var nt=pn(E);z=Sn(nt,"D3JS"),nt.forEach($e),H=Sn(m,", "),V=dn(m,"A",{href:!0});var yt=pn(V);L=Sn(yt,"geo2rect"),yt.forEach($e),m.forEach($e),O.forEach($e),N=Ya(A),M=dn(A,"DIV",{id:!0});var Ct=pn(M);W=oh(Ct,"svg",{width:!0,height:!0});var bt=pn(W);bt.forEach($e),Ct.forEach($e),A.forEach($e),this.h()},h(){Re(u,"class","svelte-2gfzh5"),Re(w,"href","https://data.worldbank.org/indicator/EN.ATM.PM25.MC.M3?end=2017&start=2006&view=chart&year=2016"),Re(E,"href","https://d3js.org/"),Re(V,"href","https://github.com/sebastian-meier/d3.geo2rect"),Re(x,"id","data-source"),Re(x,"class","svelte-2gfzh5"),Re(h,"id","main-text"),Re(h,"class","svelte-2gfzh5"),Re(W,"width",sl),Re(W,"height",al),Re(M,"id","graph"),Re(l,"id","container"),Re(l,"class","svelte-2gfzh5")},m(P,A){ah(P,l,A),zt(l,h),zt(h,u),zt(u,g),zt(u,d),zt(d,p),zt(u,v),zt(h,I),zt(h,x),zt(x,C),zt(x,w),zt(w,S),zt(x,F),zt(x,T),zt(x,E),zt(E,z),zt(x,H),zt(x,V),zt(V,L),zt(l,N),zt(l,M),zt(M,W)},p:la,i:la,o:la,d(P){P&&$e(l)}}}const mn=2010,$n=2017,Ln=12,zr=5,sl=1300,al=900,oo=86,kr=86;function od(a,l,h){let{data:u}=l,g=u.data;const d=["LIE","FRO","AND","MCO","VAT"],p=["#dc3e3e","#f6a15e"],v=Ha().domain([mn,$n]).range([0,oo]),I=Ha().domain([2,44]).range([kr,0]);let x,C={width:sl,height:al,projection:dh(),duration:0,key(T){return T.properties.ISO3},grid:{ALB:{x:5,y:8},ARM:{x:9,y:6},AUS:{x:9,y:9},AUT:{x:4,y:5},AZE:{x:9,y:5},BEL:{x:2,y:3},BGR:{x:7,y:6},BIH:{x:5,y:6},BLR:{x:6,y:3},CHE:{x:3,y:4},CYP:{x:8,y:7},CZE:{x:4,y:4},DEU:{x:4,y:3},DNK:{x:4,y:2},ESP:{x:1,y:5},EST:{x:6,y:1},FIN:{x:6,y:0},FRA:{x:1,y:4},GBR:{x:1,y:2},GEO:{x:8,y:5},GRC:{x:6,y:8},HUN:{x:5,y:5},HRV:{x:4,y:6},IRL:{x:0,y:2},ISL:{x:0,y:0},ISR:{x:8,y:8},ITA:{x:3,y:5},KOS:{x:6,y:7},LTU:{x:6,y:2},LUX:{x:2,y:4},LVA:{x:7,y:2},MDA:{x:7,y:5},MKD:{x:7,y:7},MLT:{x:1,y:7},MNE:{x:5,y:7},NLD:{x:3,y:3},NOR:{x:4,y:0},POL:{x:5,y:3},PRT:{x:0,y:5},ROU:{x:6,y:5},RUS:{x:7,y:3},SMR:{x:2,y:6},SRB:{x:6,y:6},SVK:{x:5,y:4},SVN:{x:3,y:6},SWE:{x:5,y:0},UKR:{x:6,y:4},TUR:{x:8,y:6}}},w=new geo2rect.draw;console.log(w),uh(()=>{x=lh("svg"),yh(`${ch}/data/06/map-of-europe-master/GeoJSON/europe.geojson`).then(T=>{T.features=T.features.filter(H=>!d.includes(H.properties.ISO3));const E=T.features.map(H=>H.properties.NAME);g=g.filter(H=>E.includes(H["Country Name"]));let z=geo2rect.compute(T);w.config=C,w.data=z,w.svg=x.append("g"),w.toggle(),w.draw(),setTimeout(function(){Wa("path").each((H,V,L)=>{const N=H.properties.ISO3,M=H.properties.NAME;let W=x.node().getBoundingClientRect().x,P=x.node().getBoundingClientRect().y,{x:A,y:O}=L[V].getBoundingClientRect();A=A-W,O=O-P,S(N,M,A,O)}).attr("fill","white").attr("stroke","black"),Wa(".redbar").raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise().raise(),F()},10)})});function S(T,E,z,H){let V=x.append("g").classed("chart",!0).attr("transform",`translate(${z}, ${H})`);V.selectAll(".line").data(g).join("path").attr("fill","none").classed("redbar",L=>L["Country Name"]==E).attr("stroke",L=>L["Country Name"]==E?p[0]:"lightgray").attr("stroke-width",L=>L["Country Name"]==E?4:1).attr("opacity",L=>L["Country Name"]==E?1:.7).attr("d",function(L){let N=$a(mn,$n+1).map(M=>({year:M,value:L[M]}));for(let M of N)if(!M.value)return"";return L["Country Name"]==E?(N.forEach((M,W)=>{W<N.length-1&&V.append("line").attr("x1",v(M.year)).attr("y1",I(M.value)).attr("x2",v(N[W+1].year)).attr("y2",I(N[W+1].value)).attr("stroke",()=>N[W+1].value<=Ln?p[1]:p[0]).attr("stroke-width",4)}),""):ph().x(function(M){return v(M.year)}).y(function(M){return I(+M.value)})(N)}).classed("line",!0),V.append("line").attr("x1",v(mn)).attr("y1",I(Ln)).attr("x2",v($n)).attr("y2",I(Ln)).attr("stroke","black").attr("stroke-dasharray","6"),V.append("line").attr("x1",v(mn)).attr("y1",I(zr)).attr("x2",v($n)).attr("y2",I(zr)).attr("stroke","black").attr("stroke-dasharray","3"),V.append("text").text(T).attr("y",15).attr("x",2).attr("font-size","20px")}function F(){let T=v.copy().range([0,oo*2]).nice(),E=I.copy().range([kr*2,0]).nice(),z=x.append("g").attr("transform","translate(1000, 100)");z.append("rect").attr("width",oo*2).attr("height",oo*2).attr("fill","none").attr("stroke","black"),z.append("text").text("Code ISO3").attr("x",6).attr("y",30).attr("font-size","29px");let H=g.filter(L=>L["Country Name"]=="Lithuania")[0],V=$a(mn,$n+1).map(L=>({year:L,value:H[L]}));V.forEach((L,N)=>{N<V.length-1&&z.append("line").attr("x1",T(L.year)).attr("y1",E(L.value)).attr("x2",T(V[N+1].year)).attr("y2",E(V[N+1].value)).attr("stroke",()=>V[N+1].value<Ln?p[1]:p[0]).attr("stroke-width",3)}),z.append("line").attr("x1",T(mn)).attr("y1",E(Ln)).attr("x2",T($n)).attr("y2",E(Ln)).attr("stroke","black").attr("stroke-dasharray","6"),z.append("line").attr("x1",T(mn)).attr("y1",E(Ln)).attr("x2",T($n)).attr("y2",E(Ln)).attr("stroke","black").attr("stroke-dasharray","6"),z.append("line").attr("x1",T(mn)).attr("y1",E(zr)).attr("x2",T($n)).attr("y2",E(zr)).attr("stroke","black").attr("stroke-dasharray","3"),z.append("g").call(gh(T).tickValues([2010,2017]).tickFormat(L=>Math.round(L))),z.append("g").call(fh(E).tickValues([0,zr,12,40]).tickFormat(mh(",.0f"))),z.append("text").attr("x",T(mn)).attr("y",E(Ln)).text("*"),z.append("text").attr("x",T(mn)).attr("y",E(zr)).text("**"),z.append("text").attr("x",0).attr("y",kr*2+20).append("tspan").text("PM2.5 annual mean concentration"),z.append("text").attr("x",0).attr("y",kr*2+40).append("tspan").text("threshold (g/m3) given by "),z.append("text").attr("x",7).attr("y",kr*2+60).text("* ny.gov"),z.append("text").attr("x",0).attr("y",kr*2+80).text("** the World Health Organization (WHO)")}return a.$$set=T=>{"data"in T&&h(0,u=T.data)},[u]}class vd extends nh{constructor(l){super(),rh(this,l,od,sd,ih,{data:0})}}export{vd as default};
