import{S as be,i as Ee,s as Re,k as j,q as W,a as me,J as Ce,l as V,m as L,r as F,h as z,c as ge,K as Pe,n as _,p as Se,b as $e,H as O,C as ue,O as he,o as we}from"../chunks/index.2e204e96.js";import{s as De}from"../chunks/transform.3e593064.js";import{w as Me,c as T,a as He}from"../chunks/array.5d986d8c.js";import{p as pe,c as B,a as I,h as ye,e as k,t as re,s as K,m as de,b as xe,d as H,f as ve,g as Oe,i as Te}from"../chunks/math.66d62dd6.js";import{o as ke}from"../chunks/ordinal.9aa01bae.js";import{f as _e}from"../chunks/defaultLocale.c00e5010.js";function Ie(u){return u.innerRadius}function Ne(u){return u.outerRadius}function ze(u){return u.startAngle}function je(u){return u.endAngle}function Ve(u){return u&&u.padAngle}function Le(u,c,A,E,l,R,i,e){var h=A-u,o=E-c,t=i-l,v=e-R,n=v*h-t*o;if(!(n*n<k))return n=(t*(c-R)-v*(u-l))/n,[u+n*h,c+n*o]}function ee(u,c,A,E,l,R,i){var e=u-A,h=c-E,o=(i?R:-R)/K(e*e+h*h),t=o*h,v=-o*e,n=u+t,d=c+v,y=A+t,p=E+v,$=(n+y)/2,m=(d+p)/2,b=y-n,C=p-d,P=b*b+C*C,g=l-R,w=n*p-y*d,D=(C<0?-1:1)*K(Te(0,g*g*P-w*w)),S=(w*C-b*D)/P,a=(-w*b-C*D)/P,f=(w*C+b*D)/P,r=(-w*b+C*D)/P,M=S-$,s=a-m,x=f-$,q=r-m;return M*M+s*s>x*x+q*q&&(S=f,a=r),{cx:S,cy:a,x01:-t,y01:-v,x11:S*(l/g-1),y11:a*(l/g-1)}}function te(){var u=Ie,c=Ne,A=T(0),E=null,l=ze,R=je,i=Ve,e=null,h=Me(o);function o(){var t,v,n=+u.apply(this,arguments),d=+c.apply(this,arguments),y=l.apply(this,arguments)-ye,p=R.apply(this,arguments)-ye,$=xe(p-y),m=p>y;if(e||(e=t=h()),d<n&&(v=d,d=n,n=v),!(d>k))e.moveTo(0,0);else if($>re-k)e.moveTo(d*B(y),d*I(y)),e.arc(0,0,d,y,p,!m),n>k&&(e.moveTo(n*B(p),n*I(p)),e.arc(0,0,n,p,y,m));else{var b=y,C=p,P=y,g=p,w=$,D=$,S=i.apply(this,arguments)/2,a=S>k&&(E?+E.apply(this,arguments):K(n*n+d*d)),f=de(xe(d-n)/2,+A.apply(this,arguments)),r=f,M=f,s,x;if(a>k){var q=ve(a/n*I(S)),Q=ve(a/d*I(S));(w-=q*2)>k?(q*=m?1:-1,P+=q,g-=q):(w=0,P=g=(y+p)/2),(D-=Q*2)>k?(Q*=m?1:-1,b+=Q,C-=Q):(D=0,b=C=(y+p)/2)}var G=d*B(b),J=d*I(b),U=n*B(g),X=n*I(g);if(f>k){var Y=d*B(C),Z=d*I(C),ne=n*B(P),ae=n*I(P),N;if($<pe)if(N=Le(G,J,ne,ae,Y,Z,U,X)){var se=G-N[0],le=J-N[1],ie=Y-N[0],oe=Z-N[1],ce=1/I(Oe((se*ie+le*oe)/(K(se*se+le*le)*K(ie*ie+oe*oe)))/2),fe=K(N[0]*N[0]+N[1]*N[1]);r=de(f,(n-fe)/(ce-1)),M=de(f,(d-fe)/(ce+1))}else r=M=0}D>k?M>k?(s=ee(ne,ae,G,J,d,M,m),x=ee(Y,Z,U,X,d,M,m),e.moveTo(s.cx+s.x01,s.cy+s.y01),M<f?e.arc(s.cx,s.cy,M,H(s.y01,s.x01),H(x.y01,x.x01),!m):(e.arc(s.cx,s.cy,M,H(s.y01,s.x01),H(s.y11,s.x11),!m),e.arc(0,0,d,H(s.cy+s.y11,s.cx+s.x11),H(x.cy+x.y11,x.cx+x.x11),!m),e.arc(x.cx,x.cy,M,H(x.y11,x.x11),H(x.y01,x.x01),!m))):(e.moveTo(G,J),e.arc(0,0,d,b,C,!m)):e.moveTo(G,J),!(n>k)||!(w>k)?e.lineTo(U,X):r>k?(s=ee(U,X,Y,Z,n,-r,m),x=ee(G,J,ne,ae,n,-r,m),e.lineTo(s.cx+s.x01,s.cy+s.y01),r<f?e.arc(s.cx,s.cy,r,H(s.y01,s.x01),H(x.y01,x.x01),!m):(e.arc(s.cx,s.cy,r,H(s.y01,s.x01),H(s.y11,s.x11),!m),e.arc(0,0,n,H(s.cy+s.y11,s.cx+s.x11),H(x.cy+x.y11,x.cx+x.x11),m),e.arc(x.cx,x.cy,r,H(x.y11,x.x11),H(x.y01,x.x01),!m))):e.arc(0,0,n,g,P,m)}if(e.closePath(),t)return e=null,t+""||null}return o.centroid=function(){var t=(+u.apply(this,arguments)+ +c.apply(this,arguments))/2,v=(+l.apply(this,arguments)+ +R.apply(this,arguments))/2-pe/2;return[B(v)*t,I(v)*t]},o.innerRadius=function(t){return arguments.length?(u=typeof t=="function"?t:T(+t),o):u},o.outerRadius=function(t){return arguments.length?(c=typeof t=="function"?t:T(+t),o):c},o.cornerRadius=function(t){return arguments.length?(A=typeof t=="function"?t:T(+t),o):A},o.padRadius=function(t){return arguments.length?(E=t==null?null:typeof t=="function"?t:T(+t),o):E},o.startAngle=function(t){return arguments.length?(l=typeof t=="function"?t:T(+t),o):l},o.endAngle=function(t){return arguments.length?(R=typeof t=="function"?t:T(+t),o):R},o.padAngle=function(t){return arguments.length?(i=typeof t=="function"?t:T(+t),o):i},o.context=function(t){return arguments.length?(e=t??null,o):e},o}function qe(u,c){return c<u?-1:c>u?1:c>=u?0:NaN}function Be(u){return u}function Ge(){var u=Be,c=qe,A=null,E=T(0),l=T(re),R=T(0);function i(e){var h,o=(e=He(e)).length,t,v,n=0,d=new Array(o),y=new Array(o),p=+E.apply(this,arguments),$=Math.min(re,Math.max(-re,l.apply(this,arguments)-p)),m,b=Math.min(Math.abs($)/o,R.apply(this,arguments)),C=b*($<0?-1:1),P;for(h=0;h<o;++h)(P=y[d[h]=h]=+u(e[h],h,e))>0&&(n+=P);for(c!=null?d.sort(function(g,w){return c(y[g],y[w])}):A!=null&&d.sort(function(g,w){return A(e[g],e[w])}),h=0,v=n?($-o*C)/n:0;h<o;++h,p=m)t=d[h],P=y[t],m=p+(P>0?P*v:0)+C,y[t]={data:e[t],index:h,value:P,startAngle:p,endAngle:m,padAngle:b};return y}return i.value=function(e){return arguments.length?(u=typeof e=="function"?e:T(+e),i):u},i.sortValues=function(e){return arguments.length?(c=e,A=null,i):c},i.sort=function(e){return arguments.length?(A=e,c=null,i):A},i.startAngle=function(e){return arguments.length?(E=typeof e=="function"?e:T(+e),i):E},i.endAngle=function(e){return arguments.length?(l=typeof e=="function"?e:T(+e),i):l},i.padAngle=function(e){return arguments.length?(R=typeof e=="function"?e:T(+e),i):R},i}function Je(u){let c,A,E,l,R,i,e,h,o,t,v,n,d,y,p,$;return{c(){c=j("div"),A=j("div"),E=j("h1"),l=W("Atom composition of the human body"),R=me(),i=j("div"),e=W("Data Source: "),h=j("a"),o=W("Wikipedia"),t=W(`
            Layout: `),v=j("a"),n=W("D3JS"),d=j("br"),y=me(),p=j("div"),$=Ce("svg"),this.h()},l(m){c=V(m,"DIV",{id:!0,class:!0});var b=L(c);A=V(b,"DIV",{id:!0,class:!0});var C=L(A);E=V(C,"H1",{class:!0});var P=L(E);l=F(P,"Atom composition of the human body"),P.forEach(z),R=ge(C),i=V(C,"DIV",{id:!0,class:!0});var g=L(i);e=F(g,"Data Source: "),h=V(g,"A",{href:!0,style:!0});var w=L(h);o=F(w,"Wikipedia"),w.forEach(z),t=F(g,`
            Layout: `),v=V(g,"A",{href:!0});var D=L(v);n=F(D,"D3JS"),D.forEach(z),d=V(g,"BR",{}),g.forEach(z),C.forEach(z),y=ge(b),p=V(b,"DIV",{id:!0});var S=L(p);$=Pe(S,"svg",{width:!0,height:!0});var a=L($);a.forEach(z),S.forEach(z),b.forEach(z),this.h()},h(){_(E,"class","svelte-1g15iad"),_(h,"href","https://en.wikipedia.org/wiki/Composition_of_the_human_body"),Se(h,"padding-right","8px"),_(v,"href","https://d3js.org/"),_(i,"id","data-source"),_(i,"class","svelte-1g15iad"),_(A,"id","main-text"),_(A,"class","svelte-1g15iad"),_($,"width",u[0]),_($,"height",u[1]),_(p,"id","graph"),_(c,"id","container"),_(c,"class","svelte-1g15iad")},m(m,b){$e(m,c,b),O(c,A),O(A,E),O(E,l),O(A,R),O(A,i),O(i,e),O(i,h),O(h,o),O(i,t),O(i,v),O(v,n),O(i,d),O(c,y),O(c,p),O(p,$)},p:ue,i:ue,o:ue,d(m){m&&z(c)}}}const Ae=30;function Ke(u,c,A){let{data:E}=c,l=E.data;console.log(l);const R={bottom:20,left:60,right:120,top:20},i=1800-R.left-R.right,e=1e3-R.top-R.bottom,h=e/2.4-30,o=h/3,t=o*.2+h*.6,v=Ge().padAngle(.03),n=te().innerRadius(o).outerRadius(h),d=te().innerRadius(t).outerRadius(t),y=te().innerRadius(t*2.4).outerRadius(t*1.05),p=te().innerRadius(t*2.2).outerRadius(t);let $,m=l.map(g=>he(g.percentmass)),b=l.map(g=>he(g.percentatoms));const C=ke().domain(l.map(g=>g.Element)).range(["rgb(152,193,239)","rgb(204,200,123)","rgb(164,182,192)","rgb(173,157,157)","rgb(255,255,255)","rgb(162,206,153)","rgb(245,225,24)","rgb(220,126,91)","rgb(99,115,189)","rgb(121,198,201)","rgb(207,159,210)","rgb(107,107,107)"]);we(()=>{$=De("svg"),P()});function P(){let g=$.append("g").attr("transform",`translate(${i/2-i/4}, ${e/2})`);g.append("text").text("By mass").attr("font-weight","bold").attr("font-size","200%").attr("text-anchor","middle");let w=$.append("g").attr("transform",`translate(${i/2+i/4}, ${e/2})`);w.append("text").text("By number").attr("text-anchor","middle").attr("font-weight","bold").attr("font-size","200%"),w.append("text").text("of atoms").attr("text-anchor","middle").attr("font-weight","bold").attr("font-size","200%").attr("y","34"),g.append("g").attr("fill","#ccc").attr("stroke","#000").attr("stroke-width","1.5px").selectAll("path").data(v(m)).join("path").attr("d",n.cornerRadius(Ae)).attr("fill",(D,S)=>C(l[S].Element)),g.append("g").selectAll("text").data(v(m)).join(D=>{let S=D.append("g");return S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sodium"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sulfur","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>(n.centroid(a),0)).text((a,f)=>{let r=l[f].Element;return r=="Nitrogen"?"N":r=="Calcium"?"Ca":r=="Sulfur"?"S":r=="Potassium"?"K":r=="Phosphorus"?"P":r=="Sodium"?"Na":r=="Chlorine"?"Cl":r=="Magnesium"?"Mg":r=="All others"?"Others":r=="Hydrogen"?"Hydrogen (H)":r=="Carbon"?"Carbon (C)":r=="Oxygen"?"Oxygen (O)":l[f].Element}).attr("text-anchor","middle"),S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sodium"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sulfur","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>15).text((a,f)=>{let r=l[f].Element,M=a.value;return r=="All others"?"-0.1%":`${M}%`}).attr("text-anchor","middle").attr("font-size","80%"),S}).attr("font-weight","bold").attr("font-size","18px"),w.append("g").attr("fill","#ccc").attr("stroke","#000").attr("stroke-width","1.5px").selectAll("path").data(v(b)).join("path").attr("d",n.cornerRadius(Ae)).attr("fill",(D,S)=>C(l[S].Element)),w.append("g").selectAll("text").data(v(b)).join(D=>{let S=D.append("g");return S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sulfur"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sodium","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>(n.centroid(a),0)).text((a,f)=>{let r=l[f].Element;return r=="Nitrogen"?"N":r=="Calcium"?"Ca":r=="Sulfur"?"S":r=="Potassium"?"K":r=="Phosphorus"?"P":r=="Sodium"?"Na":r=="Chlorine"?"Cl":r=="Magnesium"?"Mg":r=="All others"?"Others":r=="Hydrogen"?"Hydrogen (H)":r=="Carbon"?"Carbon (C)":r=="Oxygen"?"Oxygen (O)":l[f].Element}).attr("text-anchor","middle"),S.append("text").attr("transform",(a,f)=>{let r=l[f].Element;return["Calcium","Magnesium","Potassium","Sulfur"].includes(r)?`translate(${p.centroid(a)})`:["Chlorine","All others","Potassium","Sodium","Phosphorus","All others"].includes(r)?`translate(${y.centroid(a)})`:`translate(${d.centroid(a)})`}).attr("x",(a,f)=>l[f].Element=="All others"?20:0).attr("y",a=>15).text((a,f)=>{let r=l[f].Element,M=a.value;return["Carbon","Hydrogen","Oxygen"].includes(r)?`${M}%`:r=="All others"?"-0.3":`${_e(".2f")(M)}`}).attr("text-anchor","middle").attr("font-size","80%"),S}).attr("font-size","18px").attr("font-weight","bold")}return u.$$set=g=>{"data"in g&&A(2,E=g.data)},[i,e,E]}class Ze extends be{constructor(c){super(),Ee(this,c,Ke,Je,Re,{data:2})}}export{Ze as default};
