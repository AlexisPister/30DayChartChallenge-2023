import{S as Fe,i as Ce,s as Pe,k as b,q as m,a as he,l as _,m as w,r as h,h as q,c as ye,n as y,p as Ne,b as Me,H as i,C as ae,o as Oe}from"../chunks/index.06a14631.js";import{s as ve,i as Le,m as Ve,h as He,j as _e,k as $e,l as ge,n as je,v as J,o as Be,q as Q,r as re,u as Re,w as We,M as Ge,c as Ke,a as Te,b as Je,x as Qe,d as Ue,y as Ze,z as Ye,p as et,A as tt,t as st}from"../chunks/plot.81b3b730.js";import"../chunks/transform.2ac1f063.js";import{a as nt}from"../chunks/curve.dc70a6d2.js";import{m as at,s as rt,b as ot,d as ct}from"../chunks/dot.e600da08.js";import{r as qe,g as Ee}from"../chunks/mean.e1aff159.js";import{I as we}from"../chunks/ordinal.9aa01bae.js";import{a as B}from"../chunks/ascending.3ff63084.js";import{m as U}from"../chunks/Set2.a485a3be.js";import{m as it}from"../chunks/max.adfc8a60.js";function lt(n,e){var t=0,s=0;return Float64Array.from(n,e===void 0?a=>t+=+a||0:a=>t+=+e(a,s++,n)||0)}function oe(n,e,t){return(e.length!==2?ve(qe(n,e,t),([s,a],[r,c])=>B(a,c)||B(s,r)):ve(Ee(n,t),([s,a],[r,c])=>e(a,c)||B(s,r))).map(([s])=>s)}function ke(n,e=B){let t,s=!1;if(e.length===1){let a;for(const r of n){const c=e(r);(s?B(c,a)>0:B(c,c)===0)&&(t=r,a=c,s=!0)}}else for(const a of n)(s?e(a,t)>0:e(a,a)===0)&&(t=a,s=!0);return t}function ft(n={}){const{y:e,y1:t,y2:s}=n;return t===void 0&&s===void 0&&e===void 0?{...n,y:Le}:n}function Ae(n={},e={}){arguments.length===1&&([n,e]=dt(n));const{x1:t,x:s=t,y:a,...r}=e,[c,o,l,u]=mt(s,a,"y",n,r);return{...c,x1:t,x:o,y1:l,y2:u,y:Ve(l,u)}}function ut({y:n,y1:e,y2:t,...s}={}){return e===void 0&&t===void 0?Ae({y:n,...s}):([e,t]=He(n,e,t),{...s,y1:e,y2:t})}function dt(n){const{offset:e,order:t,reverse:s,...a}=n;return[{offset:e,order:t,reverse:s},a]}function pt(n,e=Be,t,{offset:s,order:a,reverse:r},c){const o=_e(c),[l,u]=$e(n),[f,d]=ge(e),[z,p]=ge(e);return s=ht(s),a=gt(a,s,t),[je(c,(v,D)=>{const A=n==null?void 0:u(J(v,n)),M=J(v,e,Float64Array),O=J(v,o),S=a&&a(v,A,M,O),L=v.length,I=d(new Float64Array(L)),k=p(new Float64Array(L)),V=[];for(const H of D){const C=A?Array.from(Ee(H,X=>A[X]).values()):[H];S&&wt(C,S);for(const X of C){let g=0,P=0;r&&X.reverse();for(const x of X){const F=M[x];F<0?g=k[x]=(I[x]=g)+F:F>0?P=k[x]=(I[x]=P)+F:k[x]=I[x]=P}}V.push(C)}return s&&s(V,I,k,O),{data:v,facets:D}}),l,f,z]}const mt=pt;function ht(n){if(n!=null){if(typeof n=="function")return n;switch(`${n}`.toLowerCase()){case"expand":case"normalize":return yt;case"center":case"silhouette":return vt;case"wiggle":return ze}throw new Error(`unknown offset: ${n}`)}}function Se(n,e){let t=0,s=0;for(const a of n){const r=e[a];r<t&&(t=r),r>s&&(s=r)}return[t,s]}function yt(n,e,t){for(const s of n)for(const a of s){const[r,c]=Se(a,t);for(const o of a){const l=1/(c-r||1);e[o]=l*(e[o]-r),t[o]=l*(t[o]-r)}}}function vt(n,e,t){for(const s of n){for(const a of s){const[r,c]=Se(a,t);for(const o of a){const l=(c+r)/2;e[o]-=l,t[o]-=l}}De(s,e,t)}Ie(n,e,t)}function ze(n,e,t,s){for(const a of n){const r=new we;let c=0;for(const o of a){let l=-1;const u=o.map(p=>Math.abs(t[p]-e[p])),f=o.map(p=>{l=s?s[p]:++l;const v=t[p]-e[p],D=r.has(l)?v-r.get(l):0;return r.set(l,v),D}),d=[0,...lt(f)];for(const p of o)e[p]+=c,t[p]+=c;const z=Q(u);z&&(c-=Q(u,(p,v)=>(f[v]/2+d[v])*p)/z)}De(a,e,t)}Ie(n,e,t)}function De(n,e,t){const s=U(n,a=>U(a,r=>e[r]));for(const a of n)for(const r of a)e[r]-=s,t[r]-=s}function Ie(n,e,t){const s=n.length;if(s===1)return;const a=n.map(o=>o.flat()),r=a.map(o=>(U(o,l=>e[l])+it(o,l=>t[l]))/2),c=U(r);for(let o=0;o<s;o++){const l=c-r[o];for(const u of a[o])e[u]+=l,t[u]+=l}}function gt(n,e,t){if(n===void 0&&e===ze)return xe;if(n!=null){if(typeof n=="string"){switch(n.toLowerCase()){case"value":case t:return xt;case"z":return bt;case"sum":return _t;case"appearance":return qt;case"inside-out":return xe}return be(We(n))}if(typeof n=="function")return be(n);if(Array.isArray(n))return Et(n);throw new Error(`invalid order: ${n}`)}}function xt(n,e,t){return t}function bt(n,e,t,s){return s}function _t(n,e,t,s){return Z(s,oe(re(n),a=>Q(a,r=>t[r]),a=>s[a]))}function qt(n,e,t,s){return Z(s,oe(re(n),a=>e[ke(a,r=>t[r])],a=>s[a]))}function xe(n,e,t,s){const a=re(n),r=oe(a,f=>e[ke(f,d=>t[d])],f=>s[f]),c=qe(a,f=>Q(f,d=>t[d]),f=>s[f]),o=[],l=[];let u=0;for(const f of r)u<0?(u+=c.get(f),o.push(f)):(u-=c.get(f),l.push(f));return Z(s,l.reverse().concat(o))}function be(n){return e=>J(e,n)}function Et(n){return(e,t,s,a)=>Z(a,n)}function Z(n,e){if(!n)throw new Error("missing channel: z");return e=new we(e.map((t,s)=>[t,s])),n.map(t=>e.get(t))}function wt(n,e){for(const t of n)t.sort((s,a)=>Re(e[s],e[a]))}const kt={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class At extends Ge{constructor(e,t={}){const{x1:s,y1:a,x2:r,y2:c,z:o,curve:l,tension:u}=t;super(e,{x1:{value:s,scale:"x"},y1:{value:a,scale:"y"},x2:{value:r,scale:"x",optional:!0},y2:{value:c,scale:"y",optional:!0},z:{value:_e(t),optional:!0}},t,kt),this.z=o,this.curve=nt(l,u)}filter(e){return e}render(e,t,s,a,r){const{x1:c,y1:o,x2:l=c,y2:u=o}=s;return Ke("svg:g",r).call(Te,this,a,r).call(Je,this,t,0,0).call(f=>f.selectAll().data(Qe(e,[c,o,l,u],this,s)).enter().append("path").call(Ue,this).call(Ze,this,s).attr("d",rt().curve(this.curve).defined(d=>d>=0).x0(d=>c[d]).y0(d=>o[d]).x1(d=>l[d]).y1(d=>u[d]))).node()}}function St(n,e){const{x:t=Ye,...s}=at(e);return new At(n,ut(ft({...s,x1:t,x2:void 0})))}function zt(n){let e,t,s,a,r,c,o,l,u,f,d,z,p,v,D,A,M,O,S,L,I,k,V,H,C,X,g,P,x,F,Y,$,ee,te,se,ne,R;return{c(){e=b("div"),t=b("div"),s=b("h1"),a=m("IMDB ratings of "),r=b("span"),c=m("F"),o=b("span"),l=m("·"),u=m("R"),f=b("span"),d=m("·"),z=m("I"),p=b("span"),v=m("·"),D=m("E"),A=b("span"),M=m("·"),O=m("N"),S=b("span"),L=m("·"),I=m("D"),k=b("span"),V=m("·"),H=m("S"),C=m(" episodes per season."),X=he(),g=b("div"),P=m("Data Source: "),x=b("a"),F=m("Friends Episode Data"),Y=m(`
            Layout: `),$=b("a"),ee=m("Observable Plot"),te=b("br"),se=m(`
            Each dot represents an episode.`),ne=he(),R=b("div"),this.h()},l(W){e=_(W,"DIV",{id:!0,class:!0});var j=w(e);t=_(j,"DIV",{id:!0,class:!0});var K=w(t);s=_(K,"H1",{class:!0});var T=w(s);a=h(T,"IMDB ratings of "),r=_(T,"SPAN",{id:!0,class:!0});var E=w(r);c=h(E,"F"),o=_(E,"SPAN",{class:!0});var ce=w(o);l=h(ce,"·"),ce.forEach(q),u=h(E,"R"),f=_(E,"SPAN",{class:!0});var ie=w(f);d=h(ie,"·"),ie.forEach(q),z=h(E,"I"),p=_(E,"SPAN",{class:!0});var le=w(p);v=h(le,"·"),le.forEach(q),D=h(E,"E"),A=_(E,"SPAN",{class:!0});var fe=w(A);M=h(fe,"·"),fe.forEach(q),O=h(E,"N"),S=_(E,"SPAN",{class:!0});var ue=w(S);L=h(ue,"·"),ue.forEach(q),I=h(E,"D"),k=_(E,"SPAN",{class:!0});var de=w(k);V=h(de,"·"),de.forEach(q),H=h(E,"S"),E.forEach(q),C=h(T," episodes per season."),T.forEach(q),X=ye(K),g=_(K,"DIV",{id:!0,class:!0});var N=w(g);P=h(N,"Data Source: "),x=_(N,"A",{href:!0,style:!0});var pe=w(x);F=h(pe,"Friends Episode Data"),pe.forEach(q),Y=h(N,`
            Layout: `),$=_(N,"A",{href:!0});var me=w($);ee=h(me,"Observable Plot"),me.forEach(q),te=_(N,"BR",{}),se=h(N,`
            Each dot represents an episode.`),N.forEach(q),K.forEach(q),ne=ye(j),R=_(j,"DIV",{id:!0});var Xe=w(R);Xe.forEach(q),j.forEach(q),this.h()},h(){y(o,"class","red svelte-1867zqq"),y(f,"class","blue svelte-1867zqq"),y(p,"class","yellow svelte-1867zqq"),y(A,"class","red svelte-1867zqq"),y(S,"class","blue svelte-1867zqq"),y(k,"class","yellow svelte-1867zqq"),y(r,"id","friends"),y(r,"class","svelte-1867zqq"),y(s,"class","svelte-1867zqq"),y(x,"href","https://www.kaggle.com/datasets/bcruise/friends-episode-data"),Ne(x,"padding-right","8px"),y($,"href","https://altair-viz.github.io/index.html"),y(g,"id","data-source"),y(g,"class","svelte-1867zqq"),y(t,"id","main-text"),y(t,"class","svelte-1867zqq"),y(R,"id","graph"),y(e,"id","container"),y(e,"class","svelte-1867zqq")},m(W,j){Me(W,e,j),i(e,t),i(t,s),i(s,a),i(s,r),i(r,c),i(r,o),i(o,l),i(r,u),i(r,f),i(f,d),i(r,z),i(r,p),i(p,v),i(r,D),i(r,A),i(A,M),i(r,O),i(r,S),i(S,L),i(r,I),i(r,k),i(k,V),i(r,H),i(s,C),i(t,X),i(t,g),i(g,P),i(g,x),i(x,F),i(g,Y),i(g,$),i($,ee),i(g,te),i(g,se),i(e,ne),i(e,R)},p:ae,i:ae,o:ae,d(W){W&&q(e)}}}let G="imdb_rating";const Dt=1300,It=1e3;function Xt(n,e,t){let{data:s}=e;const a=s.imdb.data;console.log(a),Oe(()=>{r()});function r(){let c=et({style:{fontSize:"14px"},color:{type:"categorical",scheme:"set3"},marks:[tt(),St(a,ot({y:"count"},{x:G,fill:"season",thresholds:12,curve:"basis"})),ct(a,Ae({offset:null,x:G,fill:"black",r:2,stroke:"gray"})),st(a,{text:o=>o.title,filter:o=>o[G]>9.3||o[G]<7.5,x:G,y:2.4,clip:!0,lineWidth:12,fill:"gray"})],fy:{padding:.2,domain:d3.range(1,11).map(o=>o.toString())},facet:{data:a,y:"season",marginRight:80},y:{ticks:[0,3,6]},x:{nice:!0,domain:[5,10]},marginBottom:40,width:Dt,height:It});document.querySelector("#graph").append(c)}return n.$$set=c=>{"data"in c&&t(0,s=c.data)},[s]}class jt extends Fe{constructor(e){super(),Ce(this,e,Xt,zt,Pe,{data:0})}}export{jt as default};
