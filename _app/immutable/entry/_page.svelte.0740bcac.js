import{S as Ge,i as He,s as Ne,a as T,k as m,q as E,J as se,c as x,l as y,m as v,r as b,h as u,K as oe,n as d,b as H,G as l,L as ye,u as me,H as Ee,M as Se,N as Be,o as Me}from"../chunks/index.c0f3b0e2.js";import{s as Ye}from"../chunks/transform.0dd040bf.js";import{r as qe}from"../chunks/range.6bc2a9a0.js";function Ve(r,a,n){const o=r.slice();return o[17]=a[n],o}function Pe(r,a,n){const o=r.slice();return o[20]=a[n],o}function Te(r){let a,n,o,c,k=r[20]+"",A,j,_,P;return{c(){a=m("label"),n=m("input"),c=T(),A=E(k),j=T(),this.h()},l(L){a=y(L,"LABEL",{});var I=v(a);n=y(I,"INPUT",{type:!0,name:!0}),c=x(I),A=b(I,k),j=x(I),I.forEach(u),this.h()},h(){d(n,"type","radio"),d(n,"name","gender"),n.value=r[20],n.checked=o=r[1]===r[20]},m(L,I){H(L,a,I),l(a,n),l(a,c),l(a,A),l(a,j),_||(P=ye(n,"change",r[6]),_=!0)},p(L,I){I&2&&o!==(o=L[1]===L[20])&&(n.checked=o)},d(L){L&&u(a),_=!1,P()}}}function xe(r){let a,n=r[17]+"",o;return{c(){a=m("option"),o=E(n),this.h()},l(c){a=y(c,"OPTION",{});var k=v(a);o=b(k,n),k.forEach(u),this.h()},h(){a.__value=r[17],a.value=a.__value},m(c,k){H(c,a,k),l(a,o)},p:Ee,d(c){c&&u(a)}}}function Ue(r){let a,n,o,c,k,A,j,_,P,L,I,N,O,C,G,J,K,w,Q,i,f,s,D=r[2]-r[3]+"",S,ue,Z,fe,$,he,ee,V,te,le,R,ce,ae,B,de,ve,_e,W,pe,ge,Le,z=r[5],p=[];for(let e=0;e<z.length;e+=1)p[e]=Te(Pe(r,z,e));let F=r[4],g=[];for(let e=0;e<F.length;e+=1)g[e]=xe(Ve(r,F,e));return{c(){a=T(),n=m("div"),o=m("div"),c=m("label"),k=E("Gender:"),A=T();for(let e=0;e<p.length;e+=1)p[e].c();j=T(),_=m("div"),P=m("label"),L=E("Country:"),I=T(),N=m("select");for(let e=0;e<g.length;e+=1)g[e].c();O=T(),C=m("div"),G=m("label"),J=E("Age:"),K=T(),w=m("input"),Q=T(),i=m("div"),f=m("h1"),s=E("You have "),S=E(D),ue=E(" years left to  live in average*, for a "),Z=E(r[1]),fe=E(" living in "),$=E(r[0]),he=E("."),ee=T(),V=se("svg"),te=se("path"),le=se("line"),R=se("text"),ce=E("You are here"),ae=T(),B=m("div"),de=E("*If the life expectancy does not change."),ve=m("br"),_e=E(`
    Data Source: `),W=m("a"),pe=E("Ined"),this.h()},l(e){a=x(e),n=y(e,"DIV",{id:!0});var h=v(n);o=y(h,"DIV",{class:!0});var t=v(o);c=y(t,"LABEL",{for:!0});var Y=v(c);k=b(Y,"Gender:"),Y.forEach(u),A=x(t);for(let U=0;U<p.length;U+=1)p[U].l(t);t.forEach(u),j=x(h),_=y(h,"DIV",{class:!0});var re=v(_);P=y(re,"LABEL",{});var Ie=v(P);L=b(Ie,"Country:"),Ie.forEach(u),I=x(re),N=y(re,"SELECT",{});var De=v(N);for(let U=0;U<g.length;U+=1)g[U].l(De);De.forEach(u),re.forEach(u),O=x(h),C=y(h,"DIV",{class:!0});var ne=v(C);G=y(ne,"LABEL",{for:!0});var je=v(G);J=b(je,"Age:"),je.forEach(u),K=x(ne),w=y(ne,"INPUT",{type:!0,id:!0,name:!0}),ne.forEach(u),h.forEach(u),Q=x(e),i=y(e,"DIV",{id:!0,class:!0});var Ae=v(i);f=y(Ae,"H1",{});var q=v(f);s=b(q,"You have "),S=b(q,D),ue=b(q," years left to  live in average*, for a "),Z=b(q,r[1]),fe=b(q," living in "),$=b(q,r[0]),he=b(q,"."),q.forEach(u),Ae.forEach(u),ee=x(e),V=oe(e,"svg",{id:!0,width:!0,height:!0,class:!0});var ie=v(V);te=oe(ie,"path",{}),v(te).forEach(u),le=oe(ie,"line",{}),v(le).forEach(u),R=oe(ie,"text",{id:!0});var Ce=v(R);ce=b(Ce,"You are here"),Ce.forEach(u),ie.forEach(u),ae=x(e),B=y(e,"DIV",{});var X=v(B);de=b(X,"*If the life expectancy does not change."),ve=y(X,"BR",{}),_e=b(X,`
    Data Source: `),W=y(X,"A",{href:!0});var we=v(W);pe=b(we,"Ined"),we.forEach(u),X.forEach(u),this.h()},h(){d(c,"for","gender"),d(o,"class","option svelte-1jhgjkm"),d(_,"class","option svelte-1jhgjkm"),d(G,"for","age"),d(w,"type","number"),d(w,"id","age"),d(w,"name","age"),w.value=r[3],d(C,"class","option svelte-1jhgjkm"),d(n,"id","options"),d(i,"id","main-text"),d(i,"class","svelte-1jhgjkm"),d(R,"id","path-text"),d(V,"id","vis"),d(V,"width",ke+600),d(V,"height",Oe),d(V,"class","svelte-1jhgjkm"),d(W,"href","https://www.ined.fr/en/everything_about_population/data/europe-developed-countries/life-expectancy/")},m(e,h){H(e,a,h),H(e,n,h),l(n,o),l(o,c),l(c,k),l(o,A);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(o,null);l(n,j),l(n,_),l(_,P),l(P,L),l(_,I),l(_,N);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(N,null);l(n,O),l(n,C),l(C,G),l(G,J),l(C,K),l(C,w),H(e,Q,h),H(e,i,h),l(i,f),l(f,s),l(f,S),l(f,ue),l(f,Z),l(f,fe),l(f,$),l(f,he),H(e,ee,h),H(e,V,h),l(V,te),l(V,le),l(V,R),l(R,ce),H(e,ae,h),H(e,B,h),l(B,de),l(B,ve),l(B,_e),l(B,W),l(W,pe),ge||(Le=[ye(N,"change",r[7]),ye(w,"input",r[8])],ge=!0)},p(e,[h]){if(h&98){z=e[5];let t;for(t=0;t<z.length;t+=1){const Y=Pe(e,z,t);p[t]?p[t].p(Y,h):(p[t]=Te(Y),p[t].c(),p[t].m(o,null))}for(;t<p.length;t+=1)p[t].d(1);p.length=z.length}if(h&16){F=e[4];let t;for(t=0;t<F.length;t+=1){const Y=Ve(e,F,t);g[t]?g[t].p(Y,h):(g[t]=xe(Y),g[t].c(),g[t].m(N,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=F.length}h&8&&w.value!==e[3]&&(w.value=e[3]),h&12&&D!==(D=e[2]-e[3]+"")&&me(S,D),h&2&&me(Z,e[1]),h&1&&me($,e[0])},i:Ee,o:Ee,d(e){e&&u(a),e&&u(n),Se(p,e),Se(g,e),e&&u(Q),e&&u(i),e&&u(ee),e&&u(V),e&&u(ae),e&&u(B),ge=!1,Be(Le)}}}const be=30,M=70,ke=1e3,Oe=1e3;function Qe(){return ke/(M+be)}function Re(r){return r.filter(a=>a[0]&&a[1]&&a[2]&&a[3])}function We(r,a,n){let{data:o}=a,c="France",k="male",A,j=20,_,P=Re(o.data);const L=P.map(i=>i[0]).filter(i=>i!="Country");L.sort();const I=["male","female"];Me(()=>{O(_)});function N(i,f){let s=P.filter(S=>S[0]==i)[0],D;return f=="male"?D=s[2]:D=s[3],Math.round(Number(D))}function O(i){let f=Ye("#vis");f.selectAll("rect").data(i).join("rect").attr("width",M).attr("height",M).attr("x",s=>C(s)).attr("y",s=>G(s)).style("fill",s=>s.isLived==1?"rgb(149,225,177)":s.isLived==.5?"rgb(172,176,255)":"white").attr("stroke","black").attr("stroke-width",s=>s.isLived==.5?6:s.isLived==1?3:1),f.selectAll(".text").data(i).join("text").classed("text",!0).text(s=>s.isLived==.5||s.year==A?s.year:"").attr("x",s=>C(s)+M/3.8).attr("y",s=>G(s)+2*M/3.2).attr("font-size","2em"),f.select("path").attr("d",()=>{let s=C({year:j}),D=G({year:j});return`M ${s+M},${D+M/2}
           Q 1100,220 1100,300`}).attr("stroke","black").attr("stroke-width",3).attr("fill","none").raise(),f.select("#path-text").attr("x",()=>1110).attr("y",()=>310)}const C=i=>((i.year-1)*M+(i.year-1)*be)%ke,G=i=>{let f=Math.floor((i.year-1)/Qe())+1;return f*M+(f-1)*be};function J(i,f){return qe(1,f+1).map(D=>{let S;return i==D?S=.5:i>D?S=1:S=0,{year:D,isLived:S}})}const K=i=>{n(1,k=i.target.value)},w=i=>{n(0,c=i.target.value)},Q=i=>{n(3,j=parseInt(i.target.value))};return r.$$set=i=>{"data"in i&&n(9,o=i.data)},r.$$.update=()=>{r.$$.dirty&3&&n(2,A=N(c,k)),r.$$.dirty&12&&n(10,_=J(j,A)),r.$$.dirty&1024&&O(_)},[c,k,A,j,L,I,K,w,Q,o,_]}class Ke extends Ge{constructor(a){super(),He(this,a,We,Ue,Ne,{data:9})}}export{Ke as default};
