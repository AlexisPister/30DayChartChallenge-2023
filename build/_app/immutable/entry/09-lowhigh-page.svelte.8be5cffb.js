import{S as G,i as W,s as K,J as S,q as M,K as T,m as x,r as I,h as p,n as h,b as O,H as c,C as H,k as J,a as N,y as U,l as D,c as P,z as Q,p as X,A as Z,g as tt,d as at,B as et,o as rt}from"../chunks/index.2e204e96.js";import{s as j}from"../chunks/transform.3e593064.js";import{e as nt,b as lt}from"../chunks/band.27971c68.js";import{r as it,m as st}from"../chunks/mean.e1aff159.js";import{a as ot,b as dt,e as ht}from"../chunks/linear.65be369b.js";function ct($){let n,f,y,m,b;return{c(){n=S("svg"),f=S("title"),y=M("Flag of Canada"),m=S("path"),b=S("path"),this.h()},l(l){n=T(l,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var u=x(n);f=T(u,"title",{});var e=x(f);y=I(e,"Flag of Canada"),e.forEach(p),m=T(u,"path",{fill:!0,d:!0}),x(m).forEach(p),b=T(u,"path",{fill:!0,d:!0}),x(b).forEach(p),u.forEach(p),this.h()},h(){h(m,"fill","#f00"),h(m,"d","m0 0h2400l99 99h4602l99-99h2400v4800h-2400l-99-99h-4602l-99 99H0z"),h(b,"fill","#fff"),h(b,"d","m2400 0h4800v4800h-4800zm2490 4430-45-863a95 95 0 0 1 111-98l859 151-116-320a65 65 0 0 1 20-73l941-762-212-99a65 65 0 0 1-34-79l186-572-542 115a65 65 0 0 1-73-38l-105-247-423 454a65 65 0 0 1-111-57l204-1052-327 189a65 65 0 0 1-91-27l-332-652-332 652a65 65 0 0 1-91 27l-327-189 204 1052a65 65 0 0 1-111 57l-423-454-105 247a65 65 0 0 1-73 38l-542-115 186 572a65 65 0 0 1-34 79l-212 99 941 762a65 65 0 0 1 20 73l-116 320 859-151a95 95 0 0 1 111 98l-45 863z"),h(n,"xmlns","http://www.w3.org/2000/svg"),h(n,"width","1200"),h(n,"height","600"),h(n,"viewBox","0 0 9600 4800")},m(l,u){O(l,n,u),c(n,f),c(f,y),c(n,m),c(n,b)},p:H,i:H,o:H,d(l){l&&p(n)}}}class ut extends G{constructor(n){super(),W(this,n,null,ct,K,{})}}function gt($){let n,f,y,m,b,l,u,e,k,C,A,g,d,B,E,i,r,s,t;return s=new ut({}),{c(){n=J("div"),f=J("div"),y=J("h1"),m=M("Mean Temperatures during the months of January (Jan) and June (Jun) at Calgary, Canada, 2010-2020."),b=N(),l=J("div"),u=M("Data Source: "),e=J("a"),k=M("Eighty years of Canadian climate data"),C=M(`
            Layout: `),A=J("a"),g=M("D3JS"),d=J("br"),B=N(),E=J("div"),i=S("svg"),r=S("g"),U(s.$$.fragment),this.h()},l(a){n=D(a,"DIV",{id:!0,class:!0});var o=x(n);f=D(o,"DIV",{id:!0,class:!0});var v=x(f);y=D(v,"H1",{class:!0});var w=x(y);m=I(w,"Mean Temperatures during the months of January (Jan) and June (Jun) at Calgary, Canada, 2010-2020."),w.forEach(p),b=P(v),l=D(v,"DIV",{id:!0,class:!0});var _=x(l);u=I(_,"Data Source: "),e=D(_,"A",{href:!0,style:!0});var R=x(e);k=I(R,"Eighty years of Canadian climate data"),R.forEach(p),C=I(_,`
            Layout: `),A=D(_,"A",{href:!0});var L=x(A);g=I(L,"D3JS"),L.forEach(p),d=D(_,"BR",{}),_.forEach(p),v.forEach(p),B=P(o),E=D(o,"DIV",{id:!0});var Y=x(E);i=T(Y,"svg",{width:!0,height:!0});var F=x(i);r=T(F,"g",{id:!0,transform:!0});var V=x(r);Q(s.$$.fragment,V),V.forEach(p),F.forEach(p),Y.forEach(p),o.forEach(p),this.h()},h(){h(y,"class","svelte-1lkatwq"),h(e,"href","https://www.kaggle.com/datasets/aturner374/eighty-years-of-canadian-climate-data"),X(e,"padding-right","8px"),h(A,"href","https://d3js.org/"),h(l,"id","data-source"),h(l,"class","svelte-1lkatwq"),h(f,"id","main-text"),h(f,"class","svelte-1lkatwq"),h(r,"id","gflag"),h(r,"transform","translate("+(q-103)+", "+($[0]()+21)+") scale(0.08) "),h(i,"width",q),h(i,"height",z),h(E,"id","graph"),h(n,"id","container"),h(n,"class","svelte-1lkatwq")},m(a,o){O(a,n,o),c(n,f),c(f,y),c(y,m),c(f,b),c(f,l),c(l,u),c(l,e),c(e,k),c(l,C),c(l,A),c(A,g),c(l,d),c(n,B),c(n,E),c(E,i),c(i,r),Z(s,r,null),t=!0},p:H,i(a){t||(tt(s.$$.fragment,a),t=!0)},o(a){at(s.$$.fragment,a),t=!1},d(a){a&&p(n),et(s)}}}let ft="MEAN_TEMPERATURE_CALGARY";const q=1600,z=900;function mt($,n,f){let{data:y}=n,m=y.data;m.forEach(r=>{let s=r.LOCAL_DATE,t=s.split("-")[1],a=s.split("-")[2].split(" ")[0];r.monthYear=t+a,r.year=a}),m=m.filter(r=>r.year>=2010);let l=[...it(m,r=>st(r,s=>s[ft]),r=>r.monthYear)];l=l.filter(r=>r[0].includes("Jan")||r[0].includes("Jun")),l=l.filter(r=>r[0].includes("Jan")||r[0].includes("Jun")),console.log(l);const u={bottom:20,left:60,right:120,top:20};let e,k,C,A=nt(l,r=>r[1]);console.log(A);const g=ot().domain([18,-18]).range([0,z-u.top-u.bottom]);let d=lt().domain(l.map(r=>r[0])).range([0,q-u.right-u.left]).paddingInner(.5);rt(()=>{C=j("svg").append("g").attr("transform",`translate(${u.left}, ${u.top})`),e=d.bandwidth(),k=d.paddingInner()*e;let r=dt(d),s=ht(g).tickFormat((t,a)=>`${t} Â°C`).ticks(18);B(),C.append("g").call(r).attr("transform",`translate(0, ${i()})`).attr("font-size",15).attr("font-weight","bold"),C.append("g").call(s).attr("transform","translate(-55, 0)").attr("font-size",14).attr("font-weight","bold"),j("#gflag").raise()});function B(){C.selectAll(".monthyear").data(l).join(r=>{let s=r.append("g");return s.append("line").attr("x1",(t,a)=>d(t[0])).attr("y1",(t,a)=>i()).attr("x2",(t,a)=>d(t[0])).attr("y2",(t,a)=>{let o=t[1]<0?1:-1;return g(t[1])+o*e}).attr("stroke","black").attr("stroke-width",3),s.append("line").attr("x1",(t,a)=>d(t[0])+e).attr("y1",(t,a)=>i()).attr("x2",(t,a)=>d(t[0])+e).attr("y2",(t,a)=>g(t[1])).attr("stroke","black").attr("stroke-width",3),s.append("line").attr("x1",(t,a)=>d(t[0])).attr("y1",(t,a)=>{let o=t[1]<0?1:-1;return g(t[1])+o*e}).attr("x2",(t,a)=>d(t[0])+(e+k)*2).attr("y2",(t,a)=>{let o=t[1]<0?1:-1;return g(t[1])+o*e}).attr("stroke","black").attr("stroke-width",3),s.append("line").attr("x1",(t,a)=>d(t[0])+e).attr("y1",(t,a)=>g(t[1])).attr("stroke","black").attr("x2",(t,a)=>d(t[0])+(e+k+e/2)).attr("y2",t=>g(t[1])).attr("stroke","black").attr("stroke-width",3),s.append("line").attr("x1",(t,a)=>d(t[0])+(e+k)*2).attr("y1",(t,a)=>{let o=t[1]<0?1:-1;return g(t[1])+o*e}).attr("x2",(t,a)=>d(t[0])+(e+k)*2).attr("y2",(t,a)=>i()).attr("stroke","black").attr("stroke-width",3),s.append("line").attr("x1",(t,a)=>d(t[0])+(e+k+e/2)).attr("y1",(t,a)=>g(t[1])).attr("stroke","black").attr("x2",(t,a)=>d(t[0])+(e+k+e/2)).attr("y2",(t,a)=>i()).attr("stroke","black").attr("stroke-width",3),s.append("rect").attr("width",(t,a)=>e).attr("height",(t,a)=>{let o=t[1]<0?1:-1,v=g(t[1])+o*e,w=i();return Math.abs(v-w)}).attr("x",(t,a)=>d(t[0])).attr("y",(t,a)=>{let o=t[1]<0?1:-1,v=g(t[1])+o*e,w=i(),_=Math.abs(v-w);return t[1]>0?i()-_:i()}).attr("fill",E),s.append("rect").attr("width",(t,a)=>e).attr("height",(t,a)=>{let o=t[1]<0?1:-1,v=g(t[1])+o*e,w=i();return Math.abs(v-w)}).attr("x",(t,a)=>d(t[0])+(e+k*2)).attr("y",(t,a)=>{let o=t[1]<0?1:-1,v=g(t[1])+o*e,w=i(),_=Math.abs(v-w);return t[1]>0?i()-_:i()}).attr("fill",E),s.append("rect").attr("width",(t,a)=>e*2).attr("height",(t,a)=>e).attr("x",(t,a)=>d(t[0])).attr("y",(t,a)=>{let o=t[1]<0?1:-1,v=g(t[1])+o*e,w=i(),_=Math.abs(v-w);return t[1]>0?i()-_:i()+_-e}).attr("fill",E),s}).classed("monthyear",!0)}const E=r=>r[1]>0?"#fbb4ae":"#b3cde3";function i(){return(z-u.top-u.bottom)/2}return $.$$set=r=>{"data"in r&&f(1,y=r.data)},[i,y]}class kt extends G{constructor(n){super(),W(this,n,mt,gt,K,{data:1})}}export{kt as default};
