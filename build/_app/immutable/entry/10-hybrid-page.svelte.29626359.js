import{S as Ce,i as Pe,s as Ne,k as b,q as h,a as me,l as _,m as k,r as m,h as E,c as ye,n as y,p as Me,b as Oe,H as l,C as ae,o as Le}from"../chunks/index.2e204e96.js";import{s as ve,i as Ve,m as He,h as $e,j as _e,k as je,l as ge,n as qe,v as J,o as Be,q as Q,r as re,u as Re,w as We,M as Ge,c as Ke,a as Te,b as Je,x as Qe,d as Ue,y as Ze,z as Ye,p as et,A as tt,t as st}from"../chunks/plot.9c3b00f8.js";import"../chunks/transform.3e593064.js";import{a as nt}from"../chunks/curve.58b285bc.js";import{m as at,s as rt,b as ot,d as ct}from"../chunks/dot.25e40388.js";import{r as Ee,g as we}from"../chunks/mean.e1aff159.js";import{I as ke}from"../chunks/ordinal.9aa01bae.js";import{a as B}from"../chunks/ascending.3ff63084.js";import{m as U,a as lt}from"../chunks/Set2.4b6542ef.js";function it(n,e){var t=0,s=0;return Float64Array.from(n,e===void 0?a=>t+=+a||0:a=>t+=+e(a,s++,n)||0)}function oe(n,e,t){return(e.length!==2?ve(Ee(n,e,t),([s,a],[r,c])=>B(a,c)||B(s,r)):ve(we(n,t),([s,a],[r,c])=>e(a,c)||B(s,r))).map(([s])=>s)}function Ae(n,e=B){let t,s=!1;if(e.length===1){let a;for(const r of n){const c=e(r);(s?B(c,a)>0:B(c,c)===0)&&(t=r,a=c,s=!0)}}else for(const a of n)(s?e(a,t)>0:e(a,a)===0)&&(t=a,s=!0);return t}function ft(n={}){const{y:e,y1:t,y2:s}=n;return t===void 0&&s===void 0&&e===void 0?{...n,y:Ve}:n}function Se(n={},e={}){arguments.length===1&&([n,e]=dt(n));const{x1:t,x:s=t,y:a,...r}=e,[c,o,i,u]=ht(s,a,"y",n,r);return{...c,x1:t,x:o,y1:i,y2:u,y:He(i,u)}}function ut({y:n,y1:e,y2:t,...s}={}){return e===void 0&&t===void 0?Se({y:n,...s}):([e,t]=$e(n,e,t),{...s,y1:e,y2:t})}function dt(n){const{offset:e,order:t,reverse:s,...a}=n;return[{offset:e,order:t,reverse:s},a]}function pt(n,e=Be,t,{offset:s,order:a,reverse:r},c){const o=_e(c),[i,u]=je(n),[f,d]=ge(e),[I,p]=ge(e);return s=mt(s),a=gt(a,s,t),[qe(c,(v,X)=>{const S=n==null?void 0:u(J(v,n)),O=J(v,e,Float64Array),L=J(v,o),D=a&&a(v,S,O,L),V=v.length,F=d(new Float64Array(V)),A=p(new Float64Array(V)),H=[];for(const $ of X){const P=S?Array.from(we($,z=>S[z]).values()):[$];D&&kt(P,D);for(const z of P){let g=0,N=0;r&&z.reverse();for(const x of z){const C=O[x];C<0?g=A[x]=(F[x]=g)+C:C>0?N=A[x]=(F[x]=N)+C:A[x]=F[x]=N}}H.push(P)}return s&&s(H,F,A,L),{data:v,facets:X}}),i,f,I]}const ht=pt;function mt(n){if(n!=null){if(typeof n=="function")return n;switch(`${n}`.toLowerCase()){case"expand":case"normalize":return yt;case"center":case"silhouette":return vt;case"wiggle":return Ie}throw new Error(`unknown offset: ${n}`)}}function De(n,e){let t=0,s=0;for(const a of n){const r=e[a];r<t&&(t=r),r>s&&(s=r)}return[t,s]}function yt(n,e,t){for(const s of n)for(const a of s){const[r,c]=De(a,t);for(const o of a){const i=1/(c-r||1);e[o]=i*(e[o]-r),t[o]=i*(t[o]-r)}}}function vt(n,e,t){for(const s of n){for(const a of s){const[r,c]=De(a,t);for(const o of a){const i=(c+r)/2;e[o]-=i,t[o]-=i}}Xe(s,e,t)}Fe(n,e,t)}function Ie(n,e,t,s){for(const a of n){const r=new ke;let c=0;for(const o of a){let i=-1;const u=o.map(p=>Math.abs(t[p]-e[p])),f=o.map(p=>{i=s?s[p]:++i;const v=t[p]-e[p],X=r.has(i)?v-r.get(i):0;return r.set(i,v),X}),d=[0,...it(f)];for(const p of o)e[p]+=c,t[p]+=c;const I=Q(u);I&&(c-=Q(u,(p,v)=>(f[v]/2+d[v])*p)/I)}Xe(a,e,t)}Fe(n,e,t)}function Xe(n,e,t){const s=U(n,a=>U(a,r=>e[r]));for(const a of n)for(const r of a)e[r]-=s,t[r]-=s}function Fe(n,e,t){const s=n.length;if(s===1)return;const a=n.map(o=>o.flat()),r=a.map(o=>(U(o,i=>e[i])+lt(o,i=>t[i]))/2),c=U(r);for(let o=0;o<s;o++){const i=c-r[o];for(const u of a[o])e[u]+=i,t[u]+=i}}function gt(n,e,t){if(n===void 0&&e===Ie)return xe;if(n!=null){if(typeof n=="string"){switch(n.toLowerCase()){case"value":case t:return xt;case"z":return bt;case"sum":return _t;case"appearance":return Et;case"inside-out":return xe}return be(We(n))}if(typeof n=="function")return be(n);if(Array.isArray(n))return wt(n);throw new Error(`invalid order: ${n}`)}}function xt(n,e,t){return t}function bt(n,e,t,s){return s}function _t(n,e,t,s){return Z(s,oe(re(n),a=>Q(a,r=>t[r]),a=>s[a]))}function Et(n,e,t,s){return Z(s,oe(re(n),a=>e[Ae(a,r=>t[r])],a=>s[a]))}function xe(n,e,t,s){const a=re(n),r=oe(a,f=>e[Ae(f,d=>t[d])],f=>s[f]),c=Ee(a,f=>Q(f,d=>t[d]),f=>s[f]),o=[],i=[];let u=0;for(const f of r)u<0?(u+=c.get(f),o.push(f)):(u-=c.get(f),i.push(f));return Z(s,i.reverse().concat(o))}function be(n){return e=>J(e,n)}function wt(n){return(e,t,s,a)=>Z(a,n)}function Z(n,e){if(!n)throw new Error("missing channel: z");return e=new ke(e.map((t,s)=>[t,s])),n.map(t=>e.get(t))}function kt(n,e){for(const t of n)t.sort((s,a)=>Re(e[s],e[a]))}const At={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class St extends Ge{constructor(e,t={}){const{x1:s,y1:a,x2:r,y2:c,z:o,curve:i,tension:u}=t;super(e,{x1:{value:s,scale:"x"},y1:{value:a,scale:"y"},x2:{value:r,scale:"x",optional:!0},y2:{value:c,scale:"y",optional:!0},z:{value:_e(t),optional:!0}},t,At),this.z=o,this.curve=nt(i,u)}filter(e){return e}render(e,t,s,a,r){const{x1:c,y1:o,x2:i=c,y2:u=o}=s;return Ke("svg:g",r).call(Te,this,a,r).call(Je,this,t,0,0).call(f=>f.selectAll().data(Qe(e,[c,o,i,u],this,s)).enter().append("path").call(Ue,this).call(Ze,this,s).attr("d",rt().curve(this.curve).defined(d=>d>=0).x0(d=>c[d]).y0(d=>o[d]).x1(d=>i[d]).y1(d=>u[d]))).node()}}function Dt(n,e){const{x:t=Ye,...s}=at(e);return new St(n,ut(ft({...s,x1:t,x2:void 0})))}function It(n){let e,t,s,a,r,c,o,i,u,f,d,I,p,v,X,S,O,L,D,V,F,A,H,$,P,z,g,N,x,C,Y,j,ee,te,se,ne,R;return{c(){e=b("div"),t=b("div"),s=b("h1"),a=h("IMDB ratings of "),r=b("span"),c=h("F"),o=b("span"),i=h("·"),u=h("R"),f=b("span"),d=h("·"),I=h("I"),p=b("span"),v=h("·"),X=h("E"),S=b("span"),O=h("·"),L=h("N"),D=b("span"),V=h("·"),F=h("D"),A=b("span"),H=h("·"),$=h("S"),P=h(" episodes per season."),z=me(),g=b("div"),N=h("Data Source: "),x=b("a"),C=h("Friends Episode Data"),Y=h(`
            Layout: `),j=b("a"),ee=h("Observable Plot"),te=b("br"),se=h(`
            Each dot represents an episode.`),ne=me(),R=b("div"),this.h()},l(W){e=_(W,"DIV",{id:!0,class:!0});var q=k(e);t=_(q,"DIV",{id:!0,class:!0});var K=k(t);s=_(K,"H1",{class:!0});var T=k(s);a=m(T,"IMDB ratings of "),r=_(T,"SPAN",{id:!0,class:!0});var w=k(r);c=m(w,"F"),o=_(w,"SPAN",{class:!0});var ce=k(o);i=m(ce,"·"),ce.forEach(E),u=m(w,"R"),f=_(w,"SPAN",{class:!0});var le=k(f);d=m(le,"·"),le.forEach(E),I=m(w,"I"),p=_(w,"SPAN",{class:!0});var ie=k(p);v=m(ie,"·"),ie.forEach(E),X=m(w,"E"),S=_(w,"SPAN",{class:!0});var fe=k(S);O=m(fe,"·"),fe.forEach(E),L=m(w,"N"),D=_(w,"SPAN",{class:!0});var ue=k(D);V=m(ue,"·"),ue.forEach(E),F=m(w,"D"),A=_(w,"SPAN",{class:!0});var de=k(A);H=m(de,"·"),de.forEach(E),$=m(w,"S"),w.forEach(E),P=m(T," episodes per season."),T.forEach(E),z=ye(K),g=_(K,"DIV",{id:!0,class:!0});var M=k(g);N=m(M,"Data Source: "),x=_(M,"A",{href:!0,style:!0});var pe=k(x);C=m(pe,"Friends Episode Data"),pe.forEach(E),Y=m(M,`
            Layout: `),j=_(M,"A",{href:!0});var he=k(j);ee=m(he,"Observable Plot"),he.forEach(E),te=_(M,"BR",{}),se=m(M,`
            Each dot represents an episode.`),M.forEach(E),K.forEach(E),ne=ye(q),R=_(q,"DIV",{id:!0});var ze=k(R);ze.forEach(E),q.forEach(E),this.h()},h(){y(o,"class","red svelte-s3ahl7"),y(f,"class","blue svelte-s3ahl7"),y(p,"class","yellow svelte-s3ahl7"),y(S,"class","red svelte-s3ahl7"),y(D,"class","blue svelte-s3ahl7"),y(A,"class","yellow svelte-s3ahl7"),y(r,"id","friends"),y(r,"class","svelte-s3ahl7"),y(s,"class","svelte-s3ahl7"),y(x,"href","https://www.kaggle.com/datasets/bcruise/friends-episode-data"),Me(x,"padding-right","8px"),y(j,"href","https://altair-viz.github.io/index.html"),y(g,"id","data-source"),y(g,"class","svelte-s3ahl7"),y(t,"id","main-text"),y(t,"class","svelte-s3ahl7"),y(R,"id","graph"),y(e,"id","container"),y(e,"class","svelte-s3ahl7")},m(W,q){Oe(W,e,q),l(e,t),l(t,s),l(s,a),l(s,r),l(r,c),l(r,o),l(o,i),l(r,u),l(r,f),l(f,d),l(r,I),l(r,p),l(p,v),l(r,X),l(r,S),l(S,O),l(r,L),l(r,D),l(D,V),l(r,F),l(r,A),l(A,H),l(r,$),l(s,P),l(t,z),l(t,g),l(g,N),l(g,x),l(x,C),l(g,Y),l(g,j),l(j,ee),l(g,te),l(g,se),l(e,ne),l(e,R)},p:ae,i:ae,o:ae,d(W){W&&E(e)}}}let G="imdb_rating";const Xt=1300,Ft=1e3;function zt(n,e,t){let{data:s}=e;const a=s.imdb.data;console.log(a),Le(()=>{r()});function r(){let c=et({style:{fontSize:"14px"},color:{type:"categorical",scheme:"set3"},marks:[tt(),Dt(a,ot({y:"count"},{x:G,fill:"season",thresholds:12,curve:"basis"})),ct(a,Se({offset:null,x:G,fill:"black",r:2,stroke:"gray"})),st(a,{text:o=>o.title,filter:o=>o[G]>9.3||o[G]<7.5,x:G,y:2.4,clip:!0,lineWidth:12,fill:"gray"})],fy:{padding:.2,domain:d3.range(1,11).map(o=>o.toString())},facet:{data:a,y:"season",marginRight:80},y:{ticks:[0,3,6]},x:{nice:!0,domain:[5,10]},marginBottom:40,width:Xt,height:Ft});document.querySelector("#graph").append(c)}return n.$$set=c=>{"data"in c&&t(0,s=c.data)},[s]}class jt extends Ce{constructor(e){super(),Pe(this,e,zt,It,Ne,{data:0})}}export{jt as default};
