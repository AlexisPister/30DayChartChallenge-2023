import{S as Q,i as Z,s as ee,k as C,q as V,a as W,M as te,J as ae,l as I,m as w,r as F,h as b,c as X,N as ne,n as l,H as o,b as z,C as B,o as ie}from"../chunks/index.06a14631.js";import"../chunks/transform.2ac1f063.js";import{s as re,m as q}from"../chunks/Set2.a485a3be.js";import{d as se}from"../chunks/descending.129c84e0.js";import{m as M}from"../chunks/max.adfc8a60.js";import{o as oe}from"../chunks/ordinal.9aa01bae.js";import{s as Y}from"../chunks/select.c6d05060.js";function de(O){let v,P,L,x,d,_,D,p,m,U,A,r,n,i,t,f,S,g,u;return{c(){v=C("style"),P=V(`body {
        background-color: #4f210e;
        color: white;
    }`),L=W(),x=C("div"),d=C("div"),_=C("h1"),D=V("Dune novel's main characters family tree"),p=W(),m=C("div"),U=V("Data Source: "),A=C("a"),r=V("dune.fandom.com"),n=V(`
            Layout: `),i=C("a"),t=V("D3JS"),f=C("br"),S=W(),g=C("div"),u=te("svg"),this.h()},l(c){const E=ae("svelte-2euzky",document.head);v=I(E,"STYLE",{});var T=w(v);P=F(T,`body {
        background-color: #4f210e;
        color: white;
    }`),T.forEach(b),E.forEach(b),L=X(c),x=I(c,"DIV",{id:!0,class:!0});var y=w(x);d=I(y,"DIV",{id:!0,class:!0});var j=w(d);_=I(j,"H1",{class:!0});var $=w(_);D=F($,"Dune novel's main characters family tree"),$.forEach(b),p=X(j),m=I(j,"DIV",{id:!0,class:!0});var k=w(m);U=F(k,"Data Source: "),A=I(k,"A",{href:!0,class:!0});var R=w(A);r=F(R,"dune.fandom.com"),R.forEach(b),n=F(k,`
            Layout: `),i=I(k,"A",{href:!0,class:!0});var J=w(i);t=F(J,"D3JS"),J.forEach(b),f=I(k,"BR",{}),k.forEach(b),j.forEach(b),S=X(y),g=I(y,"DIV",{id:!0});var K=w(g);u=ne(K,"svg",{width:!0,height:!0,class:!0});var G=w(u);G.forEach(b),K.forEach(b),y.forEach(b),this.h()},h(){l(_,"class","svelte-1udimg4"),l(A,"href","https://dune.fandom.com/"),l(A,"class","svelte-1udimg4"),l(i,"href","https://d3js.org/"),l(i,"class","svelte-1udimg4"),l(m,"id","data-source"),l(m,"class","svelte-1udimg4"),l(d,"id","main-text"),l(d,"class","svelte-1udimg4"),l(u,"width",O[0]),l(u,"height",ce),l(u,"class","svelte-1udimg4"),l(g,"id","graph"),l(x,"id","container"),l(x,"class","svelte-1udimg4")},m(c,E){o(document.head,v),o(v,P),z(c,L,E),z(c,x,E),o(x,d),o(d,_),o(_,D),o(d,p),o(d,m),o(m,U),o(m,A),o(A,r),o(m,n),o(m,i),o(i,t),o(m,f),o(x,S),o(x,g),o(g,u)},p(c,[E]){E&1&&l(u,"width",c[0])},i:B,o:B,d(c){b(v),c&&b(L),c&&b(x)}}}const ce=1e3;function le(O,v,P){let L=[[{id:"Paulus Atréides",affiliation:"Atréides"},{id:"Héléna Richese",affiliation:"Richese"},{id:"Vladimir Harkonnen",affiliation:"Harkonnen"},{id:"Tanidia Nerus"},{id:"Elrood IX",affiliation:"Corrino"},{id:"Unknown2"},{id:"Abulurd Harkonnen II",affiliation:"Harkonnen"},{id:"Emmi Rabban"},{id:"Unknown"}],[{id:"Leto Atréides",parents:["Paulus Atréides","Héléna Richese"],affiliation:"Atréides"},{id:"Jessica Atréides",parents:["Vladimir Harkonnen","Tanidia Nerus"],affiliation:"Atréides"},{id:"Liet Kynes",affiliation:"Fremen"},{id:"Faroula",affiliation:"Fremen"},{id:"Anirul Corrino",affiliation:"Corrino"},{id:"Shaddam IV Corrino",parents:["Elrood IX","Unknown2"],affiliation:"Corrino"},{id:"Glossu Rabban",parents:["Abulurd Harkonnen II","Emmi Rabban"],affiliation:"Harkonnen"},{id:"Feyd-Rautha Harkonnen",parents:["Abulurd Harkonnen II","Unknown"],affiliation:"Harkonnen"}],[{id:"Alia Atréides",parents:["Leto Atréides","Jessica Atréides"],affiliation:"Atréides"},{id:"Paul Atréides",parents:["Leto Atréides","Jessica Atréides"],affiliation:"Atréides"},{id:"Chani Kynes",parents:["Liet Kynes","Faroula"],affiliation:"Fremen"},{id:"Irulan Corrino",parents:["Shaddam IV Corrino","Anirul Corrino"],affiliation:"Corrino"},{id:"Wensicia Corrino",parents:["Shaddam IV Corrino","Anirul Corrino"],affiliation:"Corrino"},{id:"Unknown1"}],[{id:"Leto Atréides II",parents:["Paul Atréides","Chani Kynes"],affiliation:"Atréides"},{id:"Paul Atréides II the elder",parents:["Paul Atréides","Chani Kynes"],affiliation:"Atréides"},{id:"Ghanima Atreides",parents:["Paul Atréides","Chani Kynes"],affiliation:"Atréides"},{id:"Farad'n Corrino",parents:["Wensicia Corrino","Unknown1"],affiliation:"Corrino"}]],x={Harkonnen:0,Atréides:1,Fremen:2,Corrino:3,Richese:4,undefined:5},d,_=1300,D=Object.keys(x).slice(0,-1).concat([void 0]);const p=oe(re).domain(Object.keys(x).slice(0,-1).concat([void 0])).range(["#4377b9","#e51b1a","#f4d4a9","#f0f001","#3797af","lightgray"]);ie(()=>{d=m(L),P(0,_=d.layout.width),console.log(d),U()});function m(r,n={}){r.forEach((e,a)=>e.forEach(s=>s.level=a));var i=r.reduce((e,a)=>e.concat(a),[]),t={};i.forEach(e=>t[e.id]=e),i.forEach(e=>{e.parents=(e.parents===void 0?[]:e.parents).map(a=>t[a])}),r.forEach((e,a)=>{var s={};e.forEach(h=>{if(h.parents.length!=0){var H=h.parents.map(N=>N.id).sort().join("-X-");H in s?s[H].parents=s[H].parents.concat(h.parents):s[H]={id:H,parents:h.parents.slice(),level:a,span:a-q(h.parents,N=>N.level)},h.bundle=s[H]}}),e.bundles=Object.keys(s).map(h=>s[h]),e.bundles.forEach((h,H)=>h.i=H)});var f=[];i.forEach(e=>{e.parents.forEach(a=>f.push({source:e,bundle:e.bundle,target:a}))});var S=r.reduce((e,a)=>e.concat(a.bundles),[]);S.forEach(e=>e.parents.forEach(a=>{a.bundles_index===void 0&&(a.bundles_index={}),e.id in a.bundles_index||(a.bundles_index[e.id]=[]),a.bundles_index[e.id].push(e)})),i.forEach(e=>{e.bundles_index!==void 0?e.bundles=Object.keys(e.bundles_index).map(a=>e.bundles_index[a]):(e.bundles_index={},e.bundles=[]),e.bundles.sort((a,s)=>se(M(a,h=>h.span),M(s,h=>h.span))),e.bundles.forEach((a,s)=>a.i=s)}),f.forEach(e=>{e.bundle.links===void 0&&(e.bundle.links=[]),e.bundle.links.push(e)});const g=8,u=30,c=180,E=14,T=16,y=4,j=22;n.c||(n.c=16);const $=n.c;n.bigc||(n.bigc=c+$),i.forEach(e=>e.height=(Math.max(1,e.bundles.length)-1)*y);var k=g,R=g;r.forEach(e=>{k+=e.bundles.length*E,R+=T,e.forEach((a,s)=>{a.x=a.level*c+k,a.y=u+R+a.height/2,R+=u+a.height})});var J=0;r.forEach(e=>{e.bundles.forEach(a=>{a.x=M(a.parents,s=>s.x)+c+(e.bundles.length-1-a.i)*E,a.y=J*u}),J+=e.length}),f.forEach(e=>{e.xt=e.target.x,e.yt=e.target.y+e.target.bundles_index[e.bundle.id].i*y-e.target.bundles.length*y/2+y/2,e.xb=e.bundle.x,e.yb=e.bundle.y,e.xs=e.source.x,e.ys=e.source.y});var K=0;r.forEach(e=>{K+=-j+q(e.bundles,a=>q(a.links,s=>s.ys-2*$-(s.yt+$)))||0,e.forEach(a=>a.y-=K)}),f.forEach(e=>{e.yt=e.target.y+e.target.bundles_index[e.bundle.id].i*y-e.target.bundles.length*y/2+y/2,e.ys=e.source.y,e.c1=e.source.level-e.target.level>1?Math.min(n.bigc,e.xb-e.xt,e.yb-e.yt)-$:$,e.c2=$});var G={width:M(i,e=>e.x)+c+2*g,height:M(i,e=>e.y)+u/2+2*g,node_height:u,node_width:c,bundle_width:E,level_y_padding:T,metro_d:y};return{levels:r,nodes:i,nodes_index:t,links:f,bundles:S,layout:G}}function U(){const r=Y("svg");r.selectAll(".label").data(d.nodes).join("text").classed("label",!0).text(n=>n.id.includes("known")?"Unknown":n.id).attr("x",n=>n.x+7).attr("y",n=>n.y-4).attr("fill",n=>p(n.affiliation)),r.selectAll(".path").data(d.links).join(n=>{let i=n.append("g");return i.append("path").attr("d",t=>(t.source.affiliation,t.target.affiliation,`
                      M${t.xt} ${t.yt}
                      L${t.xb-t.c1} ${t.yt}
                      A${t.c1} ${t.c1} 90 0 1 ${t.xb} ${t.yt+t.c1}
                      L${t.xb} ${t.ys-t.c2}
                      A${t.c2} ${t.c2} 90 0 0 ${t.xb+t.c2} ${t.ys}
                      L${t.xs} ${t.ys}`)).attr("fill","none").attr("stroke",t=>p(t.source.affiliation)),i.append("path").attr("d",t=>`
                      M${t.xt} ${t.yt}
                      L${t.xb-t.c1} ${t.yt}
                      A${t.c1} ${t.c1} 90 0 1 ${t.xb} ${t.yt+t.c1}
                      L${t.xb} ${t.ys-t.c2}
                      A${t.c2} ${t.c2} 90 0 0 ${t.xb+t.c2} ${t.ys}
                      L${t.xs} ${t.ys}`).attr("fill","none").attr("stroke",t=>p(t.source.affiliation)).attr("stroke-dasharray",t=>4),i}).classed(".path",!0),r.selectAll(".node").data(d.nodes).join("circle").classed("node",!0).attr("cx",n=>n.x).attr("cy",n=>n.y).attr("r",n=>4).attr("fill",n=>p(n.affiliation)).attr("stroke",n=>"black"),A()}function A(){let r=Y("svg").append("g").attr("transform","translate(500, 70)"),n=100,i=33;r.append("text").text("Affiliations").attr("transform",(t,f)=>`translate(${n-4},10)`).attr("fill","white").attr("font-size","22px"),r.selectAll(".dot").data(D).join("rect").attr("transform",(t,f)=>`translate(${n}, ${i+f*25})`).attr("x",-7).attr("y",-7).attr("width",10).attr("height",10).style("fill",function(t){return p(t)}).classed("dot",!0),r.selectAll(".llabel").data(D).join("text").attr("x",n+20).attr("y",function(t,f){return i+f*25}).style("fill",function(t){return p(t)}).text(function(t){return t||"Other/Unknown"}).style("alignment-baseline","middle").classed("llabel",!0)}return[_]}class ge extends Q{constructor(v){super(),Z(this,v,le,de,ee,{})}}export{ge as default};
